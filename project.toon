project: br
root: /home/tom/github/founder-pl/br
generated: 2026-01-14T08:29:07.093001
stats:
  files: 114
  lines: 37259
  languages[2]: python:112,javascript:2

modules[114]{path,lang,lines,kb}:
  src/__init__.py,python,0,0.0
  tests/conftest.py,python,394,13.5
  tests/__init__.py,python,3,0.0
  tests/test_documentation_validation.py,python,501,22.7
  tests/test_invoice_detection.py,python,104,4.0
  tests/test_doc_generator.py,python,213,10.1
  tests/test_doc_generator_e2e.py,python,152,6.8
  cli/validate_documentation.py,python,131,6.2
  cli/generate_sample_invoices.py,python,186,7.8
  cli/br_cli.py,python,210,10.6
  tests/unit/test_extractors.py,python,149,6.4
  tests/unit/__init__.py,python,1,0.0
  tests/unit/test_validators.py,python,148,5.9
  tests/unit/test_integrations.py,python,213,8.5
  tests/e2e/test_web_gui_smoke.py,python,28,1.0
  tests/e2e/test_scenarios.py,python,252,12.4
  tests/e2e/test_integrations_e2e.py,python,508,25.0
  tests/e2e/__init__.py,python,1,0.0
  tests/integration/test_api.py,python,202,8.8
  tests/integration/__init__.py,python,1,0.0
  tests/integration/test_sql_fixes.py,python,122,5.7
  tests/integration/test_integrations_api.py,python,220,9.9
  tests/integration/test_git_timesheet.py,python,137,6.1
  src/doc_generator/engine.py,python,476,22.6
  src/doc_generator/data_sources.py,python,409,17.9
  src/doc_generator/__init__.py,python,9,0.4
  src/doc_generator/router.py,python,204,7.6
  src/doc_generator/templates.py,python,681,31.6
  src/ocr/extractors.py,python,223,9.6
  src/ocr/engines.py,python,233,8.3
  src/ocr/__init__.py,python,26,0.9
  src/ocr/preprocessing.py,python,173,6.6
  src/ocr/models.py,python,45,1.6
  src/ocr/main.py,python,268,12.2
  src/infrastructure/__init__.py,python,19,0.4
  src/infrastructure/tasks.py,python,191,8.1
  src/infrastructure/celery_app.py,python,57,2.0
  src/integrations/__init__.py,python,65,1.5
  src/integrations/factory.py,python,232,8.9
  src/api/config.py,python,30,1.3
  src/api/__init__.py,python,7,0.2
  src/api/ocr_config.py,python,191,8.2
  src/api/document_classifier.py,python,226,8.3
  src/api/database.py,python,58,1.9
  src/api/main.py,python,147,6.5
  src/api/validators/expense_pipeline.py,python,369,16.3
  src/api/validators/__init__.py,python,25,0.7
  src/api/validators/currency_converter.py,python,102,4.5
  src/api/validators/invoice_validator.py,python,90,3.7
  src/api/services/uncertainty_generator.py,python,168,8.0
  src/api/services/doc_generator.py,python,731,38.6
  src/api/services/justification_generator.py,python,230,10.6
  src/api/services/excel_exporter.py,python,247,11.8
  src/api/services/__init__.py,python,20,0.6
  src/api/services/expense_categorizer.py,python,246,11.0
  src/api/services/audit_trail.py,python,244,8.7
  src/api/services/expense_service.py,python,576,26.4
  src/api/models/project_extended.py,python,139,6.3
  src/api/models/__init__.py,python,50,1.1
  src/api/models/daily_time_entry.py,python,167,6.8
  src/api/routers/timesheet.py,python,396,15.5
  src/api/routers/config.py,python,253,10.4
  src/api/routers/clarifications.py,python,177,6.4
  src/api/routers/projects.py,python,371,14.1
  src/api/routers/auth.py,python,152,5.4
  src/api/routers/__init__.py,python,5,0.2
  src/api/routers/integrations.py,python,452,19.9
  src/api/routers/logs.py,python,268,11.3
  src/api/routers/git_timesheet.py,python,407,15.9
  src/api/routers/reports.py,python,448,20.3
  src/api/routers/documents.py,python,871,39.1
  src/api/routers/expenses.py,python,1376,58.5
  src/api/cqrs/commands.py,python,276,12.2
  src/api/cqrs/events.py,python,220,9.3
  src/api/cqrs/__init__.py,python,46,1.1
  src/api/cqrs/queries.py,python,222,9.3
  src/api/integrations/__init__.py,python,34,0.7
  src/api/integrations/ksef_client.py,python,288,11.0
  src/api/integrations/jpk_export.py,python,324,15.5
  src/integrations/accounting/fakturownia.py,python,232,9.4
  src/integrations/accounting/base.py,python,272,10.0
  src/integrations/accounting/__init__.py,python,24,0.5
  src/integrations/accounting/wfirma_infakt.py,python,308,12.6
  src/integrations/accounting/ifirma.py,python,189,8.1
  src/integrations/config/__init__.py,python,21,0.4
  src/integrations/config/database.py,python,354,15.6
  src/integrations/cloud/dropbox_onedrive.py,python,475,19.7
  src/integrations/cloud/base.py,python,224,7.7
  src/integrations/cloud/google_s3.py,python,509,21.6
  src/integrations/cloud/__init__.py,python,19,0.5
  src/integrations/cloud/nextcloud.py,python,280,11.6
  web/static/js/markdown-renderer.js,javascript,136,5.4
  web/static/js/app.js,javascript,3434,167.1
  brgenerator/tests/conftest.py,python,86,2.5
  brgenerator/tests/__init__.py,python,0,0.0
  brgenerator/tests/test_validators.py,python,325,14.7
  brgenerator/tests/test_e2e.py,python,322,13.4
  brgenerator/src/br_doc_generator/config.py,python,207,7.7
  brgenerator/src/br_doc_generator/cli.py,python,460,18.1
  brgenerator/src/br_doc_generator/__init__.py,python,332,12.4
  brgenerator/src/br_doc_generator/web.py,python,406,19.0
  brgenerator/src/br_doc_generator/llm_client.py,python,264,10.3
  brgenerator/src/br_doc_generator/models.py,python,341,14.8
  brgenerator/src/br_doc_generator/validators/content.py,python,165,7.7
  brgenerator/src/br_doc_generator/validators/base.py,python,187,6.8
  brgenerator/src/br_doc_generator/validators/structure.py,python,220,10.0
  brgenerator/src/br_doc_generator/validators/financial.py,python,205,10.9
  brgenerator/src/br_doc_generator/validators/__init__.py,python,19,0.6
  brgenerator/src/br_doc_generator/validators/legal.py,python,244,11.9
  brgenerator/src/br_doc_generator/validators/pipeline.py,python,283,12.8
  brgenerator/src/br_doc_generator/generators/document.py,python,332,14.2
  brgenerator/src/br_doc_generator/generators/__init__.py,python,13,0.3
  brgenerator/src/br_doc_generator/generators/form.py,python,311,15.3
  brgenerator/src/br_doc_generator/generators/pdf.py,python,504,14.1

module_details:
  src/__init__.py:
  tests/conftest.py:
    imports[20]: os,asyncio,typing.AsyncGenerator,typing.Generator,datetime,datetime.date,decimal.Decimal,uuid,pathlib.Path,pytest,pytest_asyncio,httpx.AsyncClient,httpx.ASGITransport,sqlalchemy.ext.asyncio.AsyncSession,sqlalchemy.ext.asyncio.create_async_engine
    exports[21]: TEST_DATABASE_URL,event_loop,db_session,client,sample_project_data,sample_expense_data,sample_document_data,sample_invoice_text,sample_nip_valid,sample_nip_invalid
    const[1]{n,t,v,keys}:
      TEST_DATABASE_URL,"-","os.getenv(     \"TEST_DATABASE_URL\",     os.getenv(\"DATABASE_URL\", \"postgresql+asyncpg://br_admin:br_secret_2025@postg...","-"
    functions[20]{name,sig,decorators,async,category,lines}:
      event_loop,()->None,pytest_asyncio.fixture,false,-,5
      db_session,"()->AsyncGenerator[AsyncSession, None]",pytest_asyncio.fixture,true,-,5
      client,"(db_session:AsyncSession)->AsyncGenerator[AsyncClient, None]",pytest_asyncio.fixture,true,-,13
      sample_project_data,()->None,pytest.fixture,false,-,9
      sample_expense_data,()->None,pytest.fixture,false,-,14
      sample_document_data,()->None,pytest.fixture,false,-,8
      sample_invoice_text,()->None,pytest.fixture,false,-,25
      sample_nip_valid,()->None,pytest.fixture,false,-,6
      sample_nip_invalid,()->None,pytest.fixture,false,-,8
      mock_ocr_result,()->None,pytest.fixture,false,-,16
      mock_llm_classification,()->None,pytest.fixture,false,-,13
      create_test_pdf_content,()->bytes,-,false,-,24
      create_test_image_content,()->bytes,-,false,-,14
      sample_accounting_integration,()->None,pytest.fixture,false,-,19
      sample_cloud_integration,()->None,pytest.fixture,false,-,16
      sample_invoice_from_api,()->None,pytest.fixture,false,-,34
      sample_cloud_file,()->None,pytest.fixture,false,-,12
      all_accounting_providers,()->None,pytest.fixture,false,-,33
      all_cloud_providers,()->None,pytest.fixture,false,-,54
      temp_config_db,(tmp_path)->None,pytest.fixture,false,-,10
    function_docs:
      event_loop: event loop
      db_session: db session
      client: client
      sample_project_data: sample project data
      sample_expense_data: sample expense data
      sample_document_data: sample document data
      sample_invoice_text: sample invoice text
      sample_nip_valid: sample nip valid
      sample_nip_invalid: sample nip invalid
      mock_ocr_result: mock ocr result
      mock_llm_classification: mock llm classification
      create_test_pdf_content: creates test pdf content
      create_test_image_content: creates test image content
      sample_accounting_integration: sample accounting integration
      sample_cloud_integration: sample cloud integration
      sample_invoice_from_api: sample invoice from api
      sample_cloud_file: sample cloud file
      all_accounting_providers: all accounting providers
      all_cloud_providers: all cloud providers
      temp_config_db: temp config db
  tests/__init__.py:
  tests/test_documentation_validation.py:
    imports[10]: pytest,re,json,dataclasses.dataclass,dataclasses.field,typing.List,typing.Dict,typing.Optional,enum.Enum,datetime
    exports[9]: Severity,ValidationIssue,ValidationReport,BRDocumentationValidator,TestDocumentationStructure,TestDocumentationContent,TestLegalCompliance,TestFinancialValidation,TestFullValidation
    types[1]{name,kind,values,def}:
      Severity,enum,"CRITICAL=\"critical\"|WARNING=\"warning\"|INFO=\"info\"","-"
    classes[9]{name,bases,decorators,props,methods}:
      Severity,Enum,-,0,0
      ValidationIssue,-,dataclass,0,0
      ValidationReport,-,dataclass,0,1
      BRDocumentationValidator,-,-,0,8
      TestDocumentationStructure,-,-,0,3
      TestDocumentationContent,-,-,0,2
      TestLegalCompliance,-,-,0,2
      TestFinancialValidation,-,-,0,2
      TestFullValidation,-,-,0,2
    class_details:
      Severity:
      ValidationIssue:
        fields[5]{n,t,default,factory}:
          type,str,"-","-"
          severity,Severity,"-","-"
          location,str,"-","-"
          message,str,"-","-"
          suggestion,str,"\"\"","-"
      ValidationReport:
        fields[5]{n,t,default,factory}:
          stage,str,"-","-"
          timestamp,str,"-","-"
          status,str,"-","-"
          score,float,"-","-"
          issues,"List[ValidationIssue]","-",list
        methods[1]{name,sig,decorators,async,lines}:
          to_dict,()->dict,-,false,17
      BRDocumentationValidator:
        doc: Multi-level documentation validator following brgenerator pipeline.
        methods[8]{name,sig,decorators,async,lines}:
          __init__,"(content:str)->None",-,false,4
          validate_all,"()->Dict[str, ValidationReport]",-,false,8
          validate_structure,()->ValidationReport,-,false,67
          validate_content,()->ValidationReport,-,false,73
          validate_legal_compliance,()->ValidationReport,-,false,71
          validate_financial,()->ValidationReport,-,false,88
          get_overall_score,()->float,-,false,5
          get_full_report,()->dict,-,false,18
      TestDocumentationStructure:
        doc: "Test Stage 2: Structure Validation"
        methods[3]{name,sig,decorators,async,lines}:
          test_structure_valid,()->None,-,false,6
          test_structure_missing_header,()->None,-,false,6
          test_structure_missing_sections,()->None,-,false,7
      TestDocumentationContent:
        doc: "Test Stage 3: Content Validation"
        methods[2]{name,sig,decorators,async,lines}:
          test_content_with_expenses,()->None,-,false,11
          test_content_missing_justification,()->None,-,false,6
      TestLegalCompliance:
        doc: "Test Stage 4: Legal Compliance"
        methods[2]{name,sig,decorators,async,lines}:
          test_legal_with_all_requirements,()->None,-,false,12
          test_legal_missing_nip,()->None,-,false,6
      TestFinancialValidation:
        doc: "Test Stage 5: Financial Validation"
        methods[2]{name,sig,decorators,async,lines}:
          test_financial_with_amounts,()->None,-,false,11
          test_financial_missing_amounts,()->None,-,false,6
      TestFullValidation:
        doc: Test complete validation pipeline.
        methods[2]{name,sig,decorators,async,lines}:
          test_full_validation_pipeline,()->None,-,false,13
          test_full_report_format,()->None,-,false,12
  tests/test_invoice_detection.py:
    imports[2]: pytest,src.api.routers.documents.detect_invoice_type
    exports[3]: TestInvoiceTypeDetection,SAMPLE_COST_INVOICE,SAMPLE_REVENUE_INVOICE
    const[2]{n,t,v,keys}:
      SAMPLE_COST_INVOICE,Dict,"{     \"invoice_number\": \"FV/2025/COST/001\",     \"invoice_date\": \"2025-12-15\",     \"vendor_name\": \"Test Vendor Sp. z o...","-"
      SAMPLE_REVENUE_INVOICE,Dict,"{     \"invoice_number\": \"FV/2025/REV/001\",      \"invoice_date\": \"2025-12-20\",     \"vendor_name\": \"Tomasz Sapletta\",  ...","-"
    classes[1]{name,bases,decorators,props,methods}:
      TestInvoiceTypeDetection,-,-,0,9
    class_details:
      TestInvoiceTypeDetection:
        doc: Test suite for detect_invoice_type function.
        methods[9]{name,sig,decorators,async,lines}:
          test_cost_invoice_vendor_nip_different,()->None,-,false,8
          test_revenue_invoice_we_are_seller,()->None,-,false,8
          test_cost_invoice_seller_nip_field,()->None,-,false,8
          test_revenue_invoice_nip_sprzedawcy_field,()->None,-,false,8
          test_cost_invoice_no_buyer_nip,()->None,-,false,7
          test_revenue_invoice_nip_with_dashes,()->None,-,false,8
          test_cost_invoice_empty_nips,()->None,-,false,8
          test_cost_invoice_none_nips,()->None,-,false,8
          test_revenue_from_ocr_text_hint,()->None,-,false,7
  tests/test_doc_generator.py:
    imports[5]: pytest,unittest.mock.AsyncMock,unittest.mock.MagicMock,unittest.mock.patch,datetime
    exports[7]: TestTemplateRegistry,TestDataSourceRegistry,TestTemplateRenderer,TestDocumentEngine,TestFormatHelpers,TestDocGeneratorAPI,test_client
    classes[6]{name,bases,decorators,props,methods}:
      TestTemplateRegistry,-,-,0,4
      TestDataSourceRegistry,-,-,0,3
      TestTemplateRenderer,-,-,0,6
      TestDocumentEngine,-,-,0,4
      TestFormatHelpers,-,-,0,2
      TestDocGeneratorAPI,-,pytest.mark.asyncio,0,6
    class_details:
      TestTemplateRegistry:
        doc: Tests for TemplateRegistry
        methods[4]{name,sig,decorators,async,lines}:
          test_list_templates,()->None,-,false,10
          test_get_template_by_id,()->None,-,false,10
          test_template_categories,()->None,-,false,8
          test_template_required_params,()->None,-,false,10
      TestDataSourceRegistry:
        doc: Tests for DataSourceRegistry
        methods[3]{name,sig,decorators,async,lines}:
          test_list_sources,()->None,-,false,9
          test_get_source_by_name,()->None,-,false,8
          test_sql_source_schema,()->None,-,false,10
      TestTemplateRenderer:
        doc: Tests for TemplateRenderer
        methods[6]{name,sig,decorators,async,lines}:
          test_render_variables,()->None,-,false,9
          test_render_nested_variables,()->None,-,false,9
          test_render_filter_format_currency,()->None,-,false,9
          test_render_for_loop,()->None,-,false,9
          test_render_if_condition,()->None,-,false,11
          test_render_if_else,()->None,-,false,11
      TestDocumentEngine:
        doc: Tests for DocumentEngine
        methods[4]{name,sig,decorators,async,lines}:
          test_list_templates,()->None,-,false,9
          test_get_template,()->None,-,false,13
          test_get_demo_document,()->None,-,false,12
          test_build_context,()->None,-,false,21
      TestFormatHelpers:
        doc: Tests for format helper functions
        methods[2]{name,sig,decorators,async,lines}:
          test_format_currency,()->None,-,false,6
          test_format_date,()->None,-,false,6
      TestDocGeneratorAPI:
        doc: Integration tests for doc-generator API endpoints
        methods[6]{name,sig,decorators,async,lines}:
          test_list_templates_endpoint,(test_client)->None,-,true,9
          test_get_template_detail,(test_client)->None,-,true,8
          test_get_template_not_found,(test_client)->None,-,true,4
          test_list_data_sources,(test_client)->None,-,true,8
          test_get_demo_document,(test_client)->None,-,true,8
          test_filter_options,(test_client)->None,-,true,9
    functions[1]{name,sig,decorators,async,category,lines}:
      test_client,()->None,pytest.fixture,false,-,3
    function_docs:
      test_client: checks client
  tests/test_doc_generator_e2e.py:
    imports[3]: pytest,httpx,os
    exports[3]: API_BASE,PROJECT_ID,TestDocGeneratorE2E
    const[2]{n,t,v,keys}:
      API_BASE,str,"\"http://localhost:8020\"","-"
      PROJECT_ID,str,"\"00000000-0000-0000-0000-000000000001\"","-"
    classes[1]{name,bases,decorators,props,methods}:
      TestDocGeneratorE2E,-,-,0,12
    class_details:
      TestDocGeneratorE2E:
        doc: End-to-end tests for document generator API
        methods[12]{name,sig,decorators,async,lines}:
          client,()->None,pytest.fixture,false,8
          test_list_templates,(client)->None,-,false,12
          test_get_filter_options,(client)->None,-,false,10
          test_get_template_detail,(client)->None,-,false,9
          test_get_demo_document,(client)->None,-,false,9
          test_preview_data,(client)->None,-,false,11
          test_generate_project_card,(client)->None,-,false,14
          test_generate_expense_registry,(client)->None,-,false,13
          test_generate_nexus_calculation,(client)->None,-,false,12
          test_generate_br_annual_summary,(client)->None,-,false,12
          test_generate_ip_box_procedure,(client)->None,-,false,13
          test_generate_all_templates,(client)->None,-,false,26
  cli/validate_documentation.py:
    imports[9]: argparse,json,sys,os,datetime,requests,yaml,tests.test_documentation_validation.BRDocumentationValidator,tests.test_documentation_validation.Severity
    exports[5]: API_BASE,fetch_documentation,validate_and_report,print_report,main
    const[1]{n,t,v,keys}:
      API_BASE,"-","os.environ.get(\"BR_API_URL\", \"http://localhost:8020\")","-"
    functions[6]{name,sig,decorators,async,category,lines}:
      fetch_documentation,"(project_id:str;filename:str=None)->str",-,false,-,24
      validate_and_report,"(content:str;output_format:str='text')->dict",-,false,-,7
      print_report,"(report:dict;output_format:str='text')->None",-,false,-,52
      _status_icon,"(status:str)->str",-,false,-,2
      _severity_icon,"(severity:str)->str",-,false,-,2
      main,()->None,-,false,-,48
    function_docs:
      fetch_documentation: retrieves documentation
      validate_and_report: validates and report
      print_report: logs report
      _status_icon: status icon
      _severity_icon: severity icon
      main: main
  cli/generate_sample_invoices.py:
    imports[8]: os,sys,pathlib.Path,datetime,reportlab.lib.pagesizes.A4,reportlab.lib.units.cm,reportlab.pdfgen.canvas,reportlab.lib.colors
    exports[8]: OUTPUT_DIR,OUR_COMPANY,VENDORS,CLIENTS,generate_html_invoice,generate_pdf_invoice,generate_invoice,main
    const[4]{n,t,v,keys}:
      OUTPUT_DIR,"-","Path(__file__).parent / \"sample_invoices\"","-"
      OUR_COMPANY,Dict,"{     \"name\": \"Tomasz Sapletta\",     \"nip\": \"5881918662\",     \"address\": \"ul. Testowa 1, 00-001 Warszawa\" }","-"
      VENDORS,List,"[     {\"name\": \"InsERT S.A.\", \"nip\": \"5542926469\", \"address\": \"ul. Programistów 10, 50-001 Wrocław\"},     {\"name\": \"C...","-"
      CLIENTS,List,"[     {\"name\": \"Klient ABC Sp. z o.o.\", \"nip\": \"1111111111\", \"address\": \"ul. Biznesowa 20, 00-002 Warszawa\"},     {\"n...","-"
    functions[4]{name,sig,decorators,async,category,lines}:
      generate_html_invoice,"(invoice_data:dict;output_path:Path)->None",-,false,-,67
      generate_pdf_invoice,"(invoice_data:dict;output_path:Path)->None",-,false,-,55
      generate_invoice,"(invoice_data:dict;output_path:Path)->None",-,false,-,6
      main,()->None,-,false,-,51
    function_docs:
      generate_html_invoice: creates html invoice
      generate_pdf_invoice: creates pdf invoice
      generate_invoice: creates invoice
      main: main
  cli/br_cli.py:
    imports[7]: argparse,json,sys,os,pathlib.Path,datetime,requests
    exports[14]: API_BASE,api_call,cmd_health,cmd_projects_list,cmd_expenses_list,cmd_revenues_list,cmd_upload,cmd_docs_list,cmd_docs_generate,cmd_docs_view
    const[1]{n,t,v,keys}:
      API_BASE,"-","os.environ.get(\"BR_API_URL\", \"http://localhost:8020\")","-"
    functions[13]{name,sig,decorators,async,category,lines}:
      api_call,"(method:str;endpoint:str;data=None;files=None)->None",-,false,-,23
      cmd_health,(args)->None,-,false,-,7
      cmd_projects_list,(args)->None,-,false,-,7
      cmd_expenses_list,(args)->None,-,false,-,12
      cmd_revenues_list,(args)->None,-,false,-,11
      cmd_upload,(args)->None,-,false,-,16
      cmd_docs_list,(args)->None,-,false,-,12
      cmd_docs_generate,(args)->None,-,false,-,11
      cmd_docs_view,(args)->None,-,false,-,6
      cmd_docs_history,(args)->None,-,false,-,9
      cmd_expense_qualify,(args)->None,-,false,-,13
      cmd_timesheet_list,(args)->None,-,false,-,9
      main,()->None,-,false,-,92
    function_docs:
      api_call: api call
      cmd_health: cmd health
      cmd_projects_list: cmd projects list
      cmd_expenses_list: cmd expenses list
      cmd_revenues_list: cmd revenues list
      cmd_upload: cmd upload
      cmd_docs_list: cmd docs list
      cmd_docs_generate: cmd docs generate
      cmd_docs_view: cmd docs view
      cmd_docs_history: cmd docs history
      cmd_expense_qualify: cmd expense qualify
      cmd_timesheet_list: cmd timesheet list
      main: main
  tests/unit/test_extractors.py:
    imports[4]: pytest,datetime.date,src.ocr.extractors.InvoiceExtractor,src.ocr.extractors.get_extractor
    exports[4]: TestInvoiceExtractor,TestDateParsing,TestAmountParsing,TestExtractorFactory
    classes[4]{name,bases,decorators,props,methods}:
      TestInvoiceExtractor,-,-,0,9
      TestDateParsing,-,-,0,6
      TestAmountParsing,-,-,0,7
      TestExtractorFactory,-,-,0,3
    class_details:
      TestInvoiceExtractor:
        doc: Tests for invoice data extraction
        methods[9]{name,sig,decorators,async,lines}:
          extractor,()->None,pytest.fixture,false,2
          test_extract_nip_from_text,(extractor;sample_invoice_text)->None,pytest.mark.unit|pytest.mark.asyncio,true,9
          test_extract_invoice_number,(extractor;sample_invoice_text)->None,pytest.mark.unit|pytest.mark.asyncio,true,6
          test_extract_dates,(extractor;sample_invoice_text)->None,pytest.mark.unit|pytest.mark.asyncio,true,8
          test_extract_amounts,(extractor;sample_invoice_text)->None,pytest.mark.unit|pytest.mark.asyncio,true,6
          test_extraction_confidence,(extractor;sample_invoice_text)->None,pytest.mark.unit|pytest.mark.asyncio,true,6
          test_extract_empty_text,(extractor)->None,pytest.mark.unit|pytest.mark.asyncio,true,6
          test_document_type_default,(extractor)->None,pytest.mark.unit|pytest.mark.asyncio,true,5
          test_document_type_override,(extractor)->None,pytest.mark.unit|pytest.mark.asyncio,true,5
      TestDateParsing:
        doc: Tests for Polish date format parsing
        methods[6]{name,sig,decorators,async,lines}:
          extractor,()->None,pytest.fixture,false,2
          test_parse_date_dd_mm_yyyy_dot,(extractor)->None,pytest.mark.unit,false,4
          test_parse_date_dd_mm_yyyy_dash,(extractor)->None,pytest.mark.unit,false,4
          test_parse_date_yyyy_mm_dd,(extractor)->None,pytest.mark.unit,false,4
          test_parse_date_polish_month,(extractor)->None,pytest.mark.unit,false,4
          test_parse_invalid_date,(extractor)->None,pytest.mark.unit,false,4
      TestAmountParsing:
        doc: Tests for Polish amount format parsing
        methods[7]{name,sig,decorators,async,lines}:
          extractor,()->None,pytest.fixture,false,2
          test_parse_amount_comma_decimal,(extractor)->None,pytest.mark.unit,false,4
          test_parse_amount_dot_decimal,(extractor)->None,pytest.mark.unit,false,4
          test_parse_amount_with_spaces,(extractor)->None,pytest.mark.unit,false,4
          test_parse_amount_large,(extractor)->None,pytest.mark.unit,false,4
          test_parse_amount_empty,(extractor)->None,pytest.mark.unit,false,4
          test_parse_amount_none,(extractor)->None,pytest.mark.unit,false,4
      TestExtractorFactory:
        doc: Tests for extractor factory function
        methods[3]{name,sig,decorators,async,lines}:
          test_get_invoice_extractor,()->None,pytest.mark.unit,false,4
          test_get_default_extractor,()->None,pytest.mark.unit,false,4
          test_get_unknown_extractor,()->None,pytest.mark.unit,false,4
  tests/unit/__init__.py:
  tests/unit/test_validators.py:
    imports[5]: pytest,src.ocr.extractors.validate_nip,src.ocr.extractors.validate_regon,src.api.validators.invoice_validator.InvoiceValidator,src.api.validators.invoice_validator.InvoiceValidationResult
    exports[3]: TestNIPValidation,TestREGONValidation,TestInvoiceValidator
    classes[3]{name,bases,decorators,props,methods}:
      TestNIPValidation,-,-,0,10
      TestREGONValidation,-,-,0,5
      TestInvoiceValidator,-,-,0,11
    class_details:
      TestNIPValidation:
        doc: Tests for Polish NIP (tax identification number) validation
        methods[10]{name,sig,decorators,async,lines}:
          test_valid_nip_tomasz_sapletta,()->None,pytest.mark.unit,false,3
          test_valid_nip_with_dashes,()->None,pytest.mark.unit,false,3
          test_valid_nip_with_spaces,()->None,pytest.mark.unit,false,3
          test_invalid_nip_wrong_checksum,()->None,pytest.mark.unit,false,3
          test_invalid_nip_too_short,()->None,pytest.mark.unit,false,3
          test_invalid_nip_too_long,()->None,pytest.mark.unit,false,3
          test_invalid_nip_all_zeros,()->None,pytest.mark.unit,false,3
          test_invalid_nip_letters,()->None,pytest.mark.unit,false,3
          test_empty_nip,()->None,pytest.mark.unit,false,3
          test_various_nips,(nip;expected)->None,pytest.mark.unit|pytest.mark.parametrize,false,3
      TestREGONValidation:
        doc: Tests for Polish REGON validation
        methods[5]{name,sig,decorators,async,lines}:
          test_valid_regon_9_digit,()->None,pytest.mark.unit,false,4
          test_invalid_regon_wrong_checksum,()->None,pytest.mark.unit,false,3
          test_invalid_regon_too_short,()->None,pytest.mark.unit,false,3
          test_invalid_regon_wrong_length,()->None,pytest.mark.unit,false,3
          test_empty_regon,()->None,pytest.mark.unit,false,3
      TestInvoiceValidator:
        doc: Tests for Polish invoice number validation
        methods[11]{name,sig,decorators,async,lines}:
          validator,()->None,pytest.fixture,false,2
          test_valid_invoice_fv_format,(validator)->None,pytest.mark.unit,false,5
          test_valid_invoice_numeric_format,(validator)->None,pytest.mark.unit,false,4
          test_valid_invoice_alphanumeric,(validator)->None,pytest.mark.unit,false,4
          test_generic_invoice_faktury,(validator)->None,pytest.mark.unit,false,6
          test_generic_invoice_sprzedazy,(validator)->None,pytest.mark.unit,false,4
          test_generic_invoice_short_number,(validator)->None,pytest.mark.unit,false,4
          test_empty_invoice,(validator)->None,pytest.mark.unit,false,5
          test_none_invoice,(validator)->None,pytest.mark.unit,false,4
          test_is_generic_helper,(validator)->None,pytest.mark.unit,false,5
          test_various_invoice_numbers,(validator;invoice;expected_valid)->None,pytest.mark.unit|pytest.mark.parametrize,false,4
  tests/unit/test_integrations.py:
    imports[15]: pytest,datetime.date,unittest.mock.AsyncMock,unittest.mock.MagicMock,unittest.mock.patch,src.integrations.config.database.ConfigDatabase,src.integrations.config.database.IntegrationProvider,src.integrations.config.database.IntegrationType,src.integrations.config.database.DatabaseType,src.integrations.accounting.base.Invoice,src.integrations.accounting.base.InvoiceItem,src.integrations.accounting.base.InvoiceType,src.integrations.accounting.base.InvoiceStatus,src.integrations.cloud.base.CloudFile,src.integrations.cloud.base.UploadResult
    exports[4]: TestConfigDatabase,TestInvoiceModel,TestCloudFileModel,TestFactoryFunctions
    classes[4]{name,bases,decorators,props,methods}:
      TestConfigDatabase,-,-,0,6
      TestInvoiceModel,-,-,0,2
      TestCloudFileModel,-,-,0,3
      TestFactoryFunctions,-,-,0,4
    class_details:
      TestConfigDatabase:
        doc: Tests for configuration database
        methods[6]{name,sig,decorators,async,lines}:
          config_db,(tmp_path)->None,pytest.fixture,false,8
          test_save_and_get_integration,(config_db)->None,pytest.mark.unit,false,19
          test_list_integrations,(config_db)->None,pytest.mark.unit,false,27
          test_delete_integration,(config_db)->None,pytest.mark.unit,false,15
          test_encryption_decryption,(config_db)->None,pytest.mark.unit,false,9
          test_sync_log,(config_db)->None,pytest.mark.unit,false,16
      TestInvoiceModel:
        doc: Tests for Invoice data model
        methods[2]{name,sig,decorators,async,lines}:
          test_invoice_item_calculation,()->None,pytest.mark.unit,false,13
          test_invoice_creation,()->None,pytest.mark.unit,false,18
      TestCloudFileModel:
        doc: Tests for CloudFile data model
        methods[3]{name,sig,decorators,async,lines}:
          test_cloud_file_creation,()->None,pytest.mark.unit,false,13
          test_upload_result_success,()->None,pytest.mark.unit,false,11
          test_upload_result_failure,()->None,pytest.mark.unit,false,9
      TestFactoryFunctions:
        doc: Tests for integration factory functions
        methods[4]{name,sig,decorators,async,lines}:
          test_get_accounting_client_ifirma,()->None,pytest.mark.unit,false,12
          test_get_cloud_client_nextcloud,()->None,pytest.mark.unit,false,15
          test_get_cloud_client_s3,()->None,pytest.mark.unit,false,15
          test_get_unknown_provider,()->None,pytest.mark.unit,false,7
  tests/e2e/test_web_gui_smoke.py:
    imports[2]: pytest,httpx.AsyncClient
    exports[3]: test_web_serves_index_html,test_web_serves_static_js,test_web_proxies_api_health
    functions[3]{name,sig,decorators,async,category,lines}:
      test_web_serves_index_html,()->None,pytest.mark.e2e|pytest.mark.asyncio,true,-,6
      test_web_serves_static_js,()->None,pytest.mark.e2e|pytest.mark.asyncio,true,-,5
      test_web_proxies_api_health,()->None,pytest.mark.e2e|pytest.mark.asyncio,true,-,6
    function_docs:
      test_web_serves_index_html: checks web serves index html
      test_web_serves_static_js: checks web serves static js
      test_web_proxies_api_health: checks web proxies api health
  tests/e2e/test_scenarios.py:
    imports[6]: pytest,asyncio,pathlib.Path,httpx.AsyncClient,tests.conftest.create_test_pdf_content,tests.conftest.create_test_image_content
    exports[5]: TestDocumentProcessingE2E,TestReportGenerationE2E,TestClarificationWorkflowE2E,TestProjectManagementE2E,TestFullBusinessScenarioE2E
    classes[5]{name,bases,decorators,props,methods}:
      TestDocumentProcessingE2E,-,-,0,2
      TestReportGenerationE2E,-,-,0,1
      TestClarificationWorkflowE2E,-,-,0,1
      TestProjectManagementE2E,-,-,0,1
      TestFullBusinessScenarioE2E,-,-,0,1
    class_details:
      TestDocumentProcessingE2E:
        doc: E2E tests for document upload and OCR processing flow
        methods[2]{name,sig,decorators,async,lines}:
          test_full_document_processing_flow,"(client:AsyncClient)->None",pytest.mark.e2e|pytest.mark.slow,true,34
          test_expense_classification_flow,"(client:AsyncClient;sample_expense_data)->None",pytest.mark.e2e|pytest.mark.asyncio,true,37
      TestReportGenerationE2E:
        doc: E2E tests for report generation flow
        methods[1]{name,sig,decorators,async,lines}:
          test_monthly_report_generation_flow,"(client:AsyncClient)->None",pytest.mark.e2e|pytest.mark.asyncio,true,40
      TestClarificationWorkflowE2E:
        doc: E2E tests for clarification question/answer workflow
        methods[1]{name,sig,decorators,async,lines}:
          test_clarification_qa_flow,"(client:AsyncClient;sample_expense_data)->None",pytest.mark.e2e|pytest.mark.asyncio,true,43
      TestProjectManagementE2E:
        doc: E2E tests for project management flow
        methods[1]{name,sig,decorators,async,lines}:
          test_project_lifecycle_flow,"(client:AsyncClient)->None",pytest.mark.e2e|pytest.mark.asyncio,true,53
      TestFullBusinessScenarioE2E:
        doc: E2E tests for complete business scenarios
        methods[1]{name,sig,decorators,async,lines}:
          test_monthly_br_workflow,"(client:AsyncClient)->None",pytest.mark.e2e|pytest.mark.slow,true,82
  tests/e2e/test_integrations_e2e.py:
    imports[9]: pytest,asyncio,datetime.date,datetime,datetime.timedelta,httpx.AsyncClient,unittest.mock.AsyncMock,unittest.mock.patch,unittest.mock.MagicMock
    exports[5]: TestAccountingIntegrationE2E,TestCloudStorageIntegrationE2E,TestIntegrationSyncWorkflowE2E,TestIntegrationErrorHandlingE2E,TestFullIntegrationBusinessScenarioE2E
    classes[5]{name,bases,decorators,props,methods}:
      TestAccountingIntegrationE2E,-,-,0,2
      TestCloudStorageIntegrationE2E,-,-,0,2
      TestIntegrationSyncWorkflowE2E,-,-,0,3
      TestIntegrationErrorHandlingE2E,-,-,0,4
      TestFullIntegrationBusinessScenarioE2E,-,-,0,1
    class_details:
      TestAccountingIntegrationE2E:
        doc: E2E tests for accounting system integration workflows
        methods[2]{name,sig,decorators,async,lines}:
          test_full_accounting_integration_setup_and_sync,"(client:AsyncClient)->None",pytest.mark.e2e|pytest.mark.asyncio,true,74
          test_multiple_accounting_integrations_workflow,"(client:AsyncClient)->None",pytest.mark.e2e|pytest.mark.asyncio,true,54
      TestCloudStorageIntegrationE2E:
        doc: E2E tests for cloud storage integration workflows
        methods[2]{name,sig,decorators,async,lines}:
          test_full_cloud_storage_integration_setup,"(client:AsyncClient)->None",pytest.mark.e2e|pytest.mark.asyncio,true,64
          test_all_cloud_providers_setup,"(client:AsyncClient)->None",pytest.mark.e2e|pytest.mark.asyncio,true,72
      TestIntegrationSyncWorkflowE2E:
        doc: E2E tests for integration sync workflows
        methods[3]{name,sig,decorators,async,lines}:
          test_invoice_sync_workflow,"(client:AsyncClient)->None",pytest.mark.e2e|pytest.mark.asyncio,true,35
          test_report_upload_workflow,"(client:AsyncClient)->None",pytest.mark.e2e|pytest.mark.asyncio,true,32
          test_bulk_sync_all_integrations,"(client:AsyncClient)->None",pytest.mark.e2e|pytest.mark.asyncio,true,50
      TestIntegrationErrorHandlingE2E:
        doc: E2E tests for integration error handling
        methods[4]{name,sig,decorators,async,lines}:
          test_invalid_provider_error,"(client:AsyncClient)->None",pytest.mark.e2e|pytest.mark.asyncio,true,11
          test_duplicate_integration_id_error,"(client:AsyncClient)->None",pytest.mark.e2e|pytest.mark.asyncio,true,21
          test_wrong_integration_type_for_operation,"(client:AsyncClient)->None",pytest.mark.e2e|pytest.mark.asyncio,true,23
          test_nonexistent_integration_error,"(client:AsyncClient)->None",pytest.mark.e2e|pytest.mark.asyncio,true,5
      TestFullIntegrationBusinessScenarioE2E:
        doc: E2E tests for complete business scenarios with integrations
        methods[1]{name,sig,decorators,async,lines}:
          test_complete_monthly_workflow_with_integrations,"(client:AsyncClient)->None",pytest.mark.e2e|pytest.mark.slow,true,135
  tests/e2e/__init__.py:
  tests/integration/test_api.py:
    imports[2]: pytest,httpx.AsyncClient
    exports[7]: TestHealthEndpoints,TestProjectsAPI,TestExpensesAPI,TestDocumentsAPI,TestReportsAPI,TestClarificationsAPI,TestAuthAPI
    classes[7]{name,bases,decorators,props,methods}:
      TestHealthEndpoints,-,-,0,2
      TestProjectsAPI,-,-,0,4
      TestExpensesAPI,-,-,0,4
      TestDocumentsAPI,-,-,0,2
      TestReportsAPI,-,-,0,3
      TestClarificationsAPI,-,-,0,2
      TestAuthAPI,-,-,0,2
    class_details:
      TestHealthEndpoints:
        doc: Tests for health check endpoints
        methods[2]{name,sig,decorators,async,lines}:
          test_api_health,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,9
          test_root_endpoint,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,8
      TestProjectsAPI:
        doc: Tests for projects API endpoints
        methods[4]{name,sig,decorators,async,lines}:
          test_create_project,"(client:AsyncClient;sample_project_data)->None",pytest.mark.integration|pytest.mark.asyncio,true,10
          test_get_project,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,7
          test_list_projects,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,7
          test_list_projects_filter_by_year,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,8
      TestExpensesAPI:
        doc: Tests for expenses API endpoints
        methods[4]{name,sig,decorators,async,lines}:
          test_get_br_categories,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,19
          test_create_expense,"(client:AsyncClient;sample_expense_data)->None",pytest.mark.integration|pytest.mark.asyncio,true,9
          test_list_expenses,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,7
          test_list_expenses_filter_br_qualified,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,8
      TestDocumentsAPI:
        doc: Tests for documents API endpoints
        methods[2]{name,sig,decorators,async,lines}:
          test_list_documents,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,7
          test_upload_document_invalid_type,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,7
      TestReportsAPI:
        doc: Tests for reports API endpoints
        methods[3]{name,sig,decorators,async,lines}:
          test_list_monthly_reports,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,7
          test_get_annual_br_summary,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,11
          test_get_annual_ip_box_summary,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,12
      TestClarificationsAPI:
        doc: Tests for clarifications API endpoints
        methods[2]{name,sig,decorators,async,lines}:
          test_list_clarifications,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,7
          test_get_pending_count,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,8
      TestAuthAPI:
        doc: Tests for authentication API endpoints
        methods[2]{name,sig,decorators,async,lines}:
          test_register_user,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,11
          test_login_invalid_credentials,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,8
  tests/integration/__init__.py:
  tests/integration/test_sql_fixes.py:
    imports[2]: pytest,httpx.AsyncClient
    exports[6]: TestProjectsSQL,TestDocumentsSQL,TestExpensesSQL,TestReportsSQL,TestClarificationsSQL,TestAuthSQL
    classes[6]{name,bases,decorators,props,methods}:
      TestProjectsSQL,-,-,0,2
      TestDocumentsSQL,-,-,0,2
      TestExpensesSQL,-,-,0,2
      TestReportsSQL,-,-,0,2
      TestClarificationsSQL,-,-,0,2
      TestAuthSQL,-,-,0,1
    class_details:
      TestProjectsSQL:
        doc: Verify SQL fixes in projects router
        methods[2]{name,sig,decorators,async,lines}:
          test_create_project_sql,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,31
          test_list_projects_with_filters_sql,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,9
      TestDocumentsSQL:
        doc: Verify SQL fixes in documents router
        methods[2]{name,sig,decorators,async,lines}:
          test_list_documents_sql,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,5
          test_list_documents_with_filters_sql,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,5
      TestExpensesSQL:
        doc: Verify SQL fixes in expenses router
        methods[2]{name,sig,decorators,async,lines}:
          test_list_expenses_sql,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,5
          test_expenses_categories_sql,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,7
      TestReportsSQL:
        doc: Verify SQL fixes in reports router
        methods[2]{name,sig,decorators,async,lines}:
          test_monthly_reports_sql,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,4
          test_annual_br_summary_sql,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,7
      TestClarificationsSQL:
        doc: Verify SQL fixes in clarifications router
        methods[2]{name,sig,decorators,async,lines}:
          test_list_clarifications_sql,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,5
          test_pending_count_sql,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,6
      TestAuthSQL:
        doc: Verify SQL fixes in auth router
        methods[1]{name,sig,decorators,async,lines}:
          test_register_user_sql,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,11
  tests/integration/test_integrations_api.py:
    imports[2]: pytest,httpx.AsyncClient
    exports[2]: TestIntegrationsAPI,TestIntegrationSyncAPI
    classes[2]{name,bases,decorators,props,methods}:
      TestIntegrationsAPI,-,-,0,12
      TestIntegrationSyncAPI,-,-,0,2
    class_details:
      TestIntegrationsAPI:
        doc: Tests for integrations API endpoints
        methods[12]{name,sig,decorators,async,lines}:
          test_list_providers,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,19
          test_create_integration,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,26
          test_create_cloud_integration,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,21
          test_list_integrations,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,7
          test_list_integrations_by_type,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,24
          test_get_integration,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,17
          test_get_nonexistent_integration,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,5
          test_update_integration,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,19
          test_delete_integration,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,18
          test_duplicate_integration_id,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,16
          test_invalid_provider,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,10
          test_get_sync_logs,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,15
      TestIntegrationSyncAPI:
        doc: Tests for integration sync operations
        methods[2]{name,sig,decorators,async,lines}:
          test_sync_invoices_invalid_type,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,18
          test_upload_report_invalid_type,"(client:AsyncClient)->None",pytest.mark.integration|pytest.mark.asyncio,true,18
  tests/integration/test_git_timesheet.py:
    imports[4]: pytest,httpx.AsyncClient,httpx.ASGITransport,src.api.main.app
    exports[2]: TestGitTimesheetAPI,TestGitTimesheetPathMapping
    classes[2]{name,bases,decorators,props,methods}:
      TestGitTimesheetAPI,-,-,0,7
      TestGitTimesheetPathMapping,-,-,0,1
    class_details:
      TestGitTimesheetAPI:
        doc: Test Git Timesheet API endpoints
        methods[7]{name,sig,decorators,async,lines}:
          test_scan_repos_valid_path,()->None,pytest.mark.asyncio,true,21
          test_scan_repos_invalid_path,()->None,pytest.mark.asyncio,true,14
          test_scan_repos_max_depth_validation,()->None,pytest.mark.asyncio,true,22
          test_scan_repos_missing_folder_path,()->None,pytest.mark.asyncio,true,12
          test_commits_endpoint_empty_repos,()->None,pytest.mark.asyncio,true,15
          test_commits_endpoint_with_filters,()->None,pytest.mark.asyncio,true,18
          test_generate_timesheet_validation,()->None,pytest.mark.asyncio,true,16
      TestGitTimesheetPathMapping:
        doc: Test path mapping between host and container
        methods[1]{name,sig,decorators,async,lines}:
          test_host_path_mapping,()->None,pytest.mark.asyncio,true,18
  src/doc_generator/engine.py:
    imports[20]: re,json,datetime,datetime.date,typing.Any,typing.Dict,typing.List,typing.Optional,typing.Union,pathlib.Path,httpx,sqlalchemy.ext.asyncio.AsyncSession,structlog,jinja2.Environment,jinja2.BaseLoader
    exports[6]: MONTH_NAMES_PL,format_currency,format_date,TemplateRenderer,DocumentEngine,get_doc_engine
    const[1]{n,t,v,keys}:
      MONTH_NAMES_PL,Dict,"{     1: \"Styczeń\", 2: \"Luty\", 3: \"Marzec\", 4: \"Kwiecień\",     5: \"Maj\", 6: \"Czerwiec\", 7: \"Lipiec\", 8: \"Sierpień\",  ...","-"
    classes[2]{name,bases,decorators,props,methods}:
      TemplateRenderer,-,-,0,7
      DocumentEngine,-,-,0,10
    class_details:
      TemplateRenderer:
        doc: Template renderer using Jinja2
        methods[7]{name,sig,decorators,async,lines}:
          __init__,()->None,-,false,8
          render,"(template:str;context:Dict[str;Any])->str",-,false,8
          _render_for_loops,"(template:str;context:Dict[str;Any])->str",-,false,26
          _render_if_blocks,"(template:str;context:Dict[str;Any])->str",-,false,13
          _evaluate_condition,"(condition:str;context:Dict[str;Any])->bool",-,false,32
          _get_value,"(path:str;context:Dict[str;Any])->Any",-,false,21
          _render_variables,"(template:str;context:Dict[str;Any])->str",-,false,39
      DocumentEngine:
        doc: Main document generation engine
        methods[10]{name,sig,decorators,async,lines}:
          __init__,"(llm_base_url:str='http://localhost:11434')->None",-,false,5
          list_templates,"()->List[Dict[str, Any]]",-,true,3
          list_data_sources,"()->List[Dict[str, Any]]",-,true,3
          get_template,"(template_id:str)->Optional[Dict[str, Any]]",-,true,20
          fetch_template_data,"(template_id:str;params:Dict[str;Any];db:AsyncSession)->Dict[str, Any]",-,true,39
          generate_document,"(template_id:str;params:Dict[str;Any];db:AsyncSession;use_llm:bool=False;llm_model:str='llama3.2')->Dict[str, Any]",-,true,34
          get_demo_document,"(template_id:str)->Dict[str, Any]",-,true,15
          _build_context,"(template:DocumentTemplate;params:Dict[str;Any];data:Dict[str;Any])->Dict[str, Any]",-,false,139
          _generate_with_llm,"(template:DocumentTemplate;context:Dict[str;Any];model:str)->str",-,true,42
          _summarize_context,"(context:Dict[str;Any])->str",-,false,49
    functions[3]{name,sig,decorators,async,category,lines}:
      format_currency,"(value:Optional[Union[int;float]];currency:str='PLN')->str",-,false,-,9
      format_date,"(value:Optional[Union[str;datetime;date]])->str",-,false,-,9
      get_doc_engine,"(llm_url:str='http://localhost:11434')->DocumentEngine",-,false,-,3
    function_docs:
      format_currency: formats currency
      format_date: formats date
      get_doc_engine: retrieves doc engine
  src/doc_generator/data_sources.py:
    imports[18]: json,re,httpx,subprocess,abc.ABC,abc.abstractmethod,typing.Any,typing.Dict,typing.List,typing.Optional,typing.Union,datetime,datetime.date,dataclasses.dataclass,dataclasses.field
    exports[7]: DataSourceResult,DataSource,SQLDataSource,RESTDataSource,CurlDataSource,DataSourceRegistry,get_data_registry
    classes[6]{name,bases,decorators,props,methods}:
      DataSourceResult,-,dataclass,0,0
      DataSource,ABC,-,0,2
      SQLDataSource,DataSource,-,0,3
      RESTDataSource,DataSource,-,0,3
      CurlDataSource,DataSource,-,0,3
      DataSourceRegistry,-,-,0,6
    class_details:
      DataSourceResult:
        doc: Result from a data source query
        fields[5]{n,t,default,factory}:
          data,Any,"-","-"
          source_type,str,"-","-"
          query_info,str,"-","-"
          fetched_at,datetime,"-",datetime.now
          error,"Optional[str]",None,"-"
      DataSource:
        doc: Abstract base class for data sources
        methods[2]{name,sig,decorators,async,lines}:
          fetch,"(params:Dict[str;Any])->DataSourceResult",abstractmethod,true,3
          get_schema,"()->Dict[str, Any]",abstractmethod,false,3
      SQLDataSource:
        doc: SQL-based data source for PostgreSQL queries
        methods[3]{name,sig,decorators,async,lines}:
          __init__,"(name:str;query_template:str;description:str;params_schema:Dict[str;str])->None",-,false,6
          fetch,"(params:Dict[str;Any];db:AsyncSession)->DataSourceResult",-,true,26
          get_schema,"()->Dict[str, Any]",-,false,8
      RESTDataSource:
        doc: REST API data source
        methods[3]{name,sig,decorators,async,lines}:
          __init__,"(name:str;url_template:str;method:str;description:str;headers:Optional[Dict[str;str]]=None)->None",-,false,7
          fetch,"(params:Dict[str;Any])->DataSourceResult",-,true,35
          get_schema,"()->Dict[str, Any]",-,false,8
      CurlDataSource:
        doc: Execute curl commands for external data fetching
        methods[3]{name,sig,decorators,async,lines}:
          __init__,"(name:str;curl_template:str;description:str;parse_json:bool=True)->None",-,false,6
          fetch,"(params:Dict[str;Any])->DataSourceResult",-,true,32
          get_schema,"()->Dict[str, Any]",-,false,7
      DataSourceRegistry:
        doc: Registry for all available data sources
        methods[6]{name,sig,decorators,async,lines}:
          __new__,()->None,-,false,6
          _initialize_default_sources,()->None,-,false,220
          register,"(source:DataSource)->None",-,false,4
          get,"(name:str)->Optional[DataSource]",-,false,3
          list_sources,"()->List[Dict[str, Any]]",-,false,3
          fetch_multiple,"(source_configs:List[Dict[str;Any]];db:AsyncSession)->Dict[str, DataSourceResult]",-,true,14
    functions[1]{name,sig,decorators,async,category,lines}:
      get_data_registry,()->DataSourceRegistry,-,false,-,3
    function_docs:
      get_data_registry: retrieves data registry
  src/doc_generator/__init__.py:
    imports[3]: engine.DocumentEngine,data_sources.DataSourceRegistry,templates.TemplateRegistry
  src/doc_generator/router.py:
    imports[18]: typing.Optional,typing.List,typing.Dict,typing.Any,datetime,fastapi.APIRouter,fastapi.Depends,fastapi.HTTPException,fastapi.Query,pydantic.BaseModel,pydantic.Field,sqlalchemy.ext.asyncio.AsyncSession,structlog,src.api.database.get_db,engine.get_doc_engine
    exports[11]: GenerateRequest,DataPreviewRequest,get_engine,list_templates,get_template_detail,list_data_sources,preview_template_data,generate_document,get_demo_document,list_categories
    classes[2]{name,bases,decorators,props,methods}:
      GenerateRequest,BaseModel,-,4,0
      DataPreviewRequest,BaseModel,-,2,0
    class_details:
      GenerateRequest:
        doc: Request to generate a document
        properties[4]: "template_id: str","params: Dict[str, Any]","use_llm: bool","llm_model: str"
      DataPreviewRequest:
        doc: Request to preview data for a template
        properties[2]: "template_id: str","params: Dict[str, Any]"
    functions[9]{name,sig,decorators,async,category,lines}:
      get_engine,()->DocumentEngine,-,false,-,3
      list_templates,"(category:Optional[str]=Query(default=None; description='Filter by category');time_scope:Optional[str]=Query(default=None; description='Filter by time scope');engine:DocumentEngine=Depends(get_engine))->None",router.get,true,-,28
      get_template_detail,"(template_id:str;engine:DocumentEngine=Depends(get_engine))->None",router.get,true,-,18
      list_data_sources,"(engine:DocumentEngine=Depends(get_engine))->None",router.get,true,-,16
      preview_template_data,"(request:DataPreviewRequest;db:AsyncSession=Depends(get_db);engine:DocumentEngine=Depends(get_engine))->None",router.post,true,-,24
      generate_document,"(request:GenerateRequest;db:AsyncSession=Depends(get_db);engine:DocumentEngine=Depends(get_engine))->None",router.post,true,-,30
      get_demo_document,"(template_id:str;engine:DocumentEngine=Depends(get_engine))->None",router.get,true,-,16
      list_categories,()->None,router.get,true,-,12
      get_filter_options,"(project_id:Optional[str]=Query(default=None);db:AsyncSession=Depends(get_db))->None",router.get,true,-,45
    function_docs:
      get_engine: retrieves engine
      list_templates: list templates
      get_template_detail: retrieves template detail
      list_data_sources: list data sources
      preview_template_data: preview template data
      generate_document: creates document
      get_demo_document: retrieves demo document
      list_categories: list categories
      get_filter_options: retrieves filter options
  src/doc_generator/templates.py:
    imports[10]: dataclasses.dataclass,dataclasses.field,typing.Any,typing.Dict,typing.List,typing.Optional,typing.Callable,datetime,enum.Enum,json
    exports[6]: DocumentCategory,TimeScope,TemplateDataRequirement,DocumentTemplate,TemplateRegistry,get_template_registry
    types[2]{name,kind,values,def}:
      DocumentCategory,enum,"PROJECT=\"project\"|FINANCIAL=\"financial\"|TIMESHEET=\"timesheet\"|LEGAL=\"legal\"|TAX=\"tax\"|REPORT=\"report\"","-"
      TimeScope,enum,"NONE=\"none\"|MONTHLY=\"monthly\"|QUARTERLY=\"quarterly\"|YEARLY=\"yearly\"|PROJECT=\"project\"|CUSTOM=\"custom\"","-"
    classes[5]{name,bases,decorators,props,methods}:
      DocumentCategory,str|Enum,-,0,0
      TimeScope,str|Enum,-,0,0
      TemplateDataRequirement,-,dataclass,0,0
      DocumentTemplate,-,dataclass,0,2
      TemplateRegistry,-,-,0,7
    class_details:
      DocumentCategory:
      TimeScope:
      TemplateDataRequirement:
        doc: Defines a data source requirement for a template
        fields[4]{n,t,default,factory}:
          source_name,str,"-","-"
          required_params,"List[str]","-","-"
          optional_params,"List[str]","-",list
          description,str,"\"\"","-"
      DocumentTemplate:
        doc: Document template definition
        fields[11]{n,t,default,factory}:
          id,str,"-","-"
          name,str,"-","-"
          description,str,"-","-"
          category,DocumentCategory,"-","-"
          time_scope,TimeScope,"-","-"
          data_requirements,"List[TemplateDataRequirement]","-","-"
          template_content,str,"-","-"
          demo_content,"Optional[str]",None,"-"
          llm_prompt,"Optional[str]",None,"-"
          output_format,str,"\"markdown\"","-"
          version,str,"\"1.0\"","-"
        methods[2]{name,sig,decorators,async,lines}:
          get_required_params,"()->List[str]",-,false,6
          to_dict,"()->Dict[str, Any]",-,false,11
      TemplateRegistry:
        doc: Registry for document templates
        methods[7]{name,sig,decorators,async,lines}:
          __new__,()->None,-,false,6
          _initialize_templates,()->None,-,false,889
          register,"(template:DocumentTemplate)->None",-,false,3
          get,"(template_id:str)->Optional[DocumentTemplate]",-,false,3
          list_templates,"()->List[Dict[str, Any]]",-,false,3
          get_by_category,"(category:DocumentCategory)->List[DocumentTemplate]",-,false,3
          get_by_time_scope,"(scope:TimeScope)->List[DocumentTemplate]",-,false,3
    functions[1]{name,sig,decorators,async,category,lines}:
      get_template_registry,()->TemplateRegistry,-,false,-,3
    function_docs:
      get_template_registry: retrieves template registry
  src/ocr/extractors.py:
    imports[8]: re,typing.Dict,typing.Any,typing.Optional,typing.List,datetime,datetime.date,structlog
    exports[4]: validate_nip,validate_regon,InvoiceExtractor,get_extractor
    classes[1]{name,bases,decorators,props,methods}:
      InvoiceExtractor,-,-,0,7
    class_details:
      InvoiceExtractor:
        doc: Extract structured data from invoice text
        methods[7]{name,sig,decorators,async,lines}:
          extract,"(text:str;document_type:Optional[str]=None)->Dict[str, Any]",-,true,72
          _extract_nips,"(text:str)->List[Dict[str, Any]]",-,false,21
          _extract_pattern,"(field:str;text:str)->Optional[str]",-,false,7
          _extract_dates,"(text:str)->List[str]",-,false,14
          _parse_date,"(date_str:str)->Optional[date]",-,false,19
          _parse_amount,"(amount_str:str)->Optional[float]",-,false,12
          _extract_vendor_name,"(text:str)->Optional[str]",-,false,13
    functions[3]{name,sig,decorators,async,category,lines}:
      validate_nip,"(nip:str)->bool",-,false,-,21
      validate_regon,"(regon:str)->bool",-,false,-,19
      get_extractor,"(document_type:str='invoice')->None",-,false,-,3
    function_docs:
      validate_nip: validates nip
      validate_regon: validates regon
      get_extractor: retrieves extractor
  src/ocr/engines.py:
    imports[13]: os,abc.ABC,abc.abstractmethod,typing.Optional,typing.List,typing.Dict,typing.Any,dataclasses.dataclass,asyncio,pathlib.Path,numpy,PIL.Image,structlog
    exports[6]: OCRResult,BaseOCREngine,TesseractEngine,PaddleOCREngine,EasyOCREngine,get_ocr_engine
    classes[5]{name,bases,decorators,props,methods}:
      OCRResult,-,dataclass,0,0
      BaseOCREngine,ABC,-,0,4
      TesseractEngine,BaseOCREngine,-,0,2
      PaddleOCREngine,BaseOCREngine,-,0,3
      EasyOCREngine,BaseOCREngine,-,0,3
    class_details:
      OCRResult:
        doc: Result from OCR processing
        fields[4]{n,t,default,factory}:
          text,str,"-","-"
          confidence,float,"-","-"
          boxes,"Optional[List[Dict[str, Any]]]",None,"-"
          raw_data,"Optional[Any]",None,"-"
      BaseOCREngine:
        doc: Base class for OCR engines
        methods[4]{name,sig,decorators,async,lines}:
          __init__,"(language:str='pol';use_gpu:bool=True)->None",-,false,4
          initialize,()->None,abstractmethod,true,3
          process,"(image:Any)->OCRResult",abstractmethod,true,3
          _ensure_initialized,()->None,-,false,4
      TesseractEngine:
        doc: Tesseract OCR Engine
        methods[2]{name,sig,decorators,async,lines}:
          initialize,()->None,-,true,12
          process,"(image:Any)->OCRResult",-,true,50
      PaddleOCREngine:
        doc: PaddleOCR Engine with GPU support
        methods[3]{name,sig,decorators,async,lines}:
          __init__,"(language:str='pol';use_gpu:bool=True)->None",-,false,3
          initialize,()->None,-,true,21
          process,"(image:Any)->OCRResult",-,true,35
      EasyOCREngine:
        doc: EasyOCR Engine
        methods[3]{name,sig,decorators,async,lines}:
          __init__,"(language:str='pol';use_gpu:bool=True)->None",-,false,3
          initialize,()->None,-,true,17
          process,"(image:Any)->OCRResult",-,true,37
    functions[1]{name,sig,decorators,async,category,lines}:
      get_ocr_engine,"(engine_name:str='paddleocr';language:str='pol';use_gpu:bool=True)->BaseOCREngine",-,true,-,23
    function_docs:
      get_ocr_engine: retrieves ocr engine
  src/ocr/__init__.py:
    imports[7]: extractors.InvoiceExtractor,extractors.validate_nip,extractors.validate_regon,extractors.get_extractor,models.ProcessingStatus,models.DocumentType,models.ExtractedInvoiceData
    exports[3]: get_ocr_engine,preprocess_image,preprocess_pdf
    functions[3]{name,sig,decorators,async,category,lines}:
      get_ocr_engine,()->None,-,false,-,3
      preprocess_image,()->None,-,false,-,3
      preprocess_pdf,()->None,-,false,-,3
    function_docs:
      get_ocr_engine: retrieves ocr engine
      preprocess_image: preprocess image
      preprocess_pdf: preprocess pdf
  src/ocr/preprocessing.py:
    imports[10]: os,pathlib.Path,typing.List,typing.Optional,typing.Tuple,asyncio,numpy,PIL.Image,cv2,structlog
    exports[5]: preprocess_image,preprocess_pdf,enhance_contrast,remove_shadows,detect_document_type
    functions[6]{name,sig,decorators,async,category,lines}:
      preprocess_image,"(image_path:Path;dpi:int=300;denoise:bool=True;deskew:bool=True;binarize:bool=False)->np.ndarray",-,true,-,64
      preprocess_pdf,"(pdf_path:Path;dpi:int=300;denoise:bool=True;deskew:bool=True)->List[np.ndarray]",-,true,-,64
      _deskew_image,"(image:Any)->np.ndarray",-,true,-,63
      enhance_contrast,"(image:Any)->np.ndarray",-,false,-,4
      remove_shadows,"(image:Any)->np.ndarray",-,false,-,13
      detect_document_type,"(image:Any)->str",-,false,-,20
    function_docs:
      preprocess_image: preprocess image
      preprocess_pdf: preprocess pdf
      _deskew_image: deskew image
      enhance_contrast: enhance contrast
      remove_shadows: deletes shadows
      detect_document_type: detect document type
  src/ocr/models.py:
    imports[8]: enum.Enum,typing.Optional,typing.List,typing.Dict,typing.Any,datetime,pydantic.BaseModel,pydantic.Field
    exports[4]: ProcessingStatus,DocumentType,OCRResult,ExtractedInvoiceData
    types[2]{name,kind,values,def}:
      ProcessingStatus,enum,"PENDING=\"pending\"|PROCESSING=\"processing\"|COMPLETED=\"completed\"|FAILED=\"failed\"","-"
      DocumentType,enum,"INVOICE=\"invoice\"|RECEIPT=\"receipt\"|CONTRACT=\"contract\"|OTHER=\"other\"","-"
    classes[4]{name,bases,decorators,props,methods}:
      ProcessingStatus,str|Enum,-,0,0
      DocumentType,str|Enum,-,0,0
      OCRResult,BaseModel,-,4,0
      ExtractedInvoiceData,BaseModel,-,18,0
    class_details:
      ProcessingStatus:
        doc: OCR processing status
      DocumentType:
        doc: Document types
      OCRResult:
        doc: OCR processing result
        properties[4]: "text: str","confidence: float","boxes: Optional[List[Dict[str, Any]]]","raw_data: Optional[Any]"
      ExtractedInvoiceData:
        doc: Structured invoice data
        properties[18]: "document_type: DocumentType","invoice_number: Optional[str]","invoice_date: Optional[str]","payment_due_date: Optional[str]","vendor_name: Optional[str]","vendor_nip: Optional[Dict[str, Any]]","buyer_nip: Optional[Dict[str, Any]]","net_amount: Optional[float]","vat_amount: Optional[float]","gross_amount: Optional[float]"
  src/ocr/main.py:
    imports[20]: os,uuid,asyncio,pathlib.Path,typing.Optional,typing.List,typing.Dict,typing.Any,datetime,contextlib.asynccontextmanager,structlog,fastapi.FastAPI,fastapi.UploadFile,fastapi.File,fastapi.HTTPException
    exports[14]: UPLOAD_DIR,PROCESSED_DIR,CACHE_DIR,REDIS_URL,OCRRequest,OCRResponse,TaskStatus,lifespan,health_check,list_engines
    const[4]{n,t,v,keys}:
      UPLOAD_DIR,"-","Path(os.getenv(\"UPLOAD_DIR\", \"/app/uploads\"))","-"
      PROCESSED_DIR,"-","Path(os.getenv(\"PROCESSED_DIR\", \"/app/processed\"))","-"
      CACHE_DIR,"-","Path(os.getenv(\"CACHE_DIR\", \"/app/cache\"))","-"
      REDIS_URL,"-","os.getenv(\"REDIS_URL\", \"redis://localhost:6379/0\")","-"
    classes[3]{name,bases,decorators,props,methods}:
      OCRRequest,BaseModel,-,5,0
      OCRResponse,BaseModel,-,11,0
      TaskStatus,BaseModel,-,4,0
    class_details:
      OCRRequest:
        doc: Request model for OCR processing
        properties[5]: "engine: str","language: str","dpi: int","extract_data: bool","document_type: Optional[str]"
      OCRResponse:
        doc: Response model for OCR results
        properties[11]: "task_id: str","status: str","filename: str","created_at: datetime","completed_at: Optional[datetime]","text: Optional[str]","confidence: Optional[float]","extracted_data: Optional[Dict[str, Any]]","pages: Optional[int]","processing_time_ms: Optional[int]"
      TaskStatus:
        doc: Task status model
        properties[4]: "task_id: str","status: str","progress: int","message: Optional[str]"
    functions[7]{name,sig,decorators,async,category,lines}:
      lifespan,"(app:FastAPI)->None",asynccontextmanager,true,-,27
      health_check,()->None,app.get,true,-,8
      list_engines,()->None,app.get,true,-,11
      upload_and_process,"(background_tasks:BackgroundTasks;file:UploadFile=File(...);engine:str=Query(default='paddleocr');language:str=Query(default='pol');dpi:int=Query(default=300; ge=150; le=600);extract_data:bool=Query(default=True);...+1)->None",app.post,true,-,137
      get_task_status,"(task_id:str)->None",app.get,true,-,13
      get_task_result,"(task_id:str)->None",app.get,true,-,34
      validate_nip_endpoint,"(nip:str)->None",app.post,true,-,8
    function_docs:
      lifespan: lifespan
      health_check: health check
      list_engines: list engines
      upload_and_process: upload and process
      get_task_status: retrieves task status
      get_task_result: retrieves task result
      validate_nip_endpoint: validates nip endpoint
  src/infrastructure/__init__.py:
    imports[6]: celery_app,tasks.process_ocr,tasks.classify_expense,tasks.generate_daily_reports,tasks.cleanup_old_files,tasks.recalculate_all_projects
  src/infrastructure/tasks.py:
    imports[6]: os,datetime,datetime.timedelta,pathlib.Path,celery.shared_task,structlog
    exports[9]: UPLOAD_DIR,PROCESSED_DIR,process_ocr,update_document_ocr_result,classify_expense,generate_daily_reports,generate_monthly_report,cleanup_old_files,recalculate_all_projects
    const[2]{n,t,v,keys}:
      UPLOAD_DIR,"-","Path(os.getenv(\"UPLOAD_DIR\", \"/app/uploads\"))","-"
      PROCESSED_DIR,"-","Path(os.getenv(\"PROCESSED_DIR\", \"/app/processed\"))","-"
    functions[7]{name,sig,decorators,async,category,lines}:
      process_ocr,"(document_id:str;file_path:str;document_type:str='invoice')->None",shared_task,false,-,47
      update_document_ocr_result,"(document_id:str;ocr_result:dict)->None",shared_task,false,-,27
      classify_expense,"(expense_id:str)->None",shared_task,false,-,43
      generate_daily_reports,()->None,shared_task,false,-,21
      generate_monthly_report,"(project_id:str;year:int;month:int)->None",shared_task,false,-,4
      cleanup_old_files,()->None,shared_task,false,-,17
      recalculate_all_projects,()->None,shared_task,false,-,49
    function_docs:
      process_ocr: processes ocr
      update_document_ocr_result: updates document ocr result
      classify_expense: classify expense
      generate_daily_reports: creates daily reports
      generate_monthly_report: creates monthly report
      cleanup_old_files: cleanup old files
      recalculate_all_projects: recalculate all projects
  src/infrastructure/celery_app.py:
    imports[3]: os,celery.Celery,celery.schedules.crontab
    exports[1]: REDIS_URL
    const[1]{n,t,v,keys}:
      REDIS_URL,"-","os.getenv(\"REDIS_URL\", \"redis://localhost:6379/2\")","-"
  src/integrations/__init__.py:
    imports[20]: config.database.ConfigDatabase,config.database.IntegrationProvider,config.database.IntegrationType,config.database.IntegrationConfig,config.database.SyncLog,config.database.OAuthToken,config.database.get_config_db,factory.get_accounting_client,factory.get_cloud_client,factory.get_client_from_config,factory.verify_integration,factory.IntegrationManager,accounting.base.BaseAccountingClient,accounting.base.Invoice,accounting.base.InvoiceItem
  src/integrations/factory.py:
    imports[20]: typing.Dict,typing.Any,typing.Optional,typing.Union,config.database.ConfigDatabase,config.database.IntegrationProvider,config.database.IntegrationType,config.database.get_config_db,accounting.base.BaseAccountingClient,accounting.ifirma.IFirmaClient,accounting.fakturownia.FakturowniaClient,accounting.wfirma_infakt.WFirmaClient,accounting.wfirma_infakt.InFaktClient,cloud.base.BaseCloudStorageClient,cloud.nextcloud.NextcloudClient
    exports[7]: ACCOUNTING_CLIENTS,CLOUD_CLIENTS,get_accounting_client,get_cloud_client,get_client_from_config,verify_integration,IntegrationManager
    const[2]{n,t,v,keys}:
      ACCOUNTING_CLIENTS,Dict,"{     IntegrationProvider.IFIRMA: IFirmaClient,     IntegrationProvider.FAKTUROWNIA: FakturowniaClient,     Integrati...","-"
      CLOUD_CLIENTS,Dict,"{     IntegrationProvider.NEXTCLOUD: NextcloudClient,     IntegrationProvider.GOOGLE_DRIVE: GoogleDriveClient,     In...","-"
    classes[1]{name,bases,decorators,props,methods}:
      IntegrationManager,-,-,0,5
    class_details:
      IntegrationManager:
        doc: High-level integration manager for B+R system.
        methods[5]{name,sig,decorators,async,lines}:
          __init__,"(config_db:ConfigDatabase=None)->None",-,false,3
          sync_invoices_from_accounting,"(integration_id:str;date_from=None;date_to=None;project_id:str=None)->Dict[str, Any]",-,true,42
          upload_report_to_cloud,"(integration_id:str;report_content:bytes;report_name:str;year:int=None;month:int=None)->Dict[str, Any]",-,true,53
          get_active_accounting_integrations,()->list,-,false,6
          get_active_cloud_integrations,()->list,-,false,6
    functions[4]{name,sig,decorators,async,category,lines}:
      get_accounting_client,"(provider:IntegrationProvider;credentials:Dict[str;Any];settings:Dict[str;Any]=None)->Optional[BaseAccountingClient]",-,false,-,23
      get_cloud_client,"(provider:IntegrationProvider;credentials:Dict[str;Any];settings:Dict[str;Any]=None)->Optional[BaseCloudStorageClient]",-,false,-,23
      get_client_from_config,"(integration_id:str;config_db:ConfigDatabase=None)->Optional[Union[BaseAccountingClient, BaseCloudStorageClient]]",-,false,-,38
      verify_integration,"(integration_id:str)->bool",-,true,-,39
    function_docs:
      get_accounting_client: retrieves accounting client
      get_cloud_client: retrieves cloud client
      get_client_from_config: retrieves client from config
      verify_integration: validates integration
  src/api/config.py:
    imports[4]: os,typing.List,typing.Optional,pydantic_settings.BaseSettings
    exports[1]: Settings
    classes[1]{name,bases,decorators,props,methods}:
      Settings,BaseSettings,-,18,0
    class_details:
      Settings:
        doc: Application settings from environment
        properties[18]: "ENVIRONMENT: str","DEBUG: bool","SECRET_KEY: str","DATABASE_URL: str","REDIS_URL: str","OCR_SERVICE_URL: str","LLM_SERVICE_URL: str","COMPANY_NAME: str","COMPANY_NIP: str","COMPANY_REGON: str"
  src/api/__init__.py:
    imports[5]: main.app,config.settings,database.get_db,database.init_database,database.close_database
  src/api/ocr_config.py:
    imports[6]: typing.Dict,typing.List,typing.Any,typing.Optional,enum.Enum,pydantic.BaseModel
    exports[16]: OCREngine,ExtractionStrategy,DocumentType,ENGINE_CAPABILITIES,FIELD_ENGINE_MAPPING,DOCUMENT_ENGINE_PRIORITY,CONFIDENCE_THRESHOLDS,REQUIRED_FIELDS,OCRConfig,LLMConfig
    const[7]{n,t,v,keys}:
      ENGINE_CAPABILITIES,Dict,"{     OCREngine.PADDLEOCR: {         \"name\": \"PaddleOCR\",         \"description\": \"Szybki i dokładny, dobry dla dokume...","-"
      FIELD_ENGINE_MAPPING,Dict,"{     # Financial fields     \"nip\": [OCREngine.PADDLEOCR, OCREngine.DOCTR],     \"invoice_number\": [OCREngine.PADDLEOC...","-"
      DOCUMENT_ENGINE_PRIORITY,Dict,"{     DocumentType.INVOICE: [OCREngine.PADDLEOCR, OCREngine.DOCTR, OCREngine.TESSERACT],     DocumentType.RECEIPT: [O...","-"
      CONFIDENCE_THRESHOLDS,Dict,"{     \"high\": 0.90,     \"medium\": 0.75,     \"low\": 0.50,     \"accept_any\": 0.0 }","-"
      REQUIRED_FIELDS,Dict,"{     DocumentType.INVOICE: [\"invoice_number\", \"total_gross\", \"nip_seller\"],     DocumentType.RECEIPT: [\"total\", \"dat...","-"
      DEFAULT_OCR_CONFIG,"-",OCRConfig(),"-"
      DEFAULT_LLM_CONFIG,"-",LLMConfig(),"-"
    types[3]{name,kind,values,def}:
      OCREngine,enum,"PADDLEOCR=\"paddleocr\"|TESSERACT=\"tesseract\"|EASYOCR=\"easyocr\"|DOCTR=\"doctr\"|SURYA=\"surya\"|TROCR=\"trocr\"","-"
      ExtractionStrategy,enum,"SINGLE=\"single\"|FALLBACK=\"fallback\"|ENSEMBLE=\"ensemble\"|FIELD_SPECIFIC=\"field_specific\"","-"
      DocumentType,enum,"INVOICE=\"invoice\"|RECEIPT=\"receipt\"|CONTRACT=\"contract\"|PROTOCOL=\"protocol\"|REPORT=\"report\"|BANK_STATEMENT=\"bank_statement\"|ID_DOCUMENT=\"id_document\"|MEDICAL=\"medical\"|LEGAL=\"legal\"|TECHNICAL=\"technical\"|OTHER=\"other\"","-"
    classes[5]{name,bases,decorators,props,methods}:
      OCREngine,str|Enum,-,0,0
      ExtractionStrategy,str|Enum,-,0,0
      DocumentType,str|Enum,-,0,0
      OCRConfig,BaseModel,-,9,0
      LLMConfig,BaseModel,-,9,0
    class_details:
      OCREngine:
      ExtractionStrategy:
      DocumentType:
      OCRConfig:
        doc: Configuration for OCR processing
        properties[9]: "primary_engine: OCREngine","fallback_engines: List[OCREngine]","strategy: ExtractionStrategy","min_confidence: float","use_field_specific: bool","max_retries: int","timeout_seconds: int","language: str","use_gpu: bool"
      LLMConfig:
        doc: Configuration for LLM processing
        properties[9]: "provider: str","model: str","api_base: str","api_key: Optional[str]","temperature: float","max_tokens: int","use_for_extraction: bool","use_for_classification: bool","use_for_validation: bool"
    functions[4]{name,sig,decorators,async,category,lines}:
      get_best_engine_for_field,"(field_name:str)->OCREngine",-,false,-,4
      get_engines_for_document_type,"(doc_type:str)->List[OCREngine]",-,false,-,7
      get_required_fields,"(doc_type:str)->List[str]",-,false,-,7
      evaluate_extraction_completeness,"(extracted_data:Dict;doc_type:str)->float",-,false,-,8
    function_docs:
      get_best_engine_for_field: retrieves best engine for field
      get_engines_for_document_type: retrieves engines for document type
      get_required_fields: retrieves required fields
      evaluate_extraction_completeness: processes extraction completeness
  src/api/document_classifier.py:
    imports[5]: re,typing.Dict,typing.Any,typing.Optional,typing.Tuple
    exports[6]: DOCUMENT_PATTERNS,EXTRACTION_PATTERNS,detect_document_type,normalize_currency,extract_document_data,classify_and_extract
    const[2]{n,t,v,keys}:
      DOCUMENT_PATTERNS,Dict,"-",invoice|keywords|faktura|faktura vat|invoice|numer faktury|nr faktury|data wystawienia|data sprzedaży|nabywca
      EXTRACTION_PATTERNS,Dict,"-","invoice|invoice_number|(?:faktura|invoice)\\s*(?:vat)?\\s*(?:nr|numer|no\\.?)?[:\\s]*([A-Z0-9/\\-]+)|nr\\s*faktury[:\\s]*([A-Z0-9/\\-]+)|numer\\s*faktury[:\\s]*([A-Z0-9/\\-]+)|nip_seller|(?:sprzedawca|seller).*?nip[:\\s]*(\\d{10}|\\d{3}[-\\s]?\\d{3}[-\\s]?\\d{2}[-\\s]?\\d{2})|nip[:\\s]*(\\d{10}|\\d{3}[-\\s]?\\d{3}[-\\s]?\\d{2}[-\\s]?\\d{2})|nip_buyer"
    functions[4]{name,sig,decorators,async,category,lines}:
      detect_document_type,"(ocr_text:str)->Tuple[str, float]",-,false,-,39
      normalize_currency,"(raw_currency:Optional[str])->str",-,false,-,14
      extract_document_data,"(ocr_text:str;document_type:str)->Dict[str, Any]",-,false,-,26
      classify_and_extract,"(ocr_text:str;initial_type:str='auto')->Dict[str, Any]",-,false,-,20
    function_docs:
      detect_document_type: detect document type
      normalize_currency: normalize currency
      extract_document_data: parses document data
      classify_and_extract: classify and extract
  src/api/database.py:
    imports[8]: typing.AsyncGenerator,contextlib.asynccontextmanager,sqlalchemy.ext.asyncio.AsyncSession,sqlalchemy.ext.asyncio.create_async_engine,sqlalchemy.ext.asyncio.async_sessionmaker,sqlalchemy.orm.declarative_base,structlog,config.settings
    exports[4]: init_database,close_database,get_db,get_db_context
    functions[4]{name,sig,decorators,async,category,lines}:
      init_database,()->None,-,true,-,9
      close_database,()->None,-,true,-,4
      get_db,"()->AsyncGenerator[AsyncSession, None]",-,true,-,11
      get_db_context,"()->AsyncGenerator[AsyncSession, None]",asynccontextmanager,true,-,11
    function_docs:
      init_database: creates database
      close_database: stops database
      get_db: retrieves db
      get_db_context: retrieves db context
  src/api/main.py:
    imports[20]: os,datetime,contextlib.asynccontextmanager,typing.Optional,structlog,fastapi.FastAPI,fastapi.Request,fastapi.middleware.cors.CORSMiddleware,fastapi.responses.JSONResponse,routers.documents,routers.expenses,routers.projects,routers.reports,routers.auth,routers.clarifications
    exports[5]: lifespan,global_exception_handler,health_check,root,metrics
    functions[5]{name,sig,decorators,async,category,lines}:
      lifespan,"(app:FastAPI)->None",asynccontextmanager,true,-,17
      global_exception_handler,"(request:Request;exc:Exception)->None",app.exception_handler,true,-,9
      health_check,()->None,app.get,true,-,10
      root,()->None,app.get,true,-,11
      metrics,()->None,app.get,true,-,6
    function_docs:
      lifespan: lifespan
      global_exception_handler: global exception handler
      health_check: health check
      root: root
      metrics: metrics
  src/api/validators/expense_pipeline.py:
    imports[11]: typing.List,typing.Optional,typing.Dict,typing.Any,dataclasses.dataclass,dataclasses.field,enum.Enum,datetime.date,re,structlog,invoice_validator.InvoiceValidator
    exports[6]: ValidationSeverity,ValidationCategory,ValidationIssue,ValidationResult,ExpenseValidationPipeline,get_validation_pipeline
    types[2]{name,kind,values,def}:
      ValidationSeverity,enum,"ERROR=\"error\"|WARNING=\"warning\"|INFO=\"info\"","-"
      ValidationCategory,enum,"INVOICE=\"invoice\"|VENDOR=\"vendor\"|AMOUNT=\"amount\"|BR_QUALIFICATION=\"br_qualification\"|DOCUMENTATION=\"documentation\"|COMPLIANCE=\"compliance\"","-"
    classes[5]{name,bases,decorators,props,methods}:
      ValidationSeverity,str|Enum,-,0,0
      ValidationCategory,str|Enum,-,0,0
      ValidationIssue,-,dataclass,0,0
      ValidationResult,-,dataclass,0,3
      ExpenseValidationPipeline,-,-,0,10
    class_details:
      ValidationSeverity:
        doc: Severity levels for validation issues.
      ValidationCategory:
        doc: Categories of validation rules.
      ValidationIssue:
        doc: Single validation issue.
        fields[6]{n,t,default,factory}:
          code,str,"-","-"
          message,str,"-","-"
          severity,ValidationSeverity,"-","-"
          category,ValidationCategory,"-","-"
          field,"Optional[str]",None,"-"
          suggestion,"Optional[str]",None,"-"
      ValidationResult:
        doc: Result of expense validation.
        fields[3]{n,t,default,factory}:
          is_valid,bool,"-","-"
          issues,"List[ValidationIssue]","-",list
          score,float,"0.0","-"
        methods[3]{name,sig,decorators,async,lines}:
          errors,"()->List[ValidationIssue]",property,false,2
          warnings,"()->List[ValidationIssue]",property,false,2
          to_dict,"()->Dict[str, Any]",-,false,18
      ExpenseValidationPipeline:
        doc: Comprehensive expense validation pipeline.
        methods[10]{name,sig,decorators,async,lines}:
          __init__,()->None,-,false,2
          validate,"(expense:Dict[str;Any])->ValidationResult",-,false,31
          _validate_invoice,"(expense:Dict[str;Any])->List[ValidationIssue]",-,false,67
          _validate_vendor,"(expense:Dict[str;Any])->List[ValidationIssue]",-,false,46
          _validate_amounts,"(expense:Dict[str;Any])->List[ValidationIssue]",-,false,43
          _validate_br_qualification,"(expense:Dict[str;Any])->List[ValidationIssue]",-,false,71
          _validate_documentation,"(expense:Dict[str;Any])->List[ValidationIssue]",-,false,17
          _validate_compliance,"(expense:Dict[str;Any])->List[ValidationIssue]",-,false,28
          _validate_nip,"(nip:str)->bool",-,false,9
          _calculate_score,"(issues:List[ValidationIssue])->float",-,false,13
    functions[1]{name,sig,decorators,async,category,lines}:
      get_validation_pipeline,()->ExpenseValidationPipeline,-,false,-,6
    function_docs:
      get_validation_pipeline: retrieves validation pipeline
  src/api/validators/__init__.py:
    imports[9]: invoice_validator.InvoiceValidator,invoice_validator.InvoiceValidationResult,currency_converter.CurrencyConverter,expense_pipeline.ExpenseValidationPipeline,expense_pipeline.ValidationResult,expense_pipeline.ValidationIssue,expense_pipeline.ValidationSeverity,expense_pipeline.ValidationCategory,expense_pipeline.get_validation_pipeline
  src/api/validators/currency_converter.py:
    imports[7]: decimal.Decimal,datetime.date,datetime.timedelta,typing.Optional,typing.Dict,httpx,structlog
    exports[1]: CurrencyConverter
    classes[1]{name,bases,decorators,props,methods}:
      CurrencyConverter,-,-,1,4
    class_details:
      CurrencyConverter:
        doc: Konwerter walut z cache'owaniem kursów NBP.
        properties[1]: "_rate_cache: Dict[str, Decimal]"
        methods[4]{name,sig,decorators,async,lines}:
          convert_to_pln,"(amount:Decimal;currency:str;expense_date:date)->Decimal",-,true,37
          _get_nbp_rate,"(currency:str;target_date:date)->Decimal",-,true,55
          get_supported_currencies,()->list,-,false,3
          clear_cache,()->None,classmethod,false,3
  src/api/validators/invoice_validator.py:
    imports[4]: re,typing.Optional,typing.List,pydantic.BaseModel
    exports[2]: InvoiceValidationResult,InvoiceValidator
    classes[2]{name,bases,decorators,props,methods}:
      InvoiceValidationResult,BaseModel,-,4,0
      InvoiceValidator,-,-,0,2
    class_details:
      InvoiceValidationResult:
        doc: Result of invoice number validation.
        properties[4]: "is_valid: bool","errors: List[str]","normalized_number: Optional[str]","warnings: List[str]"
      InvoiceValidator:
        doc: Walidator numerów faktur zgodny z polskimi standardami.
        methods[2]{name,sig,decorators,async,lines}:
          validate,"(invoice_number:Optional[str])->InvoiceValidationResult",-,false,59
          is_generic,"(invoice_number:Optional[str])->bool",-,false,10
  src/api/services/uncertainty_generator.py:
    imports[9]: typing.Optional,typing.List,structlog,httpx,os,models.project_extended.ProjectInputExtended,models.project_extended.UncertaintySection,models.project_extended.RiskAnalysis,models.project_extended.TechnicalProblem
    exports[2]: UncertaintyGenerator,get_uncertainty_generator
    classes[1]{name,bases,decorators,props,methods}:
      UncertaintyGenerator,-,-,0,5
    class_details:
      UncertaintyGenerator:
        doc: Generator sekcji niepewności technologicznej.
        methods[5]{name,sig,decorators,async,lines}:
          __init__,"(llm_base_url:str=None)->None",-,false,3
          generate,"(project:ProjectInputExtended)->UncertaintySection",-,true,29
          _generate_with_llm,"(project:ProjectInputExtended)->Optional[str]",-,true,28
          _generate_from_template,"(project:ProjectInputExtended)->UncertaintySection",-,false,78
          _find_keywords,"(text:str)->List[str]",-,false,4
    functions[1]{name,sig,decorators,async,category,lines}:
      get_uncertainty_generator,()->UncertaintyGenerator,-,false,-,6
    function_docs:
      get_uncertainty_generator: retrieves uncertainty generator
  src/api/services/doc_generator.py:
    imports[11]: os,json,subprocess,datetime,pathlib.Path,typing.Optional,typing.Dict,typing.Any,typing.List,httpx,structlog
    exports[5]: LLM_REFINEMENT_PROMPT,DocumentVersionControl,BR_EXPENSE_DOC_PROMPT,ExpenseDocumentGenerator,get_doc_generator
    const[2]{n,t,v,keys}:
      LLM_REFINEMENT_PROMPT,str,"\"\"\"Jesteś ekspertem w dokumentacji B+R (ulga badawczo-rozwojowa w Polsce).  Poniższy dokument B+R zawiera błędy/ostrz...","-"
      BR_EXPENSE_DOC_PROMPT,str,"\"\"\"Jesteś ekspertem w przygotowywaniu dokumentacji do polskiej ulgi badawczo-rozwojowej (B+R). Generujesz profesjonal...","-"
    classes[2]{name,bases,decorators,props,methods}:
      DocumentVersionControl,-,-,0,4
      ExpenseDocumentGenerator,-,-,0,14
    class_details:
      DocumentVersionControl:
        doc: Simple file-based version control for documents.
        methods[4]{name,sig,decorators,async,lines}:
          __init__,"(repo_path:Path)->None",-,false,4
          commit_file,"(file_path:Path;message:str)->Optional[str]",-,false,32
          get_file_history,"(file_path:Path;limit:int=20)->List[Dict[str, Any]]",-,false,27
          get_file_at_commit,"(file_path:Path;commit:str)->Optional[str]",-,false,13
      ExpenseDocumentGenerator:
        doc: Generator dokumentacji B+R dla wydatków.
        methods[14]{name,sig,decorators,async,lines}:
          __init__,"(llm_service_url:Optional[str]=None)->None",-,false,5
          generate_expense_documentation,"(expense:Dict[str;Any];project:Dict[str;Any];document:Optional[Dict[str;Any]]=None)->Dict[str, Any]",-,true,39
          _build_expense_prompt,"(expense:Dict[str;Any];project:Dict[str;Any];document:Optional[Dict[str;Any]])->str",-,false,60
          _generate_with_llm,"(prompt:str)->str",-,true,21
          _generate_from_template,"(expense:Dict[str;Any];project:Dict[str;Any];document:Optional[Dict[str;Any]])->str",-,false,138
          _save_documentation,"(expense:Dict[str;Any];project:Dict[str;Any];content:str)->Path",-,false,30
          get_document_history,"(project_id:str;filename:str)->List[Dict[str, Any]]",-,false,4
          get_document_at_version,"(project_id:str;filename:str;commit:str)->Optional[str]",-,false,4
          refine_with_llm,"(content:str;validation_issues:List[Dict[str;Any]];max_iterations:int=3)->Dict[str, Any]",-,true,106
          generate_project_summary,"(project:Dict[str;Any];expenses:list[Dict[str;Any]];timesheet_data:Optional[Dict[str;Any]]=None;contractors:Optional[list[Dict[str;Any]]]=None;revenues:Optional[list[Dict[str;Any]]]=None)->Dict[str, Any]",-,true,65
          _generate_summary_template,"(project:Dict[str;Any];expenses:list;by_category:Dict;total_gross:float;total_br:float;total_deduction:float)->str",-,false,248
          _build_expense_details,"(expenses:list;company_nip:str='5881918662')->str",-,false,80
          _format_doc_link,"(expense:Dict[str;Any])->str",-,false,7
          _build_expense_list,"(expenses:list)->str",-,false,11
    functions[1]{name,sig,decorators,async,category,lines}:
      get_doc_generator,()->ExpenseDocumentGenerator,-,false,-,6
    function_docs:
      get_doc_generator: retrieves doc generator
  src/api/services/justification_generator.py:
    imports[9]: typing.Optional,typing.List,typing.Dict,typing.Any,pydantic.BaseModel,pydantic.Field,structlog,httpx,os
    exports[5]: ExpenseContext,ProjectContext,JustificationResult,ExpenseJustificationGenerator,get_justification_generator
    classes[4]{name,bases,decorators,props,methods}:
      ExpenseContext,BaseModel,-,9,0
      ProjectContext,BaseModel,-,5,0
      JustificationResult,BaseModel,-,5,0
      ExpenseJustificationGenerator,-,-,0,7
    class_details:
      ExpenseContext:
        doc: Context for expense justification generation.
        properties[9]: "invoice_number: str","invoice_date: Optional[str]","amount: float","currency: str","vendor_name: Optional[str]","vendor_nip: Optional[str]","category: Optional[str]","description: Optional[str]","ocr_text: Optional[str]"
      ProjectContext:
        doc: Project context for justification generation.
        properties[5]: "name: str","description: Optional[str]","technical_problem: Optional[str]","objectives: Optional[List[str]]","fiscal_year: int"
      JustificationResult:
        doc: Result of justification generation.
        properties[5]: "justification: str","confidence: float","br_category_suggestion: Optional[str]","keywords_used: List[str]","word_count: int"
      ExpenseJustificationGenerator:
        doc: Generator indywidualnych uzasadnień dla wydatków B+R.
        methods[7]{name,sig,decorators,async,lines}:
          __init__,"(llm_base_url:str=None)->None",-,false,3
          generate_justification,"(expense:ExpenseContext;project:ProjectContext)->JustificationResult",-,true,26
          _generate_with_llm,"(expense:ExpenseContext;project:ProjectContext)->Optional[str]",-,true,38
          _generate_from_template,"(expense:ExpenseContext;project:ProjectContext)->JustificationResult",-,false,48
          _detect_category,"(expense:ExpenseContext)->str",-,false,18
          _extract_keywords,"(text:str)->List[str]",-,false,16
          _extract_key_phrase,"(ocr_text:str)->Optional[str]",-,false,16
    functions[1]{name,sig,decorators,async,category,lines}:
      get_justification_generator,()->ExpenseJustificationGenerator,-,false,-,6
    function_docs:
      get_justification_generator: retrieves justification generator
  src/api/services/excel_exporter.py:
    imports[16]: typing.Optional,typing.Dict,typing.List,typing.Any,datetime.date,datetime,decimal.Decimal,io.BytesIO,structlog,openpyxl,openpyxl.styles.Font,openpyxl.styles.Alignment,openpyxl.styles.Border,openpyxl.styles.Side,openpyxl.styles.PatternFill
    exports[2]: ExcelExporter,get_excel_exporter
    classes[1]{name,bases,decorators,props,methods}:
      ExcelExporter,-,-,0,6
    class_details:
      ExcelExporter:
        doc: Excel file generator for B+R documentation.
        methods[6]{name,sig,decorators,async,lines}:
          __init__,()->None,-,false,3
          export_expenses,"(expenses:List[Dict[str;Any]];title:str='Wydatki B+R';year:Optional[int]=None;month:Optional[int]=None)->bytes",-,false,90
          export_monthly_report,"(expenses:List[Dict[str;Any]];revenues:List[Dict[str;Any]];year:int;month:int;company_name:str;project_name:str)->bytes",-,false,41
          _create_summary_sheet,"(ws;expenses:List[Dict[str;Any]];revenues:List[Dict[str;Any]];year:int;month:int;company_name:str)->None",-,false,73
          _create_expenses_sheet,"(ws;expenses:List[Dict[str;Any]])->None",-,false,20
          _create_revenues_sheet,"(ws;revenues:List[Dict[str;Any]])->None",-,false,32
    functions[1]{name,sig,decorators,async,category,lines}:
      get_excel_exporter,()->ExcelExporter,-,false,-,3
    function_docs:
      get_excel_exporter: retrieves excel exporter
  src/api/services/__init__.py:
    imports[7]: expense_categorizer.ExpenseCategorizer,expense_categorizer.get_expense_categorizer,audit_trail.AuditTrailService,audit_trail.get_audit_service,audit_trail.AuditEventType,expense_service.ExpenseService,expense_service.get_expense_service
  src/api/services/expense_categorizer.py:
    imports[10]: typing.Optional,typing.Dict,typing.List,typing.Tuple,dataclasses.dataclass,enum.Enum,re,httpx,os,structlog
    exports[4]: BRCategory,CategorizationResult,ExpenseCategorizer,get_expense_categorizer
    types[1]{name,kind,values,def}:
      BRCategory,enum,"SALARIES=\"wynagrodzenia\"|MATERIALS=\"materialy\"|EQUIPMENT=\"aparatura\"|EXTERNAL_SERVICES=\"uslugi_obce\"|EXPERT_OPINIONS=\"ekspertyzy\"|IP_COSTS=\"ip_box\"|OTHER=\"inne\"","-"
    classes[3]{name,bases,decorators,props,methods}:
      BRCategory,str|Enum,-,0,0
      CategorizationResult,-,dataclass,0,0
      ExpenseCategorizer,-,-,0,5
    class_details:
      BRCategory:
        doc: B+R expense categories per Polish tax law.
      CategorizationResult:
        doc: Result of expense categorization.
        fields[6]{n,t,default,factory}:
          category,BRCategory,"-","-"
          confidence,float,"-","-"
          keywords_matched,"List[str]","-","-"
          reason,str,"-","-"
          is_br_qualified,bool,"-","-"
          deduction_rate,float,"1.0","-"
      ExpenseCategorizer:
        doc: Automatic expense categorizer for B+R qualification.
        methods[5]{name,sig,decorators,async,lines}:
          __init__,"(llm_url:str=None)->None",-,false,3
          categorize,"(description:str;vendor_name:Optional[str]=None;amount:Optional[float]=None)->CategorizationResult",-,false,66
          categorize_with_llm,"(description:str;vendor_name:Optional[str]=None;ocr_text:Optional[str]=None)->CategorizationResult",-,true,58
          _generate_reason,"(category:BRCategory;keywords:List[str];vendor_name:Optional[str])->str",-,false,26
          _parse_llm_response,"(response:str;fallback:CategorizationResult)->CategorizationResult",-,false,44
    functions[1]{name,sig,decorators,async,category,lines}:
      get_expense_categorizer,()->ExpenseCategorizer,-,false,-,6
    function_docs:
      get_expense_categorizer: retrieves expense categorizer
  src/api/services/audit_trail.py:
    imports[11]: typing.Optional,typing.Dict,typing.Any,typing.List,datetime,enum.Enum,dataclasses.dataclass,dataclasses.asdict,json,uuid,structlog
    exports[7]: AuditEventType,AuditEvent,AuditTrailService,audit_expense_created,audit_expense_classified,audit_br_qualification,get_audit_service
    types[1]{name,kind,values,def}:
      AuditEventType,enum,"EXPENSE_CREATED=\"expense.created\"|EXPENSE_UPDATED=\"expense.updated\"|EXPENSE_DELETED=\"expense.deleted\"|EXPENSE_CLASSIFIED=\"expense.classified\"|EXPENSE_VALIDATED=\"expense.validated\"|BR_QUALIFIED=\"expense.br_qualified\"|BR_DISQUALIFIED=\"expense.br_disqualified\"|JUSTIFICATION_GENERATED=\"expense.justification_generated\"|DOCUMENT_ATTACHED=\"expense.document_attached\"|VENDOR_UPDATED=\"expense.vendor_updated\"","-"
    classes[3]{name,bases,decorators,props,methods}:
      AuditEventType,str|Enum,-,0,0
      AuditEvent,-,dataclass,0,1
      AuditTrailService,-,-,0,5
    class_details:
      AuditEventType:
        doc: Types of audit events.
      AuditEvent:
        doc: Single audit event.
        fields[8]{n,t,default,factory}:
          event_id,str,"-","-"
          event_type,AuditEventType,"-","-"
          aggregate_id,str,"-","-"
          aggregate_type,str,"-","-"
          timestamp,datetime,"-","-"
          actor,str,"-","-"
          data,"Dict[str, Any]","-","-"
          metadata,"Dict[str, Any]","-","-"
        methods[1]{name,sig,decorators,async,lines}:
          to_dict,"()->Dict[str, Any]",-,false,11
      AuditTrailService:
        doc: Service for recording and querying audit events.
        methods[5]{name,sig,decorators,async,lines}:
          __init__,(db_session=None)->None,-,false,3
          record,"(event_type:AuditEventType;aggregate_id:str;data:Dict[str;Any];actor:str='system';metadata:Optional[Dict[str;Any]]=None)->AuditEvent",-,true,48
          _persist_event,"(event:AuditEvent)->None",-,true,23
          get_history,"(aggregate_id:str;event_types:Optional[List[AuditEventType]]=None)->List[AuditEvent]",-,true,55
          get_changes_report,"(aggregate_id:str)->Dict[str, Any]",-,true,23
    functions[4]{name,sig,decorators,async,category,lines}:
      audit_expense_created,"(service:AuditTrailService;expense_id:str;expense_data:Dict[str;Any];actor:str='system')->AuditEvent",-,true,-,13
      audit_expense_classified,"(service:AuditTrailService;expense_id:str;category:str;reason:str;confidence:float;actor:str='system')->AuditEvent",-,true,-,19
      audit_br_qualification,"(service:AuditTrailService;expense_id:str;qualified:bool;category:str;reason:str;deduction_rate:float;...+1)->AuditEvent",-,true,-,22
      get_audit_service,(db_session=None)->AuditTrailService,-,false,-,6
    function_docs:
      audit_expense_created: audit expense created
      audit_expense_classified: audit expense classified
      audit_br_qualification: audit br qualification
      get_audit_service: retrieves audit service
  src/api/services/expense_service.py:
    imports[17]: typing.Optional,typing.Dict,typing.List,typing.Any,typing.Tuple,datetime.date,decimal.Decimal,uuid.UUID,structlog,sqlalchemy.text,sqlalchemy.ext.asyncio.AsyncSession,validators.expense_pipeline.get_validation_pipeline,validators.InvoiceValidator,validators.CurrencyConverter,services.expense_categorizer.get_expense_categorizer
    exports[2]: ExpenseService,get_expense_service
    classes[1]{name,bases,decorators,props,methods}:
      ExpenseService,-,-,0,11
    class_details:
      ExpenseService:
        doc: Service for expense business operations.
        methods[11]{name,sig,decorators,async,lines}:
          __init__,"(db:AsyncSession)->None",-,false,6
          get_expense,"(expense_id:str)->Optional[Dict[str, Any]]",-,true,21
          list_expenses,"(project_id:Optional[str]=None;year:Optional[int]=None;month:Optional[int]=None;br_qualified:Optional[bool]=None;status:Optional[str]=None;limit:int=100)->Tuple[List[Dict[str, Any]], int]",-,true,68
          create_expense,"(data:Dict[str;Any])->Dict[str, Any]",-,true,54
          update_expense,"(expense_id:str;data:Dict[str;Any])->Optional[Dict[str, Any]]",-,true,52
          delete_expense,"(expense_id:str)->bool",-,true,24
          validate_expense,"(expense_id:str)->Dict[str, Any]",-,true,18
          categorize_expense,"(expense_id:str;apply:bool=False)->Dict[str, Any]",-,true,44
          process_all,"(project_id:str;year:Optional[int]=None;month:Optional[int]=None)->Dict[str, Any]",-,true,265
          get_summary,"(project_id:Optional[str]=None;year:Optional[int]=None)->Dict[str, Any]",-,true,50
          _row_to_dict,"(row)->Dict[str, Any]",-,false,30
    functions[1]{name,sig,decorators,async,category,lines}:
      get_expense_service,"(db:AsyncSession)->ExpenseService",-,false,-,3
    function_docs:
      get_expense_service: retrieves expense service
  src/api/models/project_extended.py:
    imports[6]: typing.Optional,typing.List,datetime.date,enum.Enum,pydantic.BaseModel,pydantic.Field
    exports[12]: UncertaintyLevel,MilestoneStatus,TechnicalProblem,ResearchMethodology,Milestone,RiskAnalysis,InnovationScope,ProjectInputExtended,UncertaintySection,DEFAULT_TECHNICAL_PROBLEM
    const[3]{n,t,v,keys}:
      DEFAULT_TECHNICAL_PROBLEM,"-","TechnicalProblem(     description=\"Projekt dotyczy stworzenia innowacyjnego rozwiązania technicznego, \"              ...","-"
      DEFAULT_METHODOLOGY,"-","ResearchMethodology(     approach=\"iteracyjna z elementami eksperymentalnymi\",     phases=[\"analiza wymagań\", \"projek...","-"
      DEFAULT_RISK_ANALYSIS,"-","RiskAnalysis(     identified_risks=[         \"Ryzyko nieosiągnięcia zakładanej wydajności\",         \"Ryzyko problemów...","-"
    types[3]{name,kind,values,def}:
      UncertaintyLevel,enum,"HIGH=\"wysokie\"|MEDIUM=\"średnie\"|LOW=\"niskie\"","-"
      MilestoneStatus,enum,"PLANNED=\"planned\"|IN_PROGRESS=\"in_progress\"|COMPLETED=\"completed\"|DELAYED=\"delayed\"","-"
      InnovationScope,enum,"COMPANY=\"firma\"|NATIONAL=\"rynek krajowy\"|GLOBAL=\"rynek globalny\"","-"
    classes[9]{name,bases,decorators,props,methods}:
      UncertaintyLevel,str|Enum,-,0,0
      MilestoneStatus,str|Enum,-,0,0
      TechnicalProblem,BaseModel,-,5,0
      ResearchMethodology,BaseModel,-,4,0
      Milestone,BaseModel,-,7,0
      RiskAnalysis,BaseModel,-,4,0
      InnovationScope,str|Enum,-,0,0
      ProjectInputExtended,BaseModel,-,14,0
      UncertaintySection,BaseModel,-,4,1
    class_details:
      UncertaintyLevel:
        doc: Level of technological uncertainty in the project.
      MilestoneStatus:
        doc: Status of a project milestone.
      TechnicalProblem:
        doc: Opis problemu technicznego/naukowego.
        properties[5]: "description: str","why_no_standard_solution: str","required_knowledge_domains: List[str]","uncertainty_factors: List[str]","uncertainty_level: UncertaintyLevel"
      ResearchMethodology:
        doc: Metodologia badawcza projektu.
        properties[4]: "approach: str","phases: List[str]","validation_methods: List[str]","success_criteria: List[str]"
      Milestone:
        doc: Kamień milowy projektu B+R.
        properties[7]: "name: str","target_date: date","actual_date: Optional[date]","deliverables: List[str]","status: MilestoneStatus","findings: Optional[str]","hours_spent: float"
      RiskAnalysis:
        doc: Analiza ryzyka niepowodzenia (wymagana dla B+R).
        properties[4]: "identified_risks: List[str]","mitigation_strategies: List[str]","actual_failures: List[str]","lessons_learned: List[str]"
      InnovationScope:
        doc: Scope of innovation.
      ProjectInputExtended:
        doc: Rozszerzony model projektu B+R.
        properties[14]: "name: str","code: str","fiscal_year: int","company_name: str","company_nip: str","technical_problem: Optional[TechnicalProblem]","methodology: Optional[ResearchMethodology]","milestones: List[Milestone]","risk_analysis: Optional[RiskAnalysis]","innovation_scope: InnovationScope"
      UncertaintySection:
        doc: Generated uncertainty section for documentation.
        properties[4]: "content: str","word_count: int","keywords_present: List[str]","confidence_score: float"
        methods[1]{name,sig,decorators,async,lines}:
          is_sufficient,()->bool,property,false,5
  src/api/models/__init__.py:
    imports[20]: project_extended.ProjectInputExtended,project_extended.TechnicalProblem,project_extended.ResearchMethodology,project_extended.Milestone,project_extended.RiskAnalysis,project_extended.UncertaintySection,project_extended.UncertaintyLevel,project_extended.MilestoneStatus,project_extended.InnovationScope,project_extended.DEFAULT_TECHNICAL_PROBLEM,project_extended.DEFAULT_METHODOLOGY,project_extended.DEFAULT_RISK_ANALYSIS,daily_time_entry.DailyTimeEntry,daily_time_entry.DailyTimeEntryCreate,daily_time_entry.DailyTimeEntryResponse
  src/api/models/daily_time_entry.py:
    imports[8]: typing.Optional,typing.List,datetime.date,datetime.time,enum.Enum,pydantic.BaseModel,pydantic.Field,pydantic.field_validator
    exports[8]: BRTaskType,TimeSlot,GitCommitLink,DailyTimeEntry,DailyTimeEntryCreate,DailyTimeEntryResponse,TimeEntryValidationResult,validate_time_entry
    types[2]{name,kind,values,def}:
      BRTaskType,enum,"RESEARCH=\"badania\"|DEVELOPMENT=\"rozwój\"|TESTING=\"testowanie\"|DOCUMENTATION=\"dokumentacja\"|ANALYSIS=\"analiza\"|PROTOTYPING=\"prototypowanie\"|EXPERIMENT=\"eksperyment\"","-"
      TimeSlot,enum,"MORNING=\"morning\"|AFTERNOON=\"afternoon\"|EVENING=\"evening\"|NIGHT=\"night\"","-"
    classes[7]{name,bases,decorators,props,methods}:
      BRTaskType,str|Enum,-,0,0
      TimeSlot,str|Enum,-,0,0
      GitCommitLink,BaseModel,-,4,0
      DailyTimeEntry,BaseModel,-,9,3
      DailyTimeEntryCreate,BaseModel,-,8,0
      DailyTimeEntryResponse,BaseModel,-,12,0
      TimeEntryValidationResult,BaseModel,-,4,0
    class_details:
      BRTaskType:
        doc: Types of B+R tasks for classification.
      TimeSlot:
        doc: Standard time slots for work tracking.
      GitCommitLink:
        doc: Link to a git commit as work evidence.
        properties[4]: "repo_name: str","commit_hash: str","commit_message: str","commit_url: Optional[str]"
      DailyTimeEntry:
        doc: Dzienny wpis czasu pracy B+R.
        properties[9]: "project_id: str","worker_id: str","work_date: date","time_slot: TimeSlot","hours: float","task_type: BRTaskType","git_commits: List[GitCommitLink]","is_validated: bool","validation_notes: Optional[str]"
        methods[3]{name,sig,decorators,async,lines}:
          validate_description,"(v:str)->str",field_validator|classmethod,false,32
          has_evidence,()->bool,property,false,3
          to_db_dict,()->dict,-,false,13
      DailyTimeEntryCreate:
        doc: Request model for creating a time entry.
        properties[8]: "project_id: str","worker_id: str","work_date: date","time_slot: TimeSlot","hours: float","task_type: BRTaskType","description: str","git_commits: List[GitCommitLink]"
      DailyTimeEntryResponse:
        doc: Response model for time entries.
        properties[12]: "id: str","project_id: str","worker_id: str","work_date: date","time_slot: str","hours: float","task_type: str","description: str","git_commits: List[GitCommitLink]","is_validated: bool"
      TimeEntryValidationResult:
        doc: Result of time entry validation.
        properties[4]: "is_valid: bool","errors: List[str]","warnings: List[str]","suggestions: List[str]"
    functions[1]{name,sig,decorators,async,category,lines}:
      validate_time_entry,"(entry:DailyTimeEntry)->TimeEntryValidationResult",-,false,-,48
    function_docs:
      validate_time_entry: validates time entry
  src/api/routers/timesheet.py:
    imports[17]: uuid,datetime.date,datetime,typing.Optional,typing.List,decimal.Decimal,fastapi.APIRouter,fastapi.HTTPException,fastapi.Depends,fastapi.Query,pydantic.BaseModel,pydantic.Field,sqlalchemy.ext.asyncio.AsyncSession,sqlalchemy.text,structlog
    exports[18]: TIME_SLOTS,WorkerCreate,WorkerResponse,TimesheetEntry,TimesheetResponse,ContractorResponse,ensure_tables,list_workers,create_worker,delete_worker
    const[1]{n,t,v,keys}:
      TIME_SLOTS,List,"[     {\"id\": \"morning\", \"label\": \"8:00-12:00\", \"start\": 8, \"end\": 12},     {\"id\": \"afternoon\", \"label\": \"12:00-16:00\"...","-"
    classes[5]{name,bases,decorators,props,methods}:
      WorkerCreate,BaseModel,-,3,0
      WorkerResponse,BaseModel,-,5,0
      TimesheetEntry,BaseModel,-,6,0
      TimesheetResponse,BaseModel,-,7,0
      ContractorResponse,BaseModel,-,4,0
    class_details:
      WorkerCreate:
        properties[3]: "name: str","role: Optional[str]","hourly_rate: Optional[float]"
      WorkerResponse:
        properties[5]: "id: str","name: str","role: Optional[str]","hourly_rate: Optional[float]","created_at: datetime"
      TimesheetEntry:
        properties[6]: "project_id: str","worker_id: str","work_date: date","time_slot: str","hours: float","description: Optional[str]"
      TimesheetResponse:
        properties[7]: "id: str","project_id: str","worker_id: str","work_date: date","time_slot: str","hours: float","description: Optional[str]"
      ContractorResponse:
        properties[4]: "vendor_name: str","vendor_nip: Optional[str]","total_amount: float","invoice_count: int"
    functions[12]{name,sig,decorators,async,category,lines}:
      ensure_tables,"(db:AsyncSession)->None",-,true,-,38
      list_workers,"(db:AsyncSession=Depends(get_db))->None",router.get,true,-,21
      create_worker,"(worker:WorkerCreate;db:AsyncSession=Depends(get_db))->None",router.post,true,-,25
      delete_worker,"(worker_id:str;db:AsyncSession=Depends(get_db))->None",router.delete,true,-,7
      get_timesheet_entries,"(year:int=Query(...);month:int=Query(...);project_id:Optional[str]=None;worker_id:Optional[str]=None;db:AsyncSession=Depends(get_db))->None",router.get,true,-,48
      save_timesheet_entry,"(entry:TimesheetEntry;db:AsyncSession=Depends(get_db))->None",router.post,true,-,24
      save_timesheet_batch,"(entries:List[TimesheetEntry];db:AsyncSession=Depends(get_db))->None",router.post,true,-,27
      delete_timesheet_entry,"(entry_id:str;db:AsyncSession=Depends(get_db))->None",router.delete,true,-,7
      get_timesheet_summary,"(year:int=Query(...);month:int=Query(...);db:AsyncSession=Depends(get_db))->None",router.get,true,-,53
      get_contractors,"(db:AsyncSession=Depends(get_db))->None",router.get,true,-,19
      get_time_slots,()->None,router.get,true,-,3
      create_validated_time_entry,"(entry_data:dict;db:AsyncSession=Depends(get_db))->None",router.post,true,-,99
    function_docs:
      ensure_tables: ensure tables
      list_workers: list workers
      create_worker: creates worker
      delete_worker: deletes worker
      get_timesheet_entries: retrieves timesheet entries
      save_timesheet_entry: caches timesheet entry
      save_timesheet_batch: caches timesheet batch
      delete_timesheet_entry: deletes timesheet entry
      get_timesheet_summary: retrieves timesheet summary
      get_contractors: retrieves contractors
      get_time_slots: retrieves time slots
      create_validated_time_entry: creates validated time entry
  src/api/routers/config.py:
    imports[20]: json,typing.Optional,typing.List,fastapi.APIRouter,fastapi.HTTPException,fastapi.Depends,pydantic.BaseModel,sqlalchemy.ext.asyncio.AsyncSession,sqlalchemy.text,structlog,database.get_db,ocr_config.OCREngine,ocr_config.ExtractionStrategy,ocr_config.DocumentType,ocr_config.ENGINE_CAPABILITIES
    exports[13]: OCREngineInfo,DocumentTypeInfo,list_ocr_engines,list_document_types,get_field_mappings,get_ocr_config,update_ocr_config,get_llm_config,update_llm_config,list_available_models
    classes[2]{name,bases,decorators,props,methods}:
      OCREngineInfo,BaseModel,-,10,0
      DocumentTypeInfo,BaseModel,-,4,0
    class_details:
      OCREngineInfo:
        properties[10]: "id: str","name: str","description: str","languages: List[str]","strengths: List[str]","weaknesses: List[str]","gpu_required: bool","accuracy_score: float","speed_score: float","best_for: List[str]"
      DocumentTypeInfo:
        properties[4]: "id: str","name: str","recommended_engines: List[str]","required_fields: List[str]"
    functions[11]{name,sig,decorators,async,category,lines}:
      list_ocr_engines,()->None,router.get,true,-,17
      list_document_types,()->None,router.get,true,-,28
      get_field_mappings,()->None,router.get,true,-,6
      get_ocr_config,()->None,router.get,true,-,13
      update_ocr_config,"(primary_engine:Optional[str]=None;fallback_engines:Optional[List[str]]=None;strategy:Optional[str]=None;min_confidence:Optional[float]=None;use_field_specific:Optional[bool]=None;max_retries:Optional[int]=None;...+1)->None",router.put,true,-,32
      get_llm_config,()->None,router.get,true,-,12
      update_llm_config,"(provider:Optional[str]=None;model:Optional[str]=None;api_base:Optional[str]=None;api_key:Optional[str]=None;temperature:Optional[float]=None;max_tokens:Optional[int]=None;...+1)->None",router.put,true,-,35
      list_available_models,()->None,router.get,true,-,14
      list_strategies,()->None,router.get,true,-,25
      test_ocr_engine,"(engine:str;text_sample:str='Faktura VAT nr 123/2025')->None",router.post,true,-,12
      test_llm_connection,()->None,router.post,true,-,22
    function_docs:
      list_ocr_engines: list ocr engines
      list_document_types: list document types
      get_field_mappings: retrieves field mappings
      get_ocr_config: retrieves ocr config
      update_ocr_config: updates ocr config
      get_llm_config: retrieves llm config
      update_llm_config: updates llm config
      list_available_models: list available models
      list_strategies: list strategies
      test_ocr_engine: checks ocr engine
      test_llm_connection: checks llm connection
  src/api/routers/clarifications.py:
    imports[13]: uuid,datetime,typing.Optional,typing.List,fastapi.APIRouter,fastapi.HTTPException,fastapi.Depends,fastapi.Query,pydantic.BaseModel,sqlalchemy.ext.asyncio.AsyncSession,sqlalchemy.text,structlog,database.get_db
    exports[9]: ClarificationResponse,ClarificationAnswer,ClarificationCreate,list_clarifications,get_pending_count,get_clarification,create_clarification,answer_clarification,delete_clarification
    classes[3]{name,bases,decorators,props,methods}:
      ClarificationResponse,BaseModel,-,9,0
      ClarificationAnswer,BaseModel,-,1,0
      ClarificationCreate,BaseModel,-,3,0
    class_details:
      ClarificationResponse:
        properties[9]: "id: str","expense_id: str","question: str","question_type: Optional[str]","answer: Optional[str]","answered_at: Optional[datetime]","auto_generated: bool","llm_suggested_answer: Optional[str]","created_at: datetime"
      ClarificationAnswer:
        properties[1]: "answer: str"
      ClarificationCreate:
        properties[3]: "expense_id: str","question: str","question_type: Optional[str]"
    functions[6]{name,sig,decorators,async,category,lines}:
      list_clarifications,"(expense_id:Optional[str]=Query(default=None);unanswered_only:bool=Query(default=False);limit:int=Query(default=50; le=100);db:AsyncSession=Depends(get_db))->None",router.get,true,-,40
      get_pending_count,"(db:AsyncSession=Depends(get_db))->None",router.get,true,-,7
      get_clarification,"(clarification_id:str;db:AsyncSession=Depends(get_db))->None",router.get,true,-,26
      create_clarification,"(clarification:ClarificationCreate;db:AsyncSession=Depends(get_db))->None",router.post,true,-,29
      answer_clarification,"(clarification_id:str;answer:ClarificationAnswer;db:AsyncSession=Depends(get_db))->None",router.put,true,-,50
      delete_clarification,"(clarification_id:str;db:AsyncSession=Depends(get_db))->None",router.delete,true,-,7
    function_docs:
      list_clarifications: list clarifications
      get_pending_count: retrieves pending count
      get_clarification: retrieves clarification
      create_clarification: creates clarification
      answer_clarification: answer clarification
      delete_clarification: deletes clarification
  src/api/routers/projects.py:
    imports[17]: uuid,datetime,datetime.date,typing.Optional,typing.List,decimal.Decimal,fastapi.APIRouter,fastapi.HTTPException,fastapi.Depends,fastapi.Query,pydantic.BaseModel,pydantic.Field,sqlalchemy.ext.asyncio.AsyncSession,sqlalchemy.text,structlog
    exports[14]: ProjectCreate,ProjectUpdate,ProjectResponse,ProjectSummary,create_project,get_project,list_projects,update_project,get_project_summary,recalculate_project_totals
    classes[5]{name,bases,decorators,props,methods}:
      ProjectCreate,BaseModel,-,5,0
      ProjectUpdate,BaseModel,-,5,0
      ProjectResponse,BaseModel,-,12,0
      ProjectSummary,BaseModel,-,11,0
      BulkAssignRequest,BaseModel,-,2,0
    class_details:
      ProjectCreate:
        doc: Create project request
        properties[5]: "name: str","description: Optional[str]","fiscal_year: int","start_date: Optional[date]","end_date: Optional[date]"
      ProjectUpdate:
        doc: Update project request
        properties[5]: "name: Optional[str]","description: Optional[str]","status: Optional[str]","start_date: Optional[date]","end_date: Optional[date]"
      ProjectResponse:
        doc: Project response
        properties[12]: "id: str","name: str","description: Optional[str]","status: str","start_date: Optional[date]","end_date: Optional[date]","fiscal_year: int","total_expenses: float","br_qualified_expenses: float","ip_qualified_expenses: float"
      ProjectSummary:
        doc: Project summary with B+R statistics
        properties[11]: "id: str","name: str","fiscal_year: int","total_expenses: float","br_qualified_expenses: float","br_deduction_amount: float","ip_qualified_expenses: float","documents_count: int","pending_documents: int","needs_clarification: int"
      BulkAssignRequest:
        doc: Bulk assign expenses to project
        properties[2]: "expense_ids: List[str]","project_id: str"
    functions[9]{name,sig,decorators,async,category,lines}:
      create_project,"(project:ProjectCreate;db:AsyncSession=Depends(get_db))->None",router.post,true,-,25
      get_project,"(project_id:str;db:AsyncSession=Depends(get_db))->None",router.get,true,-,30
      list_projects,"(fiscal_year:Optional[int]=Query(default=None);status:Optional[str]=Query(default=None);db:AsyncSession=Depends(get_db))->None",router.get,true,-,44
      update_project,"(project_id:str;project:ProjectUpdate;db:AsyncSession=Depends(get_db))->None",router.put,true,-,37
      get_project_summary,"(project_id:str;db:AsyncSession=Depends(get_db))->None",router.get,true,-,67
      recalculate_project_totals,"(project_id:str;db:AsyncSession=Depends(get_db))->None",router.post,true,-,37
      delete_project,"(project_id:str;db:AsyncSession=Depends(get_db))->None",router.delete,true,-,30
      bulk_assign_expenses,"(request:BulkAssignRequest;db:AsyncSession=Depends(get_db))->None",router.post,true,-,24
      generate_uncertainty_section,"(project_id:str;db:AsyncSession=Depends(get_db))->None",router.post,true,-,55
    function_docs:
      create_project: creates project
      get_project: retrieves project
      list_projects: list projects
      update_project: updates project
      get_project_summary: retrieves project summary
      recalculate_project_totals: recalculate project totals
      delete_project: deletes project
      bulk_assign_expenses: bulk assign expenses
      generate_uncertainty_section: creates uncertainty section
  src/api/routers/auth.py:
    imports[19]: datetime,datetime.timedelta,typing.Optional,fastapi.APIRouter,fastapi.HTTPException,fastapi.Depends,fastapi.status,fastapi.security.OAuth2PasswordBearer,fastapi.security.OAuth2PasswordRequestForm,pydantic.BaseModel,pydantic.EmailStr,passlib.context.CryptContext,jose.JWTError,jose.jwt,sqlalchemy.ext.asyncio.AsyncSession
    exports[11]: Token,TokenData,UserCreate,UserResponse,verify_password,get_password_hash,create_access_token,get_current_user,login_for_access_token,register_user
    classes[4]{name,bases,decorators,props,methods}:
      Token,BaseModel,-,2,0
      TokenData,BaseModel,-,1,0
      UserCreate,BaseModel,-,3,0
      UserResponse,BaseModel,-,6,0
    class_details:
      Token:
        properties[2]: "access_token: str","token_type: str"
      TokenData:
        properties[1]: "email: Optional[str]"
      UserCreate:
        properties[3]: "email: EmailStr","password: str","full_name: Optional[str]"
      UserResponse:
        properties[6]: "id: str","email: str","full_name: Optional[str]","role: str","is_active: bool","created_at: datetime"
    functions[7]{name,sig,decorators,async,category,lines}:
      verify_password,"(plain_password:str;hashed_password:str)->bool",-,false,-,2
      get_password_hash,"(password:str)->str",-,false,-,2
      create_access_token,"(data:dict;expires_delta:Optional[timedelta]=None)->str",-,false,-,5
      get_current_user,"(token:str=Depends(oauth2_scheme);db:AsyncSession=Depends(get_db))->dict",-,true,-,36
      login_for_access_token,"(form_data:OAuth2PasswordRequestForm=Depends();db:AsyncSession=Depends(get_db))->None",router.post,true,-,26
      register_user,"(user:UserCreate;db:AsyncSession=Depends(get_db))->None",router.post,true,-,41
      get_current_user_info,"(current_user:dict=Depends(get_current_user);db:AsyncSession=Depends(get_db))->None",router.get,true,-,19
    function_docs:
      verify_password: validates password
      get_password_hash: retrieves password hash
      create_access_token: creates access token
      get_current_user: retrieves current user
      login_for_access_token: login for access token
      register_user: registers user
      get_current_user_info: retrieves current user info
  src/api/routers/__init__.py:
    imports[7]: documents,expenses,projects,reports,auth,clarifications,integrations
  src/api/routers/integrations.py:
    imports[20]: typing.Optional,typing.List,typing.Dict,typing.Any,datetime.date,datetime,fastapi.APIRouter,fastapi.HTTPException,fastapi.Depends,fastapi.Query,fastapi.BackgroundTasks,pydantic.BaseModel,pydantic.Field,structlog,src.integrations.config.database.get_config_db
    exports[23]: IntegrationCreate,IntegrationUpdate,IntegrationResponse,SyncRequest,UploadReportRequest,SyncLogResponse,get_db,get_manager,list_providers,create_integration
    classes[6]{name,bases,decorators,props,methods}:
      IntegrationCreate,BaseModel,-,6,0
      IntegrationUpdate,BaseModel,-,4,0
      IntegrationResponse,BaseModel,-,8,0
      SyncRequest,BaseModel,-,3,0
      UploadReportRequest,BaseModel,-,3,0
      SyncLogResponse,BaseModel,-,9,0
    class_details:
      IntegrationCreate:
        doc: Create integration request
        properties[6]: "id: str","provider: str","integration_type: str","credentials: Dict[str, Any]","settings: Optional[Dict[str, Any]]","base_url: Optional[str]"
      IntegrationUpdate:
        doc: Update integration request
        properties[4]: "credentials: Optional[Dict[str, Any]]","settings: Optional[Dict[str, Any]]","base_url: Optional[str]","is_active: Optional[bool]"
      IntegrationResponse:
        doc: Integration response
        properties[8]: "id: str","provider: str","integration_type: str","is_active: bool","is_verified: bool","last_sync_at: Optional[datetime]","settings: Dict[str, Any]","base_url: Optional[str]"
      SyncRequest:
        doc: Invoice sync request
        properties[3]: "date_from: Optional[date]","date_to: Optional[date]","project_id: Optional[str]"
      UploadReportRequest:
        doc: Report upload request
        properties[3]: "report_name: str","year: Optional[int]","month: Optional[int]"
      SyncLogResponse:
        doc: Sync log response
        properties[9]: "id: int","integration_id: str","sync_type: str","status: str","items_processed: int","items_failed: int","error_message: Optional[str]","started_at: datetime","completed_at: Optional[datetime]"
    functions[17]{name,sig,decorators,async,category,lines}:
      get_db,()->ConfigDatabase,-,false,-,2
      get_manager,"(db:ConfigDatabase=Depends(get_db))->IntegrationManager",-,false,-,2
      list_providers,()->None,router.get,true,-,16
      create_integration,"(integration:IntegrationCreate;db:ConfigDatabase=Depends(get_db))->None",router.post,true,-,39
      list_integrations,"(integration_type:Optional[str]=Query(default=None);active_only:bool=Query(default=True);db:ConfigDatabase=Depends(get_db))->None",router.get,true,-,25
      get_integration,"(integration_id:str;db:ConfigDatabase=Depends(get_db))->None",router.get,true,-,20
      update_integration,"(integration_id:str;update:IntegrationUpdate;db:ConfigDatabase=Depends(get_db))->None",router.put,true,-,22
      delete_integration,"(integration_id:str;db:ConfigDatabase=Depends(get_db))->None",router.delete,true,-,9
      verify_integration_connection,"(integration_id:str;background_tasks:BackgroundTasks;db:ConfigDatabase=Depends(get_db))->None",router.post,true,-,19
      sync_invoices,"(integration_id:str;sync_request:SyncRequest;background_tasks:BackgroundTasks;manager:IntegrationManager=Depends(get_manager))->None",router.post,true,-,25
      upload_report_to_cloud,"(integration_id:str;upload_request:UploadReportRequest;manager:IntegrationManager=Depends(get_manager))->None",router.post,true,-,33
      get_sync_logs,"(integration_id:str;limit:int=Query(default=50; le=100);db:ConfigDatabase=Depends(get_db))->None",router.get,true,-,22
      sync_all_invoices,"(sync_request:SyncRequest;background_tasks:BackgroundTasks;manager:IntegrationManager=Depends(get_manager))->None",router.post,true,-,22
      upload_monthly_reports,"(year:int=Query(...);month:int=Query(...; ge=1; le=12);manager:IntegrationManager=Depends(get_manager))->None",router.post,true,-,30
      import_ksef_invoices,"(nip:str=Query(...; description='NIP podatnika');date_from:date=Query(...);date_to:date=Query(...);invoice_type:str=Query(default='purchase'; description='purchase or sales'))->None",router.post,true,-,32
      generate_jpk_v7m,"(nip:str=Query(...; description='NIP podatnika');full_name:str=Query(...; description='Pełna nazwa podatnika');email:str=Query(...; description='Email kontaktowy');year:int=Query(...);month:int=Query(...; ge=1; le=12);purpose:int=Query(default=0; description='0=oryginał; 1=korekta');...+1)->None",router.post,true,-,83
      download_jpk_v7m,"(nip:str=Query(...);full_name:str=Query(...);email:str=Query(...);year:int=Query(...);month:int=Query(...; ge=1; le=12))->None",router.get,true,-,32
    function_docs:
      get_db: retrieves db
      get_manager: retrieves manager
      list_providers: list providers
      create_integration: creates integration
      list_integrations: list integrations
      get_integration: retrieves integration
      update_integration: updates integration
      delete_integration: deletes integration
      verify_integration_connection: validates integration connection
      sync_invoices: sync invoices
      upload_report_to_cloud: upload report to cloud
      get_sync_logs: retrieves sync logs
      sync_all_invoices: sync all invoices
      upload_monthly_reports: upload monthly reports
      import_ksef_invoices: import ksef invoices
      generate_jpk_v7m: creates jpk v7m
      download_jpk_v7m: download jpk v7m
  src/api/routers/logs.py:
    imports[9]: asyncio,subprocess,time,typing.Optional,fastapi.APIRouter,fastapi.Query,fastapi.responses.StreamingResponse,structlog,httpx
    exports[5]: stream_docker_logs,stream_all_logs,stream_logs,get_logs_snapshot,list_services
    functions[9]{name,sig,decorators,async,category,lines}:
      _escape_sse,"(text:str)->str",-,false,-,2
      _try_get_docker_client,()->None,-,false,-,6
      _docker_httpx_client,()->httpx.AsyncClient,-,false,-,3
      _looks_multiplexed,"(buf:bytes)->bool",-,false,-,2
      stream_docker_logs,"(container:str;lines:int=100)->None",-,true,-,114
      stream_all_logs,"(services:list;lines:int=50)->None",-,true,-,30
      stream_logs,"(service:Optional[str]=Query(default=None; description='Service name (api; ocr; llm; web; postgres; redis)');lines:int=Query(default=100; ge=10; le=1000; description='Number of initial lines'))->None",router.get,true,-,47
      get_logs_snapshot,"(service:str=Query(...; description='Service name');lines:int=Query(default=100; ge=10; le=1000))->None",router.get,true,-,74
      list_services,()->None,router.get,true,-,14
    function_docs:
      _escape_sse: escape sse
      _try_get_docker_client: try get docker client
      _docker_httpx_client: docker httpx client
      _looks_multiplexed: looks multiplexed
      stream_docker_logs: stream docker logs
      stream_all_logs: stream all logs
      stream_logs: stream logs
      get_logs_snapshot: retrieves logs snapshot
      list_services: list services
  src/api/routers/git_timesheet.py:
    imports[20]: os,subprocess,re,datetime,datetime.date,typing.Optional,typing.List,typing.Dict,typing.Any,pathlib.Path,fastapi.APIRouter,fastapi.HTTPException,fastapi.Depends,fastapi.Query,pydantic.BaseModel
    exports[19]: GitRepoInfo,GitAuthor,GitCommit,ScanRequest,CommitHistoryRequest,GitTimesheetEntry,GenerateTimesheetRequest,run_git_command,is_git_repo,find_git_repos
    const[1]{n,t,v,keys}:
      HOST_TO_CONTAINER_PATH_MAP,Dict,"{     \"/home/tom/github\": \"/repos\", }","-"
    classes[7]{name,bases,decorators,props,methods}:
      GitRepoInfo,BaseModel,-,5,0
      GitAuthor,BaseModel,-,3,0
      GitCommit,BaseModel,-,6,0
      ScanRequest,BaseModel,-,2,2
      CommitHistoryRequest,BaseModel,-,4,0
      GitTimesheetEntry,BaseModel,-,7,0
      GenerateTimesheetRequest,BaseModel,-,3,0
    class_details:
      GitRepoInfo:
        properties[5]: "path: str","name: str","authors: List[str]","commit_count: int","last_commit: Optional[str]"
      GitAuthor:
        properties[3]: "name: str","email: str","commit_count: int"
      GitCommit:
        properties[6]: "hash: str","author_name: str","author_email: str","date: datetime","message: str","files_changed: int"
      ScanRequest:
        properties[2]: "folder_path: str","max_depth: int"
        methods[2]{name,sig,decorators,async,lines}:
          get_folder_path,()->str,-,false,2
          get_max_depth,()->int,-,false,2
      CommitHistoryRequest:
        properties[4]: "repo_paths: List[str]","authors: List[str]","since: Optional[str]","until: Optional[str]"
      GitTimesheetEntry:
        properties[7]: "repo_path: str","repo_name: str","commit_hash: str","author: str","commit_date: datetime","message: str","project_id: Optional[str]"
      GenerateTimesheetRequest:
        properties[3]: "commits: List[Dict[str, Any]]","worker_id: Optional[str]","project_mappings: Dict[str, str]"
    functions[11]{name,sig,decorators,async,category,lines}:
      run_git_command,"(repo_path:str;args:List[str])->str",-,false,-,16
      is_git_repo,"(path:str)->bool",-,false,-,4
      find_git_repos,"(base_path:str;max_depth:int;current_depth:int=0)->List[str]",-,false,-,22
      get_repo_authors,"(repo_path:str)->List[GitAuthor]",-,false,-,20
      get_repo_commits,"(repo_path:str;authors:List[str]=None;since:str=None;until:str=None)->List[GitCommit]",-,false,-,42
      translate_path_to_container,"(host_path:str)->str",-,false,-,6
      translate_path_to_host,"(container_path:str)->str",-,false,-,6
      scan_for_repositories,"(request:ScanRequest)->None",router.post,true,-,71
      get_commit_history,"(request:CommitHistoryRequest)->None",router.post,true,-,49
      generate_timesheet_from_commits,"(request:GenerateTimesheetRequest;db:AsyncSession=Depends(get_db))->None",router.post,true,-,97
      get_detailed_commits,"(repo_path:str=Query(...);author:Optional[str]=None;since:Optional[str]=None;until:Optional[str]=None)->None",router.get,true,-,74
    function_docs:
      run_git_command: starts git command
      is_git_repo: is git repo
      find_git_repos: retrieves git repos
      get_repo_authors: retrieves repo authors
      get_repo_commits: retrieves repo commits
      translate_path_to_container: converts path to container
      translate_path_to_host: converts path to host
      scan_for_repositories: scan for repositories
      get_commit_history: retrieves commit history
      generate_timesheet_from_commits: creates timesheet from commits
      get_detailed_commits: retrieves detailed commits
  src/api/routers/reports.py:
    imports[18]: uuid,datetime,typing.Optional,typing.List,json,fastapi.APIRouter,fastapi.HTTPException,fastapi.Depends,fastapi.Query,fastapi.BackgroundTasks,pydantic.BaseModel,pydantic.Field,sqlalchemy.ext.asyncio.AsyncSession,sqlalchemy.text,structlog
    exports[12]: MonthlyReportResponse,ReportGenerateRequest,AnnualBRSummary,IPBoxSummary,generate_monthly_report,calculate_monthly_report,get_monthly_report,list_monthly_reports,get_annual_br_summary,get_annual_ip_box_summary
    classes[4]{name,bases,decorators,props,methods}:
      MonthlyReportResponse,BaseModel,-,17,0
      ReportGenerateRequest,BaseModel,-,5,0
      AnnualBRSummary,BaseModel,-,14,0
      IPBoxSummary,BaseModel,-,11,0
    class_details:
      MonthlyReportResponse:
        properties[17]: "id: str","project_id: str","fiscal_year: int","month: int","total_expenses: float","br_expenses: float","br_deduction: float","ip_expenses: float","total_revenues: float","ip_revenues: float"
      ReportGenerateRequest:
        properties[5]: "project_id: str","fiscal_year: int","month: int","regenerate: bool","preprocess: bool"
      AnnualBRSummary:
        properties[14]: "fiscal_year: int","company_name: str","company_nip: str","project_name: str","personnel_employment: float","personnel_civil: float","materials: float","equipment: float","depreciation: float","expertise: float"
      IPBoxSummary:
        properties[11]: "fiscal_year: int","company_name: str","company_nip: str","ip_revenues: float","nexus_a: float","nexus_b: float","nexus_c: float","nexus_d: float","nexus_ratio: float","qualified_income: float"
    functions[8]{name,sig,decorators,async,category,lines}:
      generate_monthly_report,"(request:ReportGenerateRequest;db:AsyncSession=Depends(get_db))->None",router.post,true,-,55
      calculate_monthly_report,"(db:AsyncSession;project_id:str;year:int;month:int)->dict",-,true,-,43
      get_monthly_report,"(report_id:str;db:AsyncSession=Depends(get_db))->None",router.get,true,-,22
      list_monthly_reports,"(project_id:Optional[str]=Query(default=None);fiscal_year:Optional[int]=Query(default=None);db:AsyncSession=Depends(get_db))->None",router.get,true,-,29
      get_annual_br_summary,"(fiscal_year:int=Query(...);project_id:str=Query(default='00000000-0000-0000-0000-000000000001');db:AsyncSession=Depends(get_db))->None",router.get,true,-,55
      get_annual_ip_box_summary,"(fiscal_year:int=Query(...);project_id:str=Query(default='00000000-0000-0000-0000-000000000001');db:AsyncSession=Depends(get_db))->None",router.get,true,-,36
      export_expenses_excel,"(year:int=Query(...);month:Optional[int]=Query(default=None);project_id:str=Query(default='00000000-0000-0000-0000-000000000001');db:AsyncSession=Depends(get_db))->None",router.get,true,-,81
      export_monthly_report_excel,"(year:int=Query(...);month:int=Query(...; ge=1; le=12);project_id:str=Query(default='00000000-0000-0000-0000-000000000001');db:AsyncSession=Depends(get_db))->None",router.get,true,-,95
    function_docs:
      generate_monthly_report: creates monthly report
      calculate_monthly_report: processes monthly report
      get_monthly_report: retrieves monthly report
      list_monthly_reports: list monthly reports
      get_annual_br_summary: retrieves annual br summary
      get_annual_ip_box_summary: retrieves annual ip box summary
      export_expenses_excel: export expenses excel
      export_monthly_report_excel: export monthly report excel
  src/api/routers/documents.py:
    imports[20]: json,uuid,datetime,typing.Optional,typing.List,pathlib.Path,httpx,aiofiles,fastapi.APIRouter,fastapi.UploadFile,fastapi.File,fastapi.HTTPException,fastapi.Depends,fastapi.Query,fastapi.BackgroundTasks
    exports[23]: UPLOAD_DIR,DocumentResponse,DocumentUploadResponse,DocumentNoteUpsert,ensure_document_notes_table,upload_document,detect_invoice_type,create_expense_from_document,process_document_ocr,list_document_notes
    const[1]{n,t,v,keys}:
      UPLOAD_DIR,"-","Path(\"/app/uploads\")","-"
    classes[4]{name,bases,decorators,props,methods}:
      DocumentResponse,BaseModel,-,9,0
      DocumentUploadResponse,BaseModel,-,4,0
      DocumentNoteUpsert,BaseModel,-,1,0
      DocumentDetailResponse,BaseModel,-,10,0
    class_details:
      DocumentResponse:
        doc: Document response model
        properties[9]: "id: str","filename: str","document_type: str","ocr_status: str","ocr_confidence: Optional[float]","extracted_data: Optional[dict]","mime_type: Optional[str]","file_url: Optional[str]","created_at: datetime"
      DocumentUploadResponse:
        doc: Upload response
        properties[4]: "document_id: str","filename: str","status: str","message: str"
      DocumentNoteUpsert:
        properties[1]: "notes: Optional[str]"
      DocumentDetailResponse:
        doc: Extended document response with OCR text
        properties[10]: "id: str","filename: str","document_type: str","ocr_status: str","ocr_confidence: Optional[float]","ocr_text: Optional[str]","extracted_data: Optional[dict]","validation_errors: Optional[list]","created_at: datetime","updated_at: Optional[datetime]"
    functions[18]{name,sig,decorators,async,category,lines}:
      ensure_document_notes_table,"(db:AsyncSession)->None",-,true,-,13
      upload_document,"(background_tasks:BackgroundTasks;file:UploadFile=File(...);project_id:Optional[str]=Query(default='00000000-0000-0000-0000-000000000001');document_type:str=Query(default='invoice');db:AsyncSession=Depends(get_db))->None",router.post,true,-,68
      detect_invoice_type,"(extracted_data:dict;our_nip:str='5881918662')->str",-,false,-,48
      create_expense_from_document,"(doc_id:str;extracted_data:dict;doc_type:str)->None",-,true,-,160
      process_document_ocr,"(doc_id:str;file_path:str;document_type:str)->None",-,true,-,101
      list_document_notes,"(project_id:Optional[str]=Query(default=None);limit:int=Query(default=200; le=500);offset:int=Query(default=0);db:AsyncSession=Depends(get_db))->None",router.get,true,-,53
      get_document,"(document_id:str;db:AsyncSession=Depends(get_db))->None",router.get,true,-,27
      list_documents,"(project_id:Optional[str]=Query(default=None);status:Optional[str]=Query(default=None);limit:int=Query(default=50; le=100);offset:int=Query(default=0);db:AsyncSession=Depends(get_db))->None",router.get,true,-,45
      download_document_file,"(document_id:str;db:AsyncSession=Depends(get_db))->None",router.get,true,-,27
      upsert_document_notes,"(document_id:str;payload:DocumentNoteUpsert;db:AsyncSession=Depends(get_db))->None",router.put,true,-,27
      reprocess_document,"(document_id:str;background_tasks:BackgroundTasks;db:AsyncSession=Depends(get_db))->None",router.post,true,-,25
      delete_document,"(document_id:str;db:AsyncSession=Depends(get_db))->None",router.delete,true,-,33
      update_document,"(document_id:str;db:AsyncSession=Depends(get_db);document_type:Optional[str]=None;ocr_status:Optional[str]=None;extracted_data:Optional[dict]=None)->None",router.patch,true,-,38
      llm_extract_fields,"(document_id:str;request:dict;db:AsyncSession=Depends(get_db))->None",router.post,true,-,91
      get_document_detail,"(document_id:str;db:AsyncSession=Depends(get_db))->None",router.get,true,-,34
      sync_expenses_from_documents,"(background_tasks:BackgroundTasks;db:AsyncSession=Depends(get_db))->None",router.post,true,-,37
      check_document_duplicates,"(document_id:str;db:AsyncSession=Depends(get_db))->None",router.get,true,-,80
      re_extract_document_data,"(document_id:str;background_tasks:BackgroundTasks;db:AsyncSession=Depends(get_db))->None",router.post,true,-,60
    function_docs:
      ensure_document_notes_table: ensure document notes table
      upload_document: upload document
      detect_invoice_type: detect invoice type
      create_expense_from_document: creates expense from document
      process_document_ocr: processes document ocr
      list_document_notes: list document notes
      get_document: retrieves document
      list_documents: list documents
      download_document_file: download document file
      upsert_document_notes: upsert document notes
      reprocess_document: reprocess document
      delete_document: deletes document
      update_document: updates document
      llm_extract_fields: llm extract fields
      get_document_detail: retrieves document detail
      sync_expenses_from_documents: sync expenses from documents
      check_document_duplicates: checks document duplicates
      re_extract_document_data: re extract document data
  src/api/routers/expenses.py:
    imports[20]: uuid,datetime,datetime.date,typing.Optional,typing.List,decimal.Decimal,httpx,fastapi.APIRouter,fastapi.HTTPException,fastapi.Depends,fastapi.Query,fastapi.BackgroundTasks,pydantic.BaseModel,pydantic.Field,sqlalchemy.ext.asyncio.AsyncSession
    exports[40]: ExpenseCreate,ExpenseResponse,ExpenseClassifyRequest,ProcessAllRequest,BRCategory,BR_CATEGORIES,get_br_categories,process_all_expenses,create_expense,validate_expense_pipeline
    const[1]{n,t,v,keys}:
      BR_CATEGORIES,List,"[     BRCategory(         code=\"personnel_employment\",         name=\"Wynagrodzenia pracowników (umowa o pracę)\",     ...","-"
    classes[6]{name,bases,decorators,props,methods}:
      ExpenseCreate,BaseModel,-,12,0
      ExpenseResponse,BaseModel,-,26,0
      ExpenseClassifyRequest,BaseModel,-,7,0
      ProcessAllRequest,BaseModel,-,3,0
      BRCategory,BaseModel,-,5,0
      ExpenseStatusUpdate,BaseModel,-,1,0
    class_details:
      ExpenseCreate:
        doc: Create expense request
        properties[12]: "document_id: Optional[str]","project_id: str","invoice_number: Optional[str]","invoice_date: Optional[date]","vendor_name: Optional[str]","vendor_nip: Optional[str]","net_amount: Decimal","vat_amount: Decimal","gross_amount: Decimal","currency: str"
      ExpenseResponse:
        doc: Expense response
        properties[26]: "id: str","project_id: str","document_id: Optional[str]","invoice_number: Optional[str]","invoice_date: Optional[date]","vendor_name: Optional[str]","vendor_nip: Optional[str]","net_amount: float","vat_amount: float","gross_amount: float"
      ExpenseClassifyRequest:
        doc: Manual classification request
        properties[7]: "br_qualified: Optional[bool]","br_category: Optional[str]","br_qualification_reason: Optional[str]","br_deduction_rate: Optional[float]","ip_qualified: Optional[bool]","ip_category: Optional[str]","nexus_category: Optional[str]"
      ProcessAllRequest:
        properties[3]: "project_id: str","fiscal_year: Optional[int]","month: Optional[int]"
      BRCategory:
        doc: B+R expense category
        properties[5]: "code: str","name: str","description: str","deduction_rate: float","examples: List[str]"
      ExpenseStatusUpdate:
        doc: Status update request
        properties[1]: "status: str"
    functions[33]{name,sig,decorators,async,category,lines}:
      get_br_categories,()->None,router.get,true,-,3
      process_all_expenses,"(request:ProcessAllRequest;db:AsyncSession=Depends(get_db))->None",router.post,true,-,11
      create_expense,"(expense:ExpenseCreate;background_tasks:BackgroundTasks;db:AsyncSession=Depends(get_db))->None",router.post,true,-,40
      validate_expense_pipeline,"(expense_data:dict)->None",router.post,true,-,13
      categorize_expense,"(description:str=Query(...);vendor_name:Optional[str]=Query(default=None);amount:Optional[float]=Query(default=None))->None",router.post,true,-,26
      validate_invoice_number,"(invoice_number:str=Query(...))->None",router.post,true,-,12
      convert_currency_to_pln,"(amount:Decimal=Query(...);currency:str=Query(...);expense_date:date=Query(...))->None",router.post,true,-,20
      validate_all_expenses,"(project_id:str=Query(default='00000000-0000-0000-0000-000000000001');db:AsyncSession=Depends(get_db))->None",router.get,true,-,62
      get_expense,"(expense_id:str;db:AsyncSession=Depends(get_db))->None",router.get,true,-,48
      list_expenses,"(project_id:Optional[str]=Query(default=None);br_qualified:Optional[bool]=Query(default=None);ip_qualified:Optional[bool]=Query(default=None);status:Optional[str]=Query(default=None);year:Optional[int]=Query(default=None);month:Optional[int]=Query(default=None);...+1)->None",router.get,true,-,86
      classify_expense_manually,"(expense_id:str;classification:ExpenseClassifyRequest;db:AsyncSession=Depends(get_db))->None",router.put,true,-,68
      trigger_auto_classification,"(expense_id:str;background_tasks:BackgroundTasks;db:AsyncSession=Depends(get_db))->None",router.post,true,-,17
      update_expense_status,"(expense_id:str;status_update:ExpenseStatusUpdate;db:AsyncSession=Depends(get_db))->None",router.put,true,-,24
      delete_expense,"(expense_id:str;db:AsyncSession=Depends(get_db))->None",router.delete,true,-,17
      generate_expense_justification,"(expense_id:str;db:AsyncSession=Depends(get_db))->None",router.post,true,-,75
      update_expense_vendor,"(expense_id:str;vendor_name:str=Query(...);vendor_nip:Optional[str]=Query(default=None);db:AsyncSession=Depends(get_db))->None",router.put,true,-,46
      generate_expense_documentation,"(expense_id:str;background_tasks:BackgroundTasks;db:AsyncSession=Depends(get_db))->None",router.post,true,-,67
      generate_project_documentation_summary,"(project_id:str;db:AsyncSession=Depends(get_db))->None",router.post,true,-,164
      list_revenues,"(project_id:Optional[str]=Query(default=None);db:AsyncSession=Depends(get_db))->None",router.get,true,-,47
      create_revenue,"(revenue:dict;db:AsyncSession=Depends(get_db))->None",router.post,true,-,43
      classify_revenue,"(revenue_id:str;classification:dict;db:AsyncSession=Depends(get_db))->None",router.put,true,-,83
      reclassify_invoice,"(invoice_id:str;from_type:str=Query(...; description='Current type: expense or revenue');to_type:str=Query(...; description='Target type: expense or revenue');reason:Optional[str]=Query(default=None);db:AsyncSession=Depends(get_db))->None",router.post,true,-,28
      get_invoice_history,"(invoice_id:str;db:AsyncSession=Depends(get_db))->None",router.get,true,-,16
      list_project_documentation,"(project_id:str)->None",router.get,true,-,19
      get_documentation_content,"(project_id:str;filename:str)->None",router.get,true,-,15
      get_documentation_history,"(project_id:str;filename:str)->None",router.get,true,-,15
      get_documentation_version,"(project_id:str;filename:str;commit:str)->None",router.get,true,-,19
      refine_documentation_with_llm,"(project_id:str;filename:str)->None",router.post,true,-,61
      get_documentation_pdf,"(project_id:str;filename:str)->None",router.get,true,-,107
      classify_expense_with_llm,"(expense_id:str)->None",-,true,-,87
      get_br_classifier_system_prompt,()->str,-,false,-,37
      build_classification_prompt,(expense_row)->str,-,false,-,21
      parse_llm_classification,"(response:str)->dict",-,false,-,19
    function_docs:
      get_br_categories: retrieves br categories
      process_all_expenses: processes all expenses
      create_expense: creates expense
      validate_expense_pipeline: validates expense pipeline
      categorize_expense: categorize expense
      validate_invoice_number: validates invoice number
      convert_currency_to_pln: converts currency to pln
      validate_all_expenses: validates all expenses
      get_expense: retrieves expense
      list_expenses: list expenses
      classify_expense_manually: classify expense manually
      trigger_auto_classification: trigger auto classification
      update_expense_status: updates expense status
      delete_expense: deletes expense
      generate_expense_justification: creates expense justification
      update_expense_vendor: updates expense vendor
      generate_expense_documentation: creates expense documentation
      generate_project_documentation_summary: creates project documentation summary
      list_revenues: list revenues
      create_revenue: creates revenue
      classify_revenue: classify revenue
      reclassify_invoice: reclassify invoice
      get_invoice_history: retrieves invoice history
      list_project_documentation: list project documentation
      get_documentation_content: retrieves documentation content
      get_documentation_history: retrieves documentation history
      get_documentation_version: retrieves documentation version
      refine_documentation_with_llm: refine documentation with llm
      get_documentation_pdf: retrieves documentation pdf
      classify_expense_with_llm: classify expense with llm
      get_br_classifier_system_prompt: retrieves br classifier system prompt
      build_classification_prompt: creates classification prompt
      parse_llm_classification: parses llm classification
  src/api/cqrs/commands.py:
    imports[12]: dataclasses.dataclass,typing.Optional,typing.Dict,typing.Any,abc.ABC,abc.abstractmethod,sqlalchemy.text,sqlalchemy.ext.asyncio.AsyncSession,events.EventStore,events.InvoiceClassifiedEvent,events.InvoiceReclassifiedEvent,events.get_event_store
    exports[9]: Command,ClassifyExpenseCommand,ClassifyRevenueCommand,ReclassifyInvoiceCommand,CommandHandler,ExpenseCommandHandler,RevenueCommandHandler,ReclassifyInvoiceHandler,get_command_handler
    classes[8]{name,bases,decorators,props,methods}:
      Command,ABC,dataclass,0,0
      ClassifyExpenseCommand,Command,dataclass,0,0
      ClassifyRevenueCommand,Command,dataclass,0,0
      ReclassifyInvoiceCommand,Command,dataclass,0,0
      CommandHandler,ABC,-,0,3
      ExpenseCommandHandler,CommandHandler,-,0,1
      RevenueCommandHandler,CommandHandler,-,0,1
      ReclassifyInvoiceHandler,CommandHandler,-,0,1
    class_details:
      Command:
        doc: Base class for commands.
      ClassifyExpenseCommand:
        doc: Command to classify an expense for B+R deduction.
        fields[6]{n,t,default,factory}:
          expense_id,str,"-","-"
          br_qualified,bool,"-","-"
          br_category,"Optional[str]",None,"-"
          br_deduction_rate,float,"1.0","-"
          reason,"Optional[str]",None,"-"
          user_id,"Optional[str]",None,"-"
      ClassifyRevenueCommand:
        doc: Command to classify a revenue for IP Box.
        fields[5]{n,t,default,factory}:
          revenue_id,str,"-","-"
          ip_qualified,bool,"-","-"
          ip_type,"Optional[str]",None,"-"
          ip_description,"Optional[str]",None,"-"
          user_id,"Optional[str]",None,"-"
      ReclassifyInvoiceCommand:
        doc: Command to reclassify an invoice (expense <-> revenue).
        fields[5]{n,t,default,factory}:
          invoice_id,str,"-","-"
          from_type,str,"-","-"
          to_type,str,"-","-"
          reason,"Optional[str]",None,"-"
          user_id,"Optional[str]",None,"-"
      CommandHandler:
        doc: Base class for command handlers.
        methods[3]{name,sig,decorators,async,lines}:
          __init__,"(db:AsyncSession)->None",-,false,3
          get_event_store,()->EventStore,-,true,4
          handle,"(command:Command)->Dict[str, Any]",abstractmethod,true,3
      ExpenseCommandHandler:
        doc: Handler for expense-related commands.
        methods[1]{name,sig,decorators,async,lines}:
          handle,"(command:ClassifyExpenseCommand)->Dict[str, Any]",-,true,51
      RevenueCommandHandler:
        doc: Handler for revenue-related commands.
        methods[1]{name,sig,decorators,async,lines}:
          handle,"(command:ClassifyRevenueCommand)->Dict[str, Any]",-,true,46
      ReclassifyInvoiceHandler:
        doc: Handler for invoice reclassification (expense <-> revenue).
        methods[1]{name,sig,decorators,async,lines}:
          handle,"(command:ReclassifyInvoiceCommand)->Dict[str, Any]",-,true,135
    functions[1]{name,sig,decorators,async,category,lines}:
      get_command_handler,"(command_type:str;db:AsyncSession)->CommandHandler",-,true,-,11
    function_docs:
      get_command_handler: retrieves command handler
  src/api/cqrs/events.py:
    imports[13]: uuid,json,datetime,dataclasses.dataclass,dataclasses.field,dataclasses.asdict,typing.Optional,typing.List,typing.Dict,typing.Any,enum.Enum,sqlalchemy.text,sqlalchemy.ext.asyncio.AsyncSession
    exports[7]: EventType,DomainEvent,InvoiceCreatedEvent,InvoiceClassifiedEvent,InvoiceReclassifiedEvent,EventStore,get_event_store
    types[1]{name,kind,values,def}:
      EventType,enum,"INVOICE_UPLOADED=\"invoice.uploaded\"|INVOICE_OCR_COMPLETED=\"invoice.ocr_completed\"|INVOICE_TYPE_DETECTED=\"invoice.type_detected\"|INVOICE_CLASSIFIED_AS_EXPENSE=\"invoice.classified_as_expense\"|INVOICE_CLASSIFIED_AS_REVENUE=\"invoice.classified_as_revenue\"|EXPENSE_BR_QUALIFIED=\"expense.br_qualified\"|EXPENSE_BR_DISQUALIFIED=\"expense.br_disqualified\"|REVENUE_IP_QUALIFIED=\"revenue.ip_qualified\"|REVENUE_IP_DISQUALIFIED=\"revenue.ip_disqualified\"|INVOICE_RECLASSIFIED=\"invoice.reclassified\"|INVOICE_DELETED=\"invoice.deleted\"","-"
    classes[6]{name,bases,decorators,props,methods}:
      EventType,str|Enum,-,0,0
      DomainEvent,-,dataclass,0,1
      InvoiceCreatedEvent,DomainEvent,dataclass,0,1
      InvoiceClassifiedEvent,DomainEvent,dataclass,0,2
      InvoiceReclassifiedEvent,DomainEvent,dataclass,0,1
      EventStore,-,-,0,5
    class_details:
      EventType:
        doc: Invoice lifecycle events.
      DomainEvent:
        doc: Base class for domain events.
        fields[8]{n,t,default,factory}:
          event_id,str,"-","lambda: str(uuid.uuid4("
          event_type,str,"\"\"","-"
          aggregate_id,str,"\"\"","-"
          aggregate_type,str,"\"invoice\"","-"
          timestamp,str,"-","lambda: datetime.utcnow("
          version,int,"1","-"
          data,"Dict[str, Any]","-",dict
          metadata,"Dict[str, Any]","-",dict
        methods[1]{name,sig,decorators,async,lines}:
          to_dict,()->dict,-,false,2
      InvoiceCreatedEvent:
        doc: Event when an invoice is uploaded and processed.
        fields[1]{n,t,default,factory}:
          event_type,str,EventType.INVOICE_UPLOADED,"-"
        methods[1]{name,sig,decorators,async,lines}:
          create,"(document_id:str;invoice_data:dict;detected_type:str='unknown')->\"InvoiceCreatedEvent\"",classmethod,false,11
      InvoiceClassifiedEvent:
        doc: Event when an invoice is classified (B+R expense or IP revenue).
        methods[2]{name,sig,decorators,async,lines}:
          create_expense,"(expense_id:str;br_category:str;br_qualified:bool;deduction_rate:float=1.0;reason:str=None)->\"InvoiceClassifiedEvent\"",classmethod,false,13
          create_revenue,"(revenue_id:str;ip_type:str;ip_qualified:bool;description:str=None)->\"InvoiceClassifiedEvent\"",classmethod,false,12
      InvoiceReclassifiedEvent:
        doc: Event when an invoice type is changed (expense <-> revenue).
        fields[1]{n,t,default,factory}:
          event_type,str,EventType.INVOICE_RECLASSIFIED,"-"
        methods[1]{name,sig,decorators,async,lines}:
          create,"(invoice_id:str;from_type:str;to_type:str;reason:str=None)->\"InvoiceReclassifiedEvent\"",classmethod,false,9
      EventStore:
        doc: Append-only event store for event sourcing.
        methods[5]{name,sig,decorators,async,lines}:
          __init__,"(db:AsyncSession)->None",-,false,2
          ensure_table_exists,()->None,-,true,35
          append,"(event:DomainEvent)->str",-,true,29
          get_events_for_aggregate,"(aggregate_id:str)->List[dict]",-,true,25
          get_events_by_type,"(event_type:str;limit:int=100)->List[dict]",-,true,26
    functions[1]{name,sig,decorators,async,category,lines}:
      get_event_store,"(db:AsyncSession)->EventStore",-,true,-,5
    function_docs:
      get_event_store: retrieves event store
  src/api/cqrs/__init__.py:
    imports[15]: commands.ClassifyExpenseCommand,commands.ClassifyRevenueCommand,commands.ReclassifyInvoiceCommand,commands.CommandHandler,commands.ExpenseCommandHandler,commands.RevenueCommandHandler,events.DomainEvent,events.InvoiceCreatedEvent,events.InvoiceClassifiedEvent,events.InvoiceReclassifiedEvent,events.EventStore,queries.GetExpensesQuery,queries.GetRevenuesQuery,queries.GetInvoiceHistoryQuery,queries.QueryHandler
  src/api/cqrs/queries.py:
    imports[11]: dataclasses.dataclass,typing.Optional,typing.List,typing.Dict,typing.Any,abc.ABC,abc.abstractmethod,sqlalchemy.text,sqlalchemy.ext.asyncio.AsyncSession,events.EventStore,events.get_event_store
    exports[11]: Query,GetExpensesQuery,GetRevenuesQuery,GetInvoiceHistoryQuery,GetAllInvoicesQuery,QueryHandler,ExpenseQueryHandler,RevenueQueryHandler,InvoiceHistoryQueryHandler,UnifiedInvoiceQueryHandler
    classes[10]{name,bases,decorators,props,methods}:
      Query,ABC,dataclass,0,0
      GetExpensesQuery,Query,dataclass,0,0
      GetRevenuesQuery,Query,dataclass,0,0
      GetInvoiceHistoryQuery,Query,dataclass,0,0
      GetAllInvoicesQuery,Query,dataclass,0,0
      QueryHandler,ABC,-,0,2
      ExpenseQueryHandler,QueryHandler,-,0,1
      RevenueQueryHandler,QueryHandler,-,0,1
      InvoiceHistoryQueryHandler,QueryHandler,-,0,1
      UnifiedInvoiceQueryHandler,QueryHandler,-,0,1
    class_details:
      Query:
        doc: Base class for queries.
      GetExpensesQuery:
        doc: Query to get expenses with filters.
        fields[6]{n,t,default,factory}:
          project_id,"Optional[str]",None,"-"
          year,"Optional[int]",None,"-"
          br_qualified,"Optional[bool]",None,"-"
          status,"Optional[str]",None,"-"
          limit,int,"100","-"
          offset,int,"0","-"
      GetRevenuesQuery:
        doc: Query to get revenues with filters.
        fields[5]{n,t,default,factory}:
          project_id,"Optional[str]",None,"-"
          year,"Optional[int]",None,"-"
          ip_qualified,"Optional[bool]",None,"-"
          limit,int,"100","-"
          offset,int,"0","-"
      GetInvoiceHistoryQuery:
        doc: Query to get event history for an invoice.
        fields[2]{n,t,default,factory}:
          invoice_id,str,"-","-"
          include_related,bool,False,"-"
      GetAllInvoicesQuery:
        doc: Query to get all invoices (expenses + revenues) for unified view.
        fields[5]{n,t,default,factory}:
          project_id,"Optional[str]",None,"-"
          year,"Optional[int]",None,"-"
          invoice_type,"Optional[str]",None,"-"
          limit,int,"100","-"
          offset,int,"0","-"
      QueryHandler:
        doc: Base class for query handlers.
        methods[2]{name,sig,decorators,async,lines}:
          __init__,"(db:AsyncSession)->None",-,false,2
          execute,"(query:Query)->Dict[str, Any]",abstractmethod,true,3
      ExpenseQueryHandler:
        doc: Handler for expense queries.
        methods[1]{name,sig,decorators,async,lines}:
          execute,"(query:GetExpensesQuery)->Dict[str, Any]",-,true,64
      RevenueQueryHandler:
        doc: Handler for revenue queries.
        methods[1]{name,sig,decorators,async,lines}:
          execute,"(query:GetRevenuesQuery)->Dict[str, Any]",-,true,59
      InvoiceHistoryQueryHandler:
        doc: Handler for invoice history queries using event store.
        methods[1]{name,sig,decorators,async,lines}:
          execute,"(query:GetInvoiceHistoryQuery)->Dict[str, Any]",-,true,10
      UnifiedInvoiceQueryHandler:
        doc: Handler for unified invoice queries (expenses + revenues).
        methods[1]{name,sig,decorators,async,lines}:
          execute,"(query:GetAllInvoicesQuery)->Dict[str, Any]",-,true,37
    functions[1]{name,sig,decorators,async,category,lines}:
      get_query_handler,"(query_type:str;db:AsyncSession)->QueryHandler",-,true,-,12
    function_docs:
      get_query_handler: retrieves query handler
  src/api/integrations/__init__.py:
    imports[11]: ksef_client.KSeFClient,ksef_client.KSeFService,ksef_client.KSeFInvoice,ksef_client.KSeFEnvironment,ksef_client.get_ksef_service,jpk_export.JPKExporter,jpk_export.JPKHeader,jpk_export.JPKSalesRecord,jpk_export.JPKPurchaseRecord,jpk_export.JPKDeclaration,jpk_export.create_jpk_from_expenses
  src/api/integrations/ksef_client.py:
    imports[13]: typing.Optional,typing.Dict,typing.List,typing.Any,dataclasses.dataclass,datetime.date,datetime,enum.Enum,httpx,os,hashlib,base64,structlog
    exports[6]: KSeFEnvironment,KSeFInvoice,KSeFSession,KSeFClient,KSeFService,get_ksef_service
    types[1]{name,kind,values,def}:
      KSeFEnvironment,enum,"PRODUCTION=\"https://ksef.mf.gov.pl/api\"|TEST=\"https://ksef-test.mf.gov.pl/api\"|DEMO=\"https://ksef-demo.mf.gov.pl/api\"","-"
    classes[5]{name,bases,decorators,props,methods}:
      KSeFEnvironment,str|Enum,-,0,0
      KSeFInvoice,-,dataclass,0,1
      KSeFSession,-,dataclass,0,0
      KSeFClient,-,-,0,7
      KSeFService,-,-,0,2
    class_details:
      KSeFEnvironment:
        doc: KSeF API environments.
      KSeFInvoice:
        doc: Parsed KSeF invoice.
        fields[13]{n,t,default,factory}:
          ksef_reference,str,"-","-"
          invoice_number,str,"-","-"
          issue_date,date,"-","-"
          seller_nip,str,"-","-"
          seller_name,str,"-","-"
          buyer_nip,str,"-","-"
          buyer_name,str,"-","-"
          net_amount,float,"-","-"
          vat_amount,float,"-","-"
          gross_amount,float,"-","-"
          currency,str,"-","-"
          items,"List[Dict[str, Any]]","-","-"
          raw_xml,"Optional[str]",None,"-"
        methods[1]{name,sig,decorators,async,lines}:
          to_dict,"()->Dict[str, Any]",-,false,15
      KSeFSession:
        doc: Active KSeF session.
        fields[4]{n,t,default,factory}:
          session_token,str,"-","-"
          reference_number,str,"-","-"
          timestamp,datetime,"-","-"
          expires_at,datetime,"-","-"
      KSeFClient:
        doc: Client for KSeF (Krajowy System e-Faktur) API.
        methods[7]{name,sig,decorators,async,lines}:
          __init__,"(nip:str;environment:KSeFEnvironment=KSeFEnvironment.TEST;token:Optional[str]=None)->None",-,false,11
          authenticate,()->KSeFSession,-,true,58
          fetch_invoices,"(date_from:date;date_to:date;invoice_type:str='purchase')->List[KSeFInvoice]",-,true,62
          _fetch_invoice_details,"(client:Any;ksef_ref:str)->Optional[KSeFInvoice]",-,true,17
          _parse_invoice_xml,"(ksef_ref:str;xml:str)->KSeFInvoice",-,false,22
          _sign_challenge,"(challenge:str)->str",-,false,8
          close_session,()->None,-,true,13
      KSeFService:
        doc: High-level service for KSeF operations.
        methods[2]{name,sig,decorators,async,lines}:
          __init__,"(nip:str;environment:KSeFEnvironment=KSeFEnvironment.TEST)->None",-,false,3
          import_purchase_invoices,"(date_from:date;date_to:date)->Dict[str, Any]",-,true,55
    functions[1]{name,sig,decorators,async,category,lines}:
      get_ksef_service,"(nip:str)->KSeFService",-,false,-,5
    function_docs:
      get_ksef_service: retrieves ksef service
  src/api/integrations/jpk_export.py:
    imports[13]: typing.Optional,typing.Dict,typing.List,typing.Any,dataclasses.dataclass,dataclasses.field,datetime.date,datetime,decimal.Decimal,enum.Enum,xml.etree.ElementTree,xml.dom.minidom,structlog
    exports[7]: JPKType,JPKHeader,JPKSalesRecord,JPKPurchaseRecord,JPKDeclaration,JPKExporter,create_jpk_from_expenses
    types[1]{name,kind,values,def}:
      JPKType,enum,"V7M=\"JPK_V7M\"|V7K=\"JPK_V7K\"|FA=\"JPK_FA\"|MAG=\"JPK_MAG\"","-"
    classes[6]{name,bases,decorators,props,methods}:
      JPKType,str|Enum,-,0,0
      JPKHeader,-,dataclass,0,0
      JPKSalesRecord,-,dataclass,0,0
      JPKPurchaseRecord,-,dataclass,0,0
      JPKDeclaration,-,dataclass,0,0
      JPKExporter,-,-,0,13
    class_details:
      JPKType:
        doc: JPK file types.
      JPKHeader:
        doc: JPK file header data.
        fields[10]{n,t,default,factory}:
          form_code,str,"\"JPK_V7M\"","-"
          form_version,str,"\"1-2E\"","-"
          variant,int,"2","-"
          system_info,str,"\"BR System\"","-"
          nip,str,"\"\"","-"
          full_name,str,"\"\"","-"
          email,str,"\"\"","-"
          year,int,"2025","-"
          month,int,"1","-"
          purpose,int,"0","-"
      JPKSalesRecord:
        doc: Single sales record for JPK.
        fields[20]{n,t,default,factory}:
          invoice_number,str,"-","-"
          invoice_date,date,"-","-"
          sale_date,date,"-","-"
          buyer_name,str,"-","-"
          buyer_nip,"Optional[str]","-","-"
          buyer_country,str,"\"PL\"","-"
          net_amount,Decimal,"Decimal(\"0\")","-"
          vat_amount,Decimal,"Decimal(\"0\")","-"
          k_19,Decimal,"Decimal(\"0\")","-"
          k_20,Decimal,"Decimal(\"0\")","-"
          k_21,Decimal,"Decimal(\"0\")","-"
          k_22,Decimal,"Decimal(\"0\")","-"
          k_23,Decimal,"Decimal(\"0\")","-"
          k_24,Decimal,"Decimal(\"0\")","-"
          k_25,Decimal,"Decimal(\"0\")","-"
          sw,bool,False,"-"
          ee,bool,False,"-"
          tp,bool,False,"-"
          tt_wnt,bool,False,"-"
          mr_t,bool,False,"-"
      JPKPurchaseRecord:
        doc: Single purchase record for JPK.
        fields[14]{n,t,default,factory}:
          invoice_number,str,"-","-"
          invoice_date,date,"-","-"
          seller_name,str,"-","-"
          seller_nip,"Optional[str]","-","-"
          net_amount,Decimal,"Decimal(\"0\")","-"
          vat_amount,Decimal,"Decimal(\"0\")","-"
          k_40,Decimal,"Decimal(\"0\")","-"
          k_41,Decimal,"Decimal(\"0\")","-"
          k_42,Decimal,"Decimal(\"0\")","-"
          k_43,Decimal,"Decimal(\"0\")","-"
          k_44,Decimal,"Decimal(\"0\")","-"
          k_45,Decimal,"Decimal(\"0\")","-"
          imp,bool,False,"-"
          mpp,bool,False,"-"
      JPKDeclaration:
        doc: VAT declaration summary.
        fields[20]{n,t,default,factory}:
          p_10,Decimal,"Decimal(\"0\")","-"
          p_11,Decimal,"Decimal(\"0\")","-"
          p_12,Decimal,"Decimal(\"0\")","-"
          p_13,Decimal,"Decimal(\"0\")","-"
          p_14,Decimal,"Decimal(\"0\")","-"
          p_15,Decimal,"Decimal(\"0\")","-"
          p_16,Decimal,"Decimal(\"0\")","-"
          p_17,Decimal,"Decimal(\"0\")","-"
          p_18,Decimal,"Decimal(\"0\")","-"
          p_19,Decimal,"Decimal(\"0\")","-"
          p_20,Decimal,"Decimal(\"0\")","-"
          p_21,Decimal,"Decimal(\"0\")","-"
          p_40,Decimal,"Decimal(\"0\")","-"
          p_41,Decimal,"Decimal(\"0\")","-"
          p_42,Decimal,"Decimal(\"0\")","-"
          p_43,Decimal,"Decimal(\"0\")","-"
          p_44,Decimal,"Decimal(\"0\")","-"
          p_45,Decimal,"Decimal(\"0\")","-"
          p_46,Decimal,"Decimal(\"0\")","-"
          p_47,Decimal,"Decimal(\"0\")","-"
      JPKExporter:
        doc: Generates JPK_V7M XML files for Polish tax authority.
        methods[13]{name,sig,decorators,async,lines}:
          __init__,"(header:JPKHeader)->None",-,false,5
          add_sales_record,"(record:JPKSalesRecord)->None",-,false,3
          add_purchase_record,"(record:JPKPurchaseRecord)->None",-,false,3
          set_declaration,"(declaration:JPKDeclaration)->None",-,false,3
          calculate_declaration,()->JPKDeclaration,-,false,36
          generate_xml,()->str,-,false,36
          _add_header,"(root:Any)->None",-,false,22
          _add_subject,"(root:Any)->None",-,false,15
          _add_declaration,"(root:Any)->None",-,false,28
          _add_sales_record,"(root:Any;rec:JPKSalesRecord;lp:int)->None",-,false,17
          _add_purchase_record,"(root:Any;rec:JPKPurchaseRecord;lp:int)->None",-,false,16
          _add_control,"(root:Any)->None",-,false,15
          validate,"()->List[str]",-,false,28
    functions[1]{name,sig,decorators,async,category,lines}:
      create_jpk_from_expenses,"(expenses:List[Dict[str;Any]];header:JPKHeader)->JPKExporter",-,false,-,30
    function_docs:
      create_jpk_from_expenses: creates jpk from expenses
  src/integrations/accounting/fakturownia.py:
    imports[13]: typing.List,typing.Dict,typing.Any,typing.Optional,datetime.date,httpx,structlog,base.BaseAccountingClient,base.Invoice,base.InvoiceItem,base.InvoiceType,base.InvoiceStatus,base.AccountingDocument
    exports[1]: FakturowniaClient
    classes[1]{name,bases,decorators,props,methods}:
      FakturowniaClient,BaseAccountingClient,-,0,13
    class_details:
      FakturowniaClient:
        doc: Fakturownia.pl API client.
        methods[13]{name,sig,decorators,async,lines}:
          provider_name,()->str,property,false,2
          base_url,()->str,property,false,3
          _get_headers,"()->Dict[str, str]",-,false,5
          _get_params,"()->Dict[str, Any]",-,false,5
          verify_connection,()->bool,-,true,14
          get_invoices,"(invoice_type:InvoiceType=None;date_from:date=None;date_to:date=None;status:InvoiceStatus=None;page:int=1;per_page:int=50)->List[Invoice]",-,true,49
          get_invoice,"(invoice_id:str)->Optional[Invoice]",-,true,19
          get_invoice_pdf,"(invoice_id:str)->Optional[bytes]",-,true,17
          get_expense_invoices,"(date_from:date=None;date_to:date=None;page:int=1;per_page:int=50)->List[Invoice]",-,true,41
          _parse_invoice,"(data:Dict)->Invoice",-,false,46
          _parse_expense,"(data:Dict)->Invoice",-,false,17
          _map_status,"(status:str)->InvoiceStatus",-,false,10
          _parse_date,"(date_str:str)->Optional[date]",-,false,9
  src/integrations/accounting/base.py:
    imports[11]: abc.ABC,abc.abstractmethod,typing.List,typing.Dict,typing.Any,typing.Optional,datetime.date,datetime,dataclasses.dataclass,enum.Enum,structlog
    exports[6]: InvoiceType,InvoiceStatus,InvoiceItem,Invoice,AccountingDocument,BaseAccountingClient
    types[2]{name,kind,values,def}:
      InvoiceType,enum,"SALES=\"sales\"|PURCHASE=\"purchase\"|PROFORMA=\"proforma\"|CORRECTION=\"correction\"","-"
      InvoiceStatus,enum,"DRAFT=\"draft\"|ISSUED=\"issued\"|SENT=\"sent\"|PAID=\"paid\"|OVERDUE=\"overdue\"|CANCELLED=\"cancelled\"","-"
    classes[6]{name,bases,decorators,props,methods}:
      InvoiceType,str|Enum,-,0,0
      InvoiceStatus,str|Enum,-,0,0
      InvoiceItem,-,dataclass,0,1
      Invoice,-,dataclass,0,1
      AccountingDocument,-,dataclass,0,0
      BaseAccountingClient,ABC,-,0,9
    class_details:
      InvoiceType:
        doc: Invoice types
      InvoiceStatus:
        doc: Invoice status
      InvoiceItem:
        doc: Single invoice line item
        fields[11]{n,t,default,factory}:
          name,str,"-","-"
          quantity,float,"-","-"
          unit,str,"-","-"
          unit_price_net,float,"-","-"
          vat_rate,float,"-","-"
          net_amount,float,"0","-"
          vat_amount,float,"0","-"
          gross_amount,float,"0","-"
          pkwiu,"Optional[str]",None,"-"
          gtu,"Optional[str]",None,"-"
          description,"Optional[str]",None,"-"
        methods[1]{name,sig,decorators,async,lines}:
          __post_init__,()->None,-,false,4
      Invoice:
        doc: Invoice data model
        fields[20]{n,t,default,factory}:
          id,str,"-","-"
          number,str,"-","-"
          invoice_type,InvoiceType,"-","-"
          status,InvoiceStatus,"-","-"
          issue_date,date,"-","-"
          sale_date,"Optional[date]",None,"-"
          due_date,"Optional[date]",None,"-"
          seller_name,str,"\"\"","-"
          seller_nip,str,"\"\"","-"
          seller_address,str,"\"\"","-"
          buyer_name,str,"\"\"","-"
          buyer_nip,str,"\"\"","-"
          buyer_address,str,"\"\"","-"
          items,"List[InvoiceItem]",None,"-"
          net_amount,float,"0","-"
          vat_amount,float,"0","-"
          gross_amount,float,"0","-"
          currency,str,"\"PLN\"","-"
          payment_method,str,"\"\"","-"
          bank_account,str,"\"\"","-"
        methods[1]{name,sig,decorators,async,lines}:
          __post_init__,()->None,-,false,3
      AccountingDocument:
        doc: Generic accounting document (not just invoices)
        fields[14]{n,t,default,factory}:
          id,str,"-","-"
          document_type,str,"-","-"
          number,str,"-","-"
          issue_date,date,"-","-"
          counterparty_name,str,"\"\"","-"
          counterparty_nip,str,"\"\"","-"
          net_amount,float,"0","-"
          vat_amount,float,"0","-"
          gross_amount,float,"0","-"
          currency,str,"\"PLN\"","-"
          description,str,"\"\"","-"
          category,str,"\"\"","-"
          file_url,"Optional[str]",None,"-"
          raw_data,"Optional[Dict]",None,"-"
      BaseAccountingClient:
        doc: Abstract base class for accounting system integrations.
        methods[9]{name,sig,decorators,async,lines}:
          __init__,"(credentials:Dict[str;Any];settings:Dict[str;Any]=None)->None",-,false,11
          provider_name,()->str,property|abstractmethod,false,3
          verify_connection,()->bool,abstractmethod,true,6
          get_invoices,"(invoice_type:InvoiceType=None;date_from:date=None;date_to:date=None;status:InvoiceStatus=None;page:int=1;per_page:int=50)->List[Invoice]",abstractmethod,true,24
          get_invoice,"(invoice_id:str)->Optional[Invoice]",abstractmethod,true,11
          get_invoice_pdf,"(invoice_id:str)->Optional[bytes]",abstractmethod,true,11
          get_expense_invoices,"(date_from:date=None;date_to:date=None;page:int=1;per_page:int=50)->List[Invoice]",-,true,15
          get_documents,"(date_from:date=None;date_to:date=None;document_type:str=None)->List[AccountingDocument]",-,true,29
          sync_invoices_to_br_system,"(date_from:date;date_to:date;project_id:str=None)->Dict[str, Any]",-,true,82
  src/integrations/accounting/__init__.py:
    imports[10]: base.BaseAccountingClient,base.Invoice,base.InvoiceItem,base.InvoiceType,base.InvoiceStatus,base.AccountingDocument,ifirma.IFirmaClient,fakturownia.FakturowniaClient,wfirma_infakt.WFirmaClient,wfirma_infakt.InFaktClient
  src/integrations/accounting/wfirma_infakt.py:
    imports[12]: typing.List,typing.Dict,typing.Any,typing.Optional,datetime.date,httpx,structlog,base.BaseAccountingClient,base.Invoice,base.InvoiceItem,base.InvoiceType,base.InvoiceStatus
    exports[2]: WFirmaClient,InFaktClient
    classes[2]{name,bases,decorators,props,methods}:
      WFirmaClient,BaseAccountingClient,-,0,8
      InFaktClient,BaseAccountingClient,-,0,9
    class_details:
      WFirmaClient:
        doc: wFirma.pl API client.
        methods[8]{name,sig,decorators,async,lines}:
          provider_name,()->str,property,false,2
          _get_headers,"()->Dict[str, str]",-,false,7
          verify_connection,()->bool,-,true,13
          get_invoices,"(invoice_type:InvoiceType=None;date_from:date=None;date_to:date=None;status:InvoiceStatus=None;page:int=1;per_page:int=50)->List[Invoice]",-,true,61
          get_invoice,"(invoice_id:str)->Optional[Invoice]",-,true,18
          get_invoice_pdf,"(invoice_id:str)->Optional[bytes]",-,true,18
          _parse_invoice,"(data:Dict;invoice_type:InvoiceType)->Invoice",-,false,33
          _parse_date,"(date_str:str)->Optional[date]",-,false,8
      InFaktClient:
        doc: InFakt.pl API client.
        methods[9]{name,sig,decorators,async,lines}:
          provider_name,()->str,property,false,2
          _get_headers,"()->Dict[str, str]",-,false,5
          verify_connection,()->bool,-,true,13
          get_invoices,"(invoice_type:InvoiceType=None;date_from:date=None;date_to:date=None;status:InvoiceStatus=None;page:int=1;per_page:int=50)->List[Invoice]",-,true,42
          get_invoice,"(invoice_id:str)->Optional[Invoice]",-,true,18
          get_invoice_pdf,"(invoice_id:str)->Optional[bytes]",-,true,17
          _parse_invoice,"(data:Dict)->Invoice",-,false,37
          _map_status,"(status:str)->InvoiceStatus",-,false,8
          _parse_date,"(date_str:str)->Optional[date]",-,false,8
  src/integrations/accounting/ifirma.py:
    imports[15]: hashlib,typing.List,typing.Dict,typing.Any,typing.Optional,datetime.date,base64.b64encode,httpx,structlog,base.BaseAccountingClient,base.Invoice,base.InvoiceItem,base.InvoiceType,base.InvoiceStatus,base.AccountingDocument
    exports[1]: IFirmaClient
    classes[1]{name,bases,decorators,props,methods}:
      IFirmaClient,BaseAccountingClient,-,0,9
    class_details:
      IFirmaClient:
        doc: iFirma API client for Polish accounting software.
        methods[9]{name,sig,decorators,async,lines}:
          provider_name,()->str,property,false,2
          _get_auth_header,"(key_type:str='faktura')->str",-,false,20
          verify_connection,()->bool,-,true,16
          get_invoices,"(invoice_type:InvoiceType=None;date_from:date=None;date_to:date=None;status:InvoiceStatus=None;page:int=1;per_page:int=50)->List[Invoice]",-,true,49
          get_invoice,"(invoice_id:str)->Optional[Invoice]",-,true,21
          get_invoice_pdf,"(invoice_id:str)->Optional[bytes]",-,true,19
          _parse_invoice,"(data:Dict;invoice_type:InvoiceType)->Invoice",-,false,35
          _map_status,"(status:str)->InvoiceStatus",-,false,10
          _parse_date,"(date_str:str)->Optional[date]",-,false,9
  src/integrations/config/__init__.py:
    imports[8]: database.ConfigDatabase,database.IntegrationProvider,database.IntegrationType,database.IntegrationConfig,database.SyncLog,database.OAuthToken,database.DatabaseType,database.get_config_db
  src/integrations/config/database.py:
    imports[20]: os,typing.Optional,typing.Dict,typing.Any,typing.List,datetime,enum.Enum,contextlib.contextmanager,json,sqlalchemy.create_engine,sqlalchemy.Column,sqlalchemy.String,sqlalchemy.Text,sqlalchemy.DateTime,sqlalchemy.Boolean
    exports[8]: DatabaseType,IntegrationType,IntegrationProvider,IntegrationConfig,SyncLog,OAuthToken,ConfigDatabase,get_config_db
    types[3]{name,kind,values,def}:
      DatabaseType,enum,"SQLITE=\"sqlite\"|POSTGRESQL=\"postgresql\"|MYSQL=\"mysql\"|MONGODB=\"mongodb\"","-"
      IntegrationType,enum,"ACCOUNTING=\"accounting\"|CLOUD_STORAGE=\"cloud_storage\"|EMAIL=\"email\"|WEBHOOK=\"webhook\"","-"
      IntegrationProvider,enum,"IFIRMA=\"ifirma\"|FAKTUROWNIA=\"fakturownia\"|WFIRMA=\"wfirma\"|INFAKT=\"infakt\"|KSEF=\"ksef\"|NEXTCLOUD=\"nextcloud\"|GOOGLE_DRIVE=\"google_drive\"|DROPBOX=\"dropbox\"|ONEDRIVE=\"onedrive\"|AWS_S3=\"aws_s3\"|MINIO=\"minio\"|SMTP=\"smtp\"|GMAIL=\"gmail\"","-"
    classes[7]{name,bases,decorators,props,methods}:
      DatabaseType,str|Enum,-,0,0
      IntegrationType,str|Enum,-,0,0
      IntegrationProvider,str|Enum,-,0,0
      IntegrationConfig,ConfigBase,-,0,1
      SyncLog,ConfigBase,-,0,0
      OAuthToken,ConfigBase,-,0,0
      ConfigDatabase,-,-,0,13
    class_details:
      DatabaseType:
        doc: Supported configuration database types
      IntegrationType:
        doc: Types of integrations
      IntegrationProvider:
        doc: Supported integration providers
      IntegrationConfig:
        doc: Integration configuration storage
        methods[1]{name,sig,decorators,async,lines}:
          __repr__,()->None,-,false,2
      SyncLog:
        doc: Synchronization logs
      OAuthToken:
        doc: OAuth tokens storage
      ConfigDatabase:
        doc: Configuration database manager with encryption support.
        methods[13]{name,sig,decorators,async,lines}:
          __init__,"(db_type:DatabaseType=None;db_url:str=None;encryption_key:str=None)->None",-,false,53
          get_session,()->Session,contextmanager,false,11
          encrypt,"(data:str)->str",-,false,3
          decrypt,"(encrypted_data:str)->str",-,false,3
          save_integration,"(integration_id:str;provider:IntegrationProvider;integration_type:IntegrationType;credentials:Dict[str;Any]=None;settings:Dict[str;Any]=None;base_url:str=None)->IntegrationConfig",-,false,39
          get_integration,"(integration_id:str)->Optional[Dict[str, Any]]",-,false,31
          list_integrations,"(integration_type:IntegrationType=None;provider:IntegrationProvider=None;active_only:bool=True)->List[Dict[str, Any]]",-,false,33
          delete_integration,"(integration_id:str)->bool",-,false,9
          update_sync_status,"(integration_id:str;is_verified:bool=None;last_error:str=None)->None",-,false,15
          save_oauth_token,"(token_id:str;integration_id:str;access_token:str;refresh_token:str=None;expires_at:datetime=None;scope:str=None)->None",-,false,23
          get_oauth_token,"(token_id:str)->Optional[Dict[str, Any]]",-,false,17
          log_sync,"(integration_id:str;sync_type:str;status:str;items_processed:int=0;items_failed:int=0;details:Dict=None)->int",-,false,25
          get_sync_logs,"(integration_id:str=None;limit:int=50)->List[Dict]",-,false,29
    functions[1]{name,sig,decorators,async,category,lines}:
      get_config_db,()->ConfigDatabase,-,false,-,6
    function_docs:
      get_config_db: retrieves config db
  src/integrations/cloud/dropbox_onedrive.py:
    imports[11]: typing.List,typing.Dict,typing.Any,typing.Optional,datetime,pathlib.Path,httpx,structlog,base.BaseCloudStorageClient,base.CloudFile,base.UploadResult
    exports[2]: DropboxClient,OneDriveClient
    classes[2]{name,bases,decorators,props,methods}:
      DropboxClient,BaseCloudStorageClient,-,0,12
      OneDriveClient,BaseCloudStorageClient,-,0,14
    class_details:
      DropboxClient:
        doc: Dropbox API client.
        methods[12]{name,sig,decorators,async,lines}:
          provider_name,()->str,property,false,2
          _get_headers,"()->Dict[str, str]",-,false,5
          verify_connection,()->bool,-,true,13
          list_files,"(folder_path:str='/';recursive:bool=False)->List[CloudFile]",-,true,44
          upload_file,"(local_path:str;remote_path:str;overwrite:bool=True)->UploadResult",-,true,20
          upload_bytes,"(content:bytes;remote_path:str;filename:str;mime_type:str='application/octet-stream';overwrite:bool=True)->UploadResult",-,true,51
          download_file,"(remote_path:str;local_path:str)->bool",-,true,8
          download_bytes,"(remote_path:str)->Optional[bytes]",-,true,22
          delete_file,"(remote_path:str)->bool",-,true,13
          create_folder,"(folder_path:str)->bool",-,true,13
          get_file_info,"(remote_path:str)->Optional[CloudFile]",-,true,28
          _parse_datetime,"(dt_str:str)->Optional[datetime]",-,false,7
      OneDriveClient:
        doc: Microsoft OneDrive API client.
        methods[14]{name,sig,decorators,async,lines}:
          provider_name,()->str,property,false,2
          drive_path,()->str,property,false,5
          _get_headers,"()->Dict[str, str]",-,false,5
          verify_connection,()->bool,-,true,13
          list_files,"(folder_path:str='/';recursive:bool=False)->List[CloudFile]",-,true,44
          upload_file,"(local_path:str;remote_path:str;overwrite:bool=True)->UploadResult",-,true,20
          upload_bytes,"(content:bytes;remote_path:str;filename:str;mime_type:str='application/octet-stream';overwrite:bool=True)->UploadResult",-,true,21
          _simple_upload,"(path:str;content:bytes;overwrite:bool)->UploadResult",-,true,40
          download_file,"(remote_path:str;local_path:str)->bool",-,true,8
          download_bytes,"(remote_path:str)->Optional[bytes]",-,true,20
          delete_file,"(remote_path:str)->bool",-,true,14
          create_folder,"(folder_path:str)->bool",-,true,32
          get_file_info,"(remote_path:str)->Optional[CloudFile]",-,true,31
          _parse_datetime,"(dt_str:str)->Optional[datetime]",-,false,7
  src/integrations/cloud/base.py:
    imports[12]: abc.ABC,abc.abstractmethod,typing.List,typing.Dict,typing.Any,typing.Optional,typing.BinaryIO,datetime,dataclasses.dataclass,enum.Enum,pathlib.Path,structlog
    exports[3]: CloudFile,UploadResult,BaseCloudStorageClient
    classes[3]{name,bases,decorators,props,methods}:
      CloudFile,-,dataclass,0,0
      UploadResult,-,dataclass,0,0
      BaseCloudStorageClient,ABC,-,0,15
    class_details:
      CloudFile:
        doc: Cloud file metadata
        fields[13]{n,t,default,factory}:
          id,str,"-","-"
          name,str,"-","-"
          path,str,"-","-"
          size,int,"-","-"
          mime_type,str,"-","-"
          created_at,"Optional[datetime]",None,"-"
          modified_at,"Optional[datetime]",None,"-"
          is_folder,bool,False,"-"
          parent_id,"Optional[str]",None,"-"
          download_url,"Optional[str]",None,"-"
          web_url,"Optional[str]",None,"-"
          checksum,"Optional[str]",None,"-"
          raw_data,"Optional[Dict]",None,"-"
      UploadResult:
        doc: Upload operation result
        fields[6]{n,t,default,factory}:
          success,bool,"-","-"
          file_id,"Optional[str]",None,"-"
          file_path,"Optional[str]",None,"-"
          file_url,"Optional[str]",None,"-"
          error,"Optional[str]",None,"-"
          raw_response,"Optional[Dict]",None,"-"
      BaseCloudStorageClient:
        doc: Abstract base class for cloud storage integrations.
        methods[15]{name,sig,decorators,async,lines}:
          __init__,"(credentials:Dict[str;Any];settings:Dict[str;Any]=None)->None",-,false,11
          provider_name,()->str,property|abstractmethod,false,3
          verify_connection,()->bool,abstractmethod,true,3
          list_files,"(folder_path:str='/';recursive:bool=False)->List[CloudFile]",abstractmethod,true,7
          upload_file,"(local_path:str;remote_path:str;overwrite:bool=True)->UploadResult",abstractmethod,true,8
          upload_bytes,"(content:bytes;remote_path:str;filename:str;mime_type:str='application/octet-stream';overwrite:bool=True)->UploadResult",abstractmethod,true,10
          download_file,"(remote_path:str;local_path:str)->bool",abstractmethod,true,7
          download_bytes,"(remote_path:str)->Optional[bytes]",abstractmethod,true,6
          delete_file,"(remote_path:str)->bool",abstractmethod,true,3
          create_folder,"(folder_path:str)->bool",abstractmethod,true,3
          get_file_info,"(remote_path:str)->Optional[CloudFile]",abstractmethod,true,3
          file_exists,"(remote_path:str)->bool",-,true,4
          ensure_folder_exists,"(folder_path:str)->bool",-,true,5
          upload_report,"(report_content:bytes;report_name:str;report_folder:str='/BR-Reports';year:int=None;month:int=None)->UploadResult",-,true,68
          sync_invoices_folder,"(local_folder:str;remote_folder:str='/BR-Invoices')->Dict[str, Any]",-,true,58
  src/integrations/cloud/google_s3.py:
    imports[13]: typing.List,typing.Dict,typing.Any,typing.Optional,datetime,pathlib.Path,json,mimetypes,httpx,structlog,base.BaseCloudStorageClient,base.CloudFile,base.UploadResult
    exports[2]: GoogleDriveClient,S3Client
    classes[2]{name,bases,decorators,props,methods}:
      GoogleDriveClient,BaseCloudStorageClient,-,0,18
      S3Client,BaseCloudStorageClient,-,0,11
    class_details:
      GoogleDriveClient:
        doc: Google Drive API client.
        methods[18]{name,sig,decorators,async,lines}:
          provider_name,()->str,property,false,2
          _get_headers,"()->Dict[str, str]",-,false,5
          _refresh_token_if_needed,()->None,-,true,5
          verify_connection,()->bool,-,true,14
          list_files,"(folder_path:str='/';recursive:bool=False)->List[CloudFile]",-,true,50
          upload_file,"(local_path:str;remote_path:str;overwrite:bool=True)->UploadResult",-,true,24
          upload_bytes,"(content:bytes;remote_path:str;filename:str;mime_type:str='application/octet-stream';overwrite:bool=True)->UploadResult",-,true,66
          download_file,"(remote_path:str;local_path:str)->bool",-,true,7
          download_bytes,"(remote_path:str)->Optional[bytes]",-,true,27
          delete_file,"(remote_path:str)->bool",-,true,15
          create_folder,"(folder_path:str)->bool",-,true,6
          get_file_info,"(remote_path:str)->Optional[CloudFile]",-,true,31
          _resolve_path_to_id,"(path:str)->Optional[str]",-,true,16
          _find_file_by_name,"(name:str;parent_id:str)->Optional[str]",-,true,21
          _ensure_folder_path,"(path:str)->str",-,true,15
          _create_folder,"(name:str;parent_id:str)->str",-,true,20
          _update_file,"(file_id:str;content:bytes;mime_type:str)->UploadResult",-,true,27
          _parse_datetime,"(dt_str:str)->Optional[datetime]",-,false,7
      S3Client:
        doc: AWS S3 / MinIO compatible client.
        methods[11]{name,sig,decorators,async,lines}:
          provider_name,()->str,property,false,2
          _get_client,()->None,-,false,14
          verify_connection,()->bool,-,true,9
          list_files,"(folder_path:str='/';recursive:bool=False)->List[CloudFile]",-,true,46
          upload_file,"(local_path:str;remote_path:str;overwrite:bool=True)->UploadResult",-,true,26
          upload_bytes,"(content:bytes;remote_path:str;filename:str;mime_type:str='application/octet-stream';overwrite:bool=True)->UploadResult",-,true,33
          download_file,"(remote_path:str;local_path:str)->bool",-,true,10
          download_bytes,"(remote_path:str)->Optional[bytes]",-,true,13
          delete_file,"(remote_path:str)->bool",-,true,10
          create_folder,"(folder_path:str)->bool",-,true,11
          get_file_info,"(remote_path:str)->Optional[CloudFile]",-,true,19
  src/integrations/cloud/__init__.py:
    imports[8]: base.BaseCloudStorageClient,base.CloudFile,base.UploadResult,nextcloud.NextcloudClient,google_s3.GoogleDriveClient,google_s3.S3Client,dropbox_onedrive.DropboxClient,dropbox_onedrive.OneDriveClient
  src/integrations/cloud/nextcloud.py:
    imports[12]: typing.List,typing.Dict,typing.Any,typing.Optional,datetime,pathlib.Path,xml.etree.ElementTree,httpx,structlog,base.BaseCloudStorageClient,base.CloudFile,base.UploadResult
    exports[1]: NextcloudClient
    classes[1]{name,bases,decorators,props,methods}:
      NextcloudClient,BaseCloudStorageClient,-,0,13
    class_details:
      NextcloudClient:
        doc: Nextcloud client using WebDAV protocol.
        methods[13]{name,sig,decorators,async,lines}:
          provider_name,()->str,property,false,2
          webdav_url,()->str,property,false,4
          _get_auth,()->tuple,-,false,5
          verify_connection,()->bool,-,true,15
          list_files,"(folder_path:str='/';recursive:bool=False)->List[CloudFile]",-,true,42
          upload_file,"(local_path:str;remote_path:str;overwrite:bool=True)->UploadResult",-,true,21
          upload_bytes,"(content:bytes;remote_path:str;filename:str;mime_type:str='application/octet-stream';overwrite:bool=True)->UploadResult",-,true,45
          download_file,"(remote_path:str;local_path:str)->bool",-,true,12
          download_bytes,"(remote_path:str)->Optional[bytes]",-,true,22
          delete_file,"(remote_path:str)->bool",-,true,16
          create_folder,"(folder_path:str)->bool",-,true,17
          get_file_info,"(remote_path:str)->Optional[CloudFile]",-,true,35
          _parse_propfind_response,"(xml_text:str;base_path:str)->List[CloudFile]",-,false,70
  web/static/js/markdown-renderer.js:
  web/static/js/app.js:
    exports[176]: createProject,loadReports,closeConfirmModal,showToast,editProject,pollDocumentStatus,updateGitProjectMapping,apiCall,uploadAllReports,createWorker
    const[7]{n,t,v,keys}:
      API_BASE,"-","-","-"
      PROJECT_ID,"-","-","-"
      DASHBOARD_MODULES,"-","-","-"
      DEFAULT_DASHBOARD_LAYOUT,"-","-","-"
      TIME_SLOTS,"-","-","-"
      PROVIDER_CONFIGS,"-","-","-"
      LOG_SERVICES,"-","-","-"
    functions[176]{name,sig,decorators,async,category,lines}:
      getPageFromUrl,()->None,-,false,-,4
      processAllExpensesForYear,()->None,-,true,-,26
      getUrlParam,(key)->None,-,false,-,4
      setUrlParam,(key;value)->None,-,false,-,14
      setPageInUrl,(page)->None,-,false,-,3
      closeConfirmModal,()->None,-,false,-,4
      confirmModalCancel,()->None,-,false,-,10
      openConfirmModal,()->None,-,false,-,34
      navigateTo,(page)->None,-,false,-,29
      apiCall,(endpoint)->None,-,true,-,13
      getDashboardLayout,()->None,-,false,-,4
      saveDashboardLayout,()->None,-,false,-,3
      toggleDashboardConfig,()->None,-,false,-,5
      updateModuleSelect,()->None,-,false,-,6
      addDashboardModule,(moduleId)->None,-,false,-,6
      removeDashboardModule,(moduleId)->None,-,false,-,5
      resetDashboardConfig,()->None,-,false,-,6
      renderDashboard,()->None,-,false,-,26
      loadDashboard,()->None,-,true,-,4
      loadDashboardModules,()->None,-,true,-,40
      loadRecentDocsModule,(container)->None,-,true,-,15
      loadCategoryModule,(container;summary)->None,-,false,-,8
      loadTopVendorsModule,(container)->None,-,true,-,15
      loadTimesheetModule,(container)->None,-,true,-,6
      loadGitActivityModule,(container)->None,-,true,-,4
      loadMonthlyTrendModule,(container)->None,-,true,-,18
      setupUploadListeners,()->None,-,false,-,13
      handleFiles,(files)->None,-,false,-,1
      uploadFile,(file)->None,-,true,-,29
      pollDocumentStatus,(docId;itemId)->None,-,true,-,16
      loadRecentDocuments,()->None,-,true,-,24
      getDocTypeName,(type)->None,-,false,-,4
      deleteDocumentFromModal,(docId)->None,-,true,-,6
      retryOcr,(docId)->None,-,true,-,7
      normalizeExtractedData,(raw)->None,-,false,-,9
      formatExtractedValue,(v)->None,-,false,-,11
      showDocumentDetail,(docId)->None,-,true,-,84
      getFieldLabel,(field)->None,-,false,-,13
      toggleEditMode,()->None,-,false,-,9
      saveExtractedData,(docId)->None,-,true,-,25
      createExpenseFromDoc,(docId)->None,-,true,-,40
      createRevenueFromDoc,(docId)->None,-,true,-,42
      closeDocumentModal,()->None,-,false,-,7
      approveDocument,(docId)->None,-,true,-,8
      loadProjects,()->None,-,true,-,44
      showCreateProjectModal,()->None,-,false,-,8
      createProject,(name;description;fiscalYear)->None,-,true,-,10
      editProject,(id)->None,-,true,-,17
      deleteProject,(id)->None,-,true,-,10
      viewProjectExpenses,(projectId)->None,-,false,-,7
      loadProjectsForFilter,()->None,-,true,-,19
      getProjectName,(projectId)->None,-,false,-,4
      initExpenseFilters,()->None,-,false,-,12
      loadExpenses,()->None,-,true,-,127
      classifyRevenue,(revenueId;ipQualified)->None,-,true,-,12
      showRevenueDetails,(revenueId)->None,-,true,-,4
      deleteRevenue,(revenueId)->None,-,true,-,4
      convertToRevenue,(expenseId)->None,-,true,-,19
      convertToExpense,(revenueId)->None,-,true,-,19
      toggleExpenseSelection,(id;checked)->None,-,false,-,8
      toggleSelectAll,(checkbox)->None,-,false,-,12
      updateBulkActionsBar,()->None,-,false,-,10
      clearSelection,()->None,-,false,-,6
      bulkAssignToProject,()->None,-,true,-,26
      showExpenseDetails,(id)->None,-,true,-,34
      classifyExpense,(id)->None,-,true,-,11
      reclassifyWithLLM,(id)->None,-,true,-,4
      loadReports,()->None,-,true,-,63
      loadMonthlyDetails,(year)->None,-,true,-,52
      viewMonthExpenses,(year;month)->None,-,false,-,18
      showMonthDetails,(year;month)->None,-,true,-,70
      regenerateMonthReport,(year;month)->None,-,true,-,11
      regenerateAllMonthlyReports,()->None,-,true,-,25
      generateMonthlyReport,()->None,-,true,-,7
      generateAllReports,()->None,-,true,-,7
      loadClarifications,()->None,-,true,-,14
      answerClarification,(id)->None,-,true,-,6
      saveProjectSettings,()->None,-,false,-,6
      formatCurrency,(amount)->None,-,false,-,1
      formatCurrencyWithCode,(amount)->None,-,false,-,8
      getStatusLabel,(s)->None,-,false,-,1
      getCategoryName,(c)->None,-,false,-,1
      showToast,(msg)->None,-,false,-,1
      changeExpenseStatus,(id;status)->None,-,true,-,6
      saveExpenseStatus,(id)->None,-,true,-,9
      checkDuplicates,(docId)->None,-,true,-,31
      reExtractData,(docId)->None,-,true,-,12
      updateOcrEngine,(engine)->None,-,false,-,4
      fillFieldsWithLLM,(docId)->None,-,true,-,49
      generateExpenseDoc,(expenseId)->None,-,true,-,18
      generateProjectSummary,(projectId)->None,-,true,-,19
      regenerateAllReports,()->None,-,true,-,32
      viewProjectDocs,(projectId)->None,-,true,-,42
      viewDocContent,(projectId;filename)->None,-,true,-,29
      renderMarkdown,(md)->None,-,false,-,3
      copyDocToClipboard,()->None,-,false,-,12
      downloadDocFile,()->None,-,false,-,16
      downloadPdf,(projectId;filename)->None,-,false,-,4
      viewDocHistory,(projectId;filename)->None,-,true,-,33
      viewDocVersion,(projectId;filename;commit)->None,-,true,-,19
      compareDocs,(projectId;filename;oldCommit)->None,-,true,-,61
      escapeHtml,(text)->None,-,false,-,5
      printDoc,()->None,-,false,-,31
      closeDocsModal,()->None,-,false,-,3
      initTimesheet,()->None,-,true,-,22
      loadWorkers,()->None,-,true,-,10
      loadContractors,()->None,-,true,-,19
      loadTimesheet,()->None,-,true,-,103
      toggleTimesheetBlock,(checkbox)->None,-,true,-,46
      updateTimesheetCell,(input)->None,-,false,-,14
      saveTimesheet,()->None,-,true,-,37
      updateTimesheetSummary,(year;month)->None,-,true,-,26
      showAddWorkerModal,()->None,-,false,-,10
      createWorker,(name;role;hourlyRate)->None,-,true,-,12
      loadIntegrations,()->None,-,true,-,33
      renderIntegrationCard,(integration)->None,-,false,-,26
      loadSyncLogs,()->None,-,true,-,28
      showAddIntegrationModal,()->None,-,false,-,10
      closeIntegrationModal,()->None,-,false,-,3
      updateProviderOptions,()->None,-,false,-,14
      updateCredentialFields,()->None,-,false,-,19
      saveIntegration,(event)->None,-,true,-,36
      verifyIntegration,(id)->None,-,true,-,16
      syncInvoices,(integrationId)->None,-,true,-,17
      syncAllInvoices,()->None,-,true,-,17
      uploadReport,(integrationId)->None,-,true,-,25
      uploadAllReports,()->None,-,true,-,16
      deleteIntegration,(id)->None,-,true,-,11
      loadAIConfig,()->None,-,true,-,38
      loadOCREngines,()->None,-,true,-,22
      loadDocumentTypes,()->None,-,true,-,19
      saveAIConfig,()->None,-,true,-,28
      testConnections,()->None,-,true,-,26
      updateModelList,()->None,-,false,-,28
      initLogStreams,()->None,-,false,-,5
      startLogStreamForPage,(service)->None,-,false,-,40
      switchLogTab,(service)->None,-,false,-,15
      copyLogs,(service)->None,-,false,-,13
      clearAllLogs,()->None,-,false,-,6
      reconnectAllLogs,()->None,-,false,-,10
      stopAllLogStreams,()->None,-,false,-,8
      isGlobalLogsOpen,()->None,-,false,-,4
      toggleGlobalLogs,()->None,-,false,-,16
      switchGlobalLogTab,(service)->None,-,false,-,11
      clearGlobalLogs,()->None,-,false,-,6
      copyGlobalLogs,()->None,-,false,-,15
      downloadGlobalLogs,()->None,-,false,-,21
      startLogStreamFor,(service)->None,-,false,-,39
      initGitTimesheet,()->None,-,true,-,15
      scanGitRepos,()->None,-,true,-,52
      displayGitAuthors,(authors)->None,-,false,-,34
      toggleGitAuthor,(authorName)->None,-,false,-,8
      selectAllGitAuthors,(select)->None,-,false,-,10
      displayGitRepoMapping,()->None,-,true,-,73
      selectAllReposForProject,(projectId)->None,-,false,-,31
      updateGitProjectMapping,(repoPath;projectId)->None,-,false,-,4
      checkGitTimesheetReady,()->None,-,false,-,7
      loadGitCommits,()->None,-,true,-,77
      generateGitTimesheet,()->None,-,true,-,81
      loadDocTemplates,()->None,-,true,-,34
      filterDocTemplates,(category)->None,-,false,-,7
      renderDocTemplates,()->None,-,false,-,49
      previewDocData,(templateId)->None,-,true,-,51
      closeDocPreviewModal,()->None,-,false,-,4
      downloadDemoDoc,(templateId)->None,-,true,-,19
      openDocGenerateModal,(templateId)->None,-,true,-,89
      closeDocGenerateModal,()->None,-,false,-,4
      generateDocument,(event;templateId)->None,-,true,-,43
      copyDocContent,()->None,-,false,-,7
      downloadDocContent,()->None,-,false,-,13
      editDocContent,()->None,-,false,-,12
      cancelDocEdit,()->None,-,false,-,6
      saveDocEdit,()->None,-,false,-,8
      loadDocAnnotations,()->None,-,true,-,55
      getDocTypeIcon,(type)->None,-,false,-,7
      saveDocAnnotation,(docId)->None,-,true,-,20
    function_docs:
      getPageFromUrl: retrieves page from url
      processAllExpensesForYear: processes all expenses for year
      getUrlParam: retrieves url param
      setUrlParam: updates url param
      setPageInUrl: updates page in url
      closeConfirmModal: stops confirm modal
      confirmModalCancel: validates modal cancel
      openConfirmModal: starts confirm modal
      navigateTo: navigate to
      apiCall: api call
      getDashboardLayout: retrieves dashboard layout
      saveDashboardLayout: caches dashboard layout
      toggleDashboardConfig: toggle dashboard config
      updateModuleSelect: updates module select
      addDashboardModule: creates dashboard module
      removeDashboardModule: deletes dashboard module
      resetDashboardConfig: reset dashboard config
      renderDashboard: formats dashboard
      loadDashboard: retrieves dashboard
      loadDashboardModules: retrieves dashboard modules
      loadRecentDocsModule: retrieves recent docs module
      loadCategoryModule: retrieves category module
      loadTopVendorsModule: retrieves top vendors module
      loadTimesheetModule: retrieves timesheet module
      loadGitActivityModule: retrieves git activity module
      loadMonthlyTrendModule: retrieves monthly trend module
      setupUploadListeners: initializes upload listeners
      handleFiles: handles files
      uploadFile: upload file
      pollDocumentStatus: poll document status
      loadRecentDocuments: retrieves recent documents
      getDocTypeName: retrieves doc type name
      deleteDocumentFromModal: deletes document from modal
      retryOcr: retry ocr
      normalizeExtractedData: normalize extracted data
      formatExtractedValue: formats extracted value
      showDocumentDetail: show document detail
      getFieldLabel: retrieves field label
      toggleEditMode: toggle edit mode
      saveExtractedData: caches extracted data
      createExpenseFromDoc: creates expense from doc
      createRevenueFromDoc: creates revenue from doc
      closeDocumentModal: stops document modal
      approveDocument: approve document
      loadProjects: retrieves projects
      showCreateProjectModal: show create project modal
      createProject: creates project
      editProject: updates project
      deleteProject: deletes project
      viewProjectExpenses: view project expenses
      loadProjectsForFilter: retrieves projects for filter
      getProjectName: retrieves project name
      initExpenseFilters: creates expense filters
      loadExpenses: retrieves expenses
      classifyRevenue: classify revenue
      showRevenueDetails: show revenue details
      deleteRevenue: deletes revenue
      convertToRevenue: converts to revenue
      convertToExpense: converts to expense
      toggleExpenseSelection: toggle expense selection
      toggleSelectAll: toggle select all
      updateBulkActionsBar: updates bulk actions bar
      clearSelection: deletes selection
      bulkAssignToProject: bulk assign to project
      showExpenseDetails: show expense details
      classifyExpense: classify expense
      reclassifyWithLLM: reclassify with llm
      loadReports: retrieves reports
      loadMonthlyDetails: retrieves monthly details
      viewMonthExpenses: view month expenses
      showMonthDetails: show month details
      regenerateMonthReport: regenerate month report
      regenerateAllMonthlyReports: regenerate all monthly reports
      generateMonthlyReport: creates monthly report
      generateAllReports: creates all reports
      loadClarifications: retrieves clarifications
      answerClarification: answer clarification
      saveProjectSettings: caches project settings
      formatCurrency: formats currency
      formatCurrencyWithCode: formats currency with code
      getStatusLabel: retrieves status label
      getCategoryName: retrieves category name
      showToast: show toast
      changeExpenseStatus: updates expense status
      saveExpenseStatus: caches expense status
      checkDuplicates: checks duplicates
      reExtractData: re extract data
      updateOcrEngine: updates ocr engine
      fillFieldsWithLLM: fill fields with llm
      generateExpenseDoc: creates expense doc
      generateProjectSummary: creates project summary
      regenerateAllReports: regenerate all reports
      viewProjectDocs: view project docs
      viewDocContent: view doc content
      renderMarkdown: formats markdown
      copyDocToClipboard: copy doc to clipboard
      downloadDocFile: download doc file
      downloadPdf: download pdf
      viewDocHistory: view doc history
      viewDocVersion: view doc version
      compareDocs: compare docs
      escapeHtml: escape html
      printDoc: logs doc
      closeDocsModal: stops docs modal
      initTimesheet: creates timesheet
      loadWorkers: retrieves workers
      loadContractors: retrieves contractors
      loadTimesheet: retrieves timesheet
      toggleTimesheetBlock: toggle timesheet block
      updateTimesheetCell: updates timesheet cell
      saveTimesheet: caches timesheet
      updateTimesheetSummary: updates timesheet summary
      showAddWorkerModal: show add worker modal
      createWorker: creates worker
      loadIntegrations: retrieves integrations
      renderIntegrationCard: formats integration card
      loadSyncLogs: retrieves sync logs
      showAddIntegrationModal: show add integration modal
      closeIntegrationModal: stops integration modal
      updateProviderOptions: updates provider options
      updateCredentialFields: updates credential fields
      saveIntegration: caches integration
      verifyIntegration: validates integration
      syncInvoices: sync invoices
      syncAllInvoices: sync all invoices
      uploadReport: upload report
      uploadAllReports: upload all reports
      deleteIntegration: deletes integration
      loadAIConfig: retrieves ai config
      loadOCREngines: retrieves ocr engines
      loadDocumentTypes: retrieves document types
      saveAIConfig: caches ai config
      testConnections: checks connections
      updateModelList: updates model list
      initLogStreams: creates log streams
      startLogStreamForPage: starts log stream for page
      switchLogTab: switch log tab
      copyLogs: copy logs
      clearAllLogs: deletes all logs
      reconnectAllLogs: reconnect all logs
      stopAllLogStreams: stops all log streams
      isGlobalLogsOpen: is global logs open
      toggleGlobalLogs: toggle global logs
      switchGlobalLogTab: switch global log tab
      clearGlobalLogs: deletes global logs
      copyGlobalLogs: copy global logs
      downloadGlobalLogs: download global logs
      startLogStreamFor: starts log stream for
      initGitTimesheet: creates git timesheet
      scanGitRepos: scan git repos
      displayGitAuthors: logs git authors
      toggleGitAuthor: toggle git author
      selectAllGitAuthors: retrieves all git authors
      displayGitRepoMapping: logs git repo mapping
      selectAllReposForProject: retrieves all repos for project
      updateGitProjectMapping: updates git project mapping
      checkGitTimesheetReady: checks git timesheet ready
      loadGitCommits: retrieves git commits
      generateGitTimesheet: creates git timesheet
      loadDocTemplates: retrieves doc templates
      filterDocTemplates: filters doc templates
      renderDocTemplates: formats doc templates
      previewDocData: preview doc data
      closeDocPreviewModal: stops doc preview modal
      downloadDemoDoc: download demo doc
      openDocGenerateModal: starts doc generate modal
      closeDocGenerateModal: stops doc generate modal
      generateDocument: creates document
      copyDocContent: copy doc content
      downloadDocContent: download doc content
      editDocContent: updates doc content
      cancelDocEdit: cancel doc edit
      saveDocEdit: caches doc edit
      loadDocAnnotations: retrieves doc annotations
      getDocTypeIcon: retrieves doc type icon
      saveDocAnnotation: caches doc annotation
  brgenerator/tests/conftest.py:
    imports[4]: pytest,os,unittest.mock.AsyncMock,unittest.mock.MagicMock
    exports[4]: env_setup,mock_llm_client,temp_output_dir,sample_yaml_form
    functions[4]{name,sig,decorators,async,category,lines}:
      env_setup,(monkeypatch)->None,pytest.fixture,false,-,6
      mock_llm_client,()->None,pytest.fixture,false,-,26
      temp_output_dir,(tmp_path)->None,pytest.fixture,false,-,5
      sample_yaml_form,()->None,pytest.fixture,false,-,61
    function_docs:
      env_setup: env setup
      mock_llm_client: mock llm client
      temp_output_dir: temp output dir
      sample_yaml_form: sample yaml form
  brgenerator/tests/__init__.py:
  brgenerator/tests/test_validators.py:
    imports[20]: pytest,datetime.date,decimal.Decimal,br_doc_generator.models.ProjectInput,br_doc_generator.models.ProjectBasicInfo,br_doc_generator.models.CompanyInfo,br_doc_generator.models.ProjectTimeline,br_doc_generator.models.Milestone,br_doc_generator.models.InnovationInfo,br_doc_generator.models.MethodologyInfo,br_doc_generator.models.RiskFactor,br_doc_generator.models.ResearchMethod,br_doc_generator.models.ProjectCosts,br_doc_generator.models.PersonnelEmploymentCost,br_doc_generator.models.PersonnelCivilCost
    exports[8]: validation_config,sample_project_input,valid_document,TestStructureValidator,TestLegalComplianceValidator,TestFinancialValidator,TestNIPValidation,TestProjectCostsCalculation
    classes[5]{name,bases,decorators,props,methods}:
      TestStructureValidator,-,-,0,3
      TestLegalComplianceValidator,-,-,0,3
      TestFinancialValidator,-,-,0,2
      TestNIPValidation,-,-,0,2
      TestProjectCostsCalculation,-,-,0,3
    class_details:
      TestStructureValidator:
        doc: Tests for StructureValidator.
        methods[3]{name,sig,decorators,async,lines}:
          test_valid_document_passes,(validation_config;valid_document;sample_project_input)->None,-,false,14
          test_missing_sections_fails,(validation_config;sample_project_input)->None,-,false,19
          test_empty_document_fails,(validation_config;sample_project_input)->None,-,false,12
      TestLegalComplianceValidator:
        doc: Tests for LegalComplianceValidator.
        methods[3]{name,sig,decorators,async,lines}:
          test_valid_document_passes,(validation_config;valid_document;sample_project_input)->None,-,false,13
          test_missing_keywords_fails,(validation_config;sample_project_input)->None,-,false,24
          test_nip_validation,(validation_config;sample_project_input)->None,-,false,22
      TestFinancialValidator:
        doc: Tests for FinancialValidator.
        methods[2]{name,sig,decorators,async,lines}:
          test_valid_costs_pass,(validation_config;valid_document;sample_project_input)->None,-,false,12
          test_missing_costs_fails,(validation_config;sample_project_input)->None,-,false,22
      TestNIPValidation:
        doc: Tests for NIP checksum validation.
        methods[2]{name,sig,decorators,async,lines}:
          test_valid_nips,()->None,-,false,13
          test_invalid_nips,()->None,-,false,13
      TestProjectCostsCalculation:
        doc: Tests for cost calculations.
        methods[3]{name,sig,decorators,async,lines}:
          test_personnel_cost_calculation,()->None,-,false,15
          test_material_cost_calculation,()->None,-,false,11
          test_total_costs_aggregation,(sample_project_input)->None,-,false,17
    functions[3]{name,sig,decorators,async,category,lines}:
      validation_config,()->None,pytest.fixture,false,-,3
      sample_project_input,()->None,pytest.fixture,false,-,78
      valid_document,()->None,pytest.fixture,false,-,82
    function_docs:
      validation_config: validation config
      sample_project_input: sample project input
      valid_document: valid document
  brgenerator/tests/test_e2e.py:
    imports[20]: pytest,asyncio,tempfile,pathlib.Path,datetime.date,decimal.Decimal,br_doc_generator.BRDocumentationPipeline,br_doc_generator.FormGenerator,br_doc_generator.ValidationPipeline,br_doc_generator.DocumentGenerator,br_doc_generator.PDFRenderer,br_doc_generator.LLMClient,br_doc_generator.config.AppConfig,br_doc_generator.config.load_config,br_doc_generator.models.ProjectInput
    exports[5]: TestFormGeneratorE2E,TestValidationPipelineE2E,TestCLICommands,TestPDFRendering,TestCostCalculations
    classes[5]{name,bases,decorators,props,methods}:
      TestFormGeneratorE2E,-,-,0,2
      TestValidationPipelineE2E,-,-,0,4
      TestCLICommands,-,-,0,2
      TestPDFRendering,-,-,0,2
      TestCostCalculations,-,-,0,2
    class_details:
      TestFormGeneratorE2E:
        doc: E2E tests for form generation workflow.
        methods[2]{name,sig,decorators,async,lines}:
          test_generate_and_load_form,()->None,-,false,29
          test_form_validation,()->None,-,false,45
      TestValidationPipelineE2E:
        doc: E2E tests for validation pipeline.
        methods[4]{name,sig,decorators,async,lines}:
          sample_project,()->None,pytest.fixture,false,59
          sample_document,()->None,pytest.fixture,false,48
          test_validation_pipeline_runs,(sample_project;sample_document)->None,-,false,24
          test_validation_detects_issues,(sample_project)->None,-,false,25
      TestCLICommands:
        doc: Test CLI command execution (without actual LLM).
        methods[2]{name,sig,decorators,async,lines}:
          test_generate_form_command,()->None,-,false,17
          test_info_command,()->None,-,false,14
      TestPDFRendering:
        doc: Test PDF rendering functionality.
        methods[2]{name,sig,decorators,async,lines}:
          test_pdf_renderer_initialization,()->None,-,false,9
          test_render_simple_markdown,()->None,-,false,29
      TestCostCalculations:
        doc: Test cost calculation accuracy.
        methods[2]{name,sig,decorators,async,lines}:
          test_personnel_employment_costs,()->None,-,false,17
          test_project_costs_aggregation,()->None,-,false,42
  brgenerator/src/br_doc_generator/config.py:
    imports[8]: os,enum.Enum,pathlib.Path,typing.Optional,pydantic.Field,pydantic.field_validator,pydantic_settings.BaseSettings,pydantic_settings.SettingsConfigDict
    exports[13]: LLMProvider,ValidationLevel,PDFTemplate,LogFormat,LLMConfig,ValidationConfig,PDFConfig,OutputConfig,LogConfig,CompanyDefaults
    types[4]{name,kind,values,def}:
      LLMProvider,enum,"OPENROUTER=\"openrouter\"|OLLAMA=\"ollama\"|ANTHROPIC=\"anthropic\"|OPENAI=\"openai\"","-"
      ValidationLevel,enum,"STRUCTURE=\"structure\"|CONTENT=\"content\"|LEGAL=\"legal\"|FINANCIAL=\"financial\"","-"
      PDFTemplate,enum,"PROFESSIONAL=\"professional\"|MINIMAL=\"minimal\"|DETAILED=\"detailed\"","-"
      LogFormat,enum,"JSON=\"json\"|CONSOLE=\"console\"","-"
    classes[11]{name,bases,decorators,props,methods}:
      LLMProvider,str|Enum,-,0,0
      ValidationLevel,str|Enum,-,0,0
      PDFTemplate,str|Enum,-,0,0
      LogFormat,str|Enum,-,0,0
      LLMConfig,BaseSettings,-,6,1
      ValidationConfig,BaseSettings,-,3,1
      PDFConfig,BaseSettings,-,7,1
      OutputConfig,BaseSettings,-,3,1
      LogConfig,BaseSettings,-,3,1
      CompanyDefaults,BaseSettings,-,4,0
      AppConfig,BaseSettings,-,6,1
    class_details:
      LLMProvider:
        doc: Supported LLM providers.
      ValidationLevel:
        doc: Validation pipeline stages.
      PDFTemplate:
        doc: Available PDF templates.
      LogFormat:
        doc: Log output formats.
      LLMConfig:
        doc: LLM provider configuration.
        properties[6]: "openrouter_api_key: Optional[str]","temperature: float","max_tokens: int","timeout: int","max_retries: int","retry_delay: int"
        methods[1]{name,sig,decorators,async,lines}:
          get_litellm_params,()->dict,-,false,23
      ValidationConfig:
        doc: Validation pipeline configuration.
        properties[3]: "max_iterations: int","min_quality_score: float","verbose: bool"
        methods[1]{name,sig,decorators,async,lines}:
          parse_levels,(v)->None,field_validator|classmethod,false,4
      PDFConfig:
        doc: PDF rendering configuration.
        properties[7]: "template: PDFTemplate","company_logo: Optional[Path]","margin_top: int","margin_bottom: int","margin_left: int","margin_right: int","font_family: str"
        methods[1]{name,sig,decorators,async,lines}:
          validate_logo_path,(v)->None,field_validator|classmethod,false,6
      OutputConfig:
        doc: Output configuration.
        properties[3]: "output_dir: Path","date_format: str","document_language: str"
        methods[1]{name,sig,decorators,async,lines}:
          ensure_output_dir,(v)->None,field_validator|classmethod,false,4
      LogConfig:
        doc: Logging configuration.
        properties[3]: "level: str","format: LogFormat","dir: Path"
        methods[1]{name,sig,decorators,async,lines}:
          ensure_log_dir,(v)->None,field_validator|classmethod,false,4
      CompanyDefaults:
        doc: Default company information.
        properties[4]: "company_name: Optional[str]","company_nip: Optional[str]","company_regon: Optional[str]","fiscal_year: int"
      AppConfig:
        doc: Main application configuration.
        properties[6]: "llm: LLMConfig","validation: ValidationConfig","pdf: PDFConfig","output: OutputConfig","log: LogConfig","company: CompanyDefaults"
        methods[1]{name,sig,decorators,async,lines}:
          from_env,"(env_file:Optional[str]=None)->\"AppConfig\"",classmethod,false,14
    functions[2]{name,sig,decorators,async,category,lines}:
      load_config,"(env_file:Optional[str]=None)->AppConfig",-,false,-,3
      get_config,()->AppConfig,-,false,-,6
    function_docs:
      load_config: retrieves config
      get_config: retrieves config
  brgenerator/src/br_doc_generator/cli.py:
    imports[11]: asyncio,pathlib.Path,typing.Optional,typing.List,typer,rich.console.Console,rich.progress.Progress,rich.progress.SpinnerColumn,rich.progress.TextColumn,rich.table.Table,rich.panel.Panel
    exports[8]: get_config,generate_form,generate,validate,render,info,web_server,main
    functions[8]{name,sig,decorators,async,category,lines}:
      get_config,()->None,-,false,-,4
      generate_form,"(output:str=typer.Option('project_form.yaml'; '--output'; '-o'; help='Ścieżka do pliku wyjściowego formularza YAML');project_name:Optional[str]=typer.Option(None; '--name'; '-n'; help='Nazwa projektu do wstępnego wypełnienia');fiscal_year:Optional[int]=typer.Option(None; '--year'; '-y'; help='Rok podatkowy'))->None",app.command,false,-,43
      generate,"(input_file:str=typer.Option(...; '--input'; '-i'; help='Ścieżka do formularza YAML');output_dir:str=typer.Option('./output'; '--output'; '-o'; help='Katalog wyjściowy');format:str=typer.Option('both'; '--format'; '-f'; help='Format wyjściowy: pdf; md; both');validation_levels:Optional[str]=typer.Option(None; '--validation'; '-v'; help='Poziomy walidacji (oddzielone przecinkami): structure;content;legal;financial');max_iterations:int=typer.Option(3; '--max-iter'; help='Maksymalna liczba iteracji poprawek'))->None",app.command,false,-,117
      validate,"(input_file:str=typer.Option(...; '--input'; '-i'; help='Ścieżka do dokumentacji markdown');report:str=typer.Option('validation_report.yaml'; '--report'; '-r'; help='Ścieżka do raportu walidacji');levels:Optional[str]=typer.Option('structure;content;legal;financial'; '--levels'; '-l'; help='Poziomy walidacji do uruchomienia'))->None",app.command,false,-,187
      render,"(input_file:str=typer.Option(...; '--input'; '-i'; help='Ścieżka do dokumentacji markdown');output:str=typer.Option('documentation.pdf'; '--output'; '-o'; help='Ścieżka do pliku PDF wyjściowego');template:str=typer.Option('professional'; '--template'; '-t'; help='Szablon PDF: professional; minimal; detailed');logo:Optional[str]=typer.Option(None; '--logo'; help='Ścieżka do logo firmy');company_name:Optional[str]=typer.Option(None; '--company'; help='Nazwa firmy (do nagłówka/stopki)'))->None",app.command,false,-,76
      info,()->None,app.command,false,-,35
      web_server,"(host:str=typer.Option('0.0.0.0'; '--host'; '-h'; help='Host do nasłuchiwania');port:int=typer.Option(8000; '--port'; '-p'; help='Port do nasłuchiwania');reload:bool=typer.Option(False; '--reload'; '-r'; help='Automatyczne przeładowanie przy zmianach'))->None",app.command,false,-,42
      main,()->None,-,false,-,3
    function_docs:
      get_config: retrieves config
      generate_form: creates form
      generate: creates
      validate: validates
      render: formats
      info: info
      web_server: web server
      main: main
  brgenerator/src/br_doc_generator/__init__.py:
    imports[20]: config.AppConfig,config.LLMConfig,config.ValidationConfig,config.PDFConfig,config.load_config,models.ProjectInput,models.CompanyInfo,models.ProjectBasicInfo,models.ProjectTimeline,models.Timeline,models.Milestone,models.InnovationInfo,models.Innovation,models.MethodologyInfo,models.Methodology
    exports[1]: BRDocumentationPipeline
    classes[1]{name,bases,decorators,props,methods}:
      BRDocumentationPipeline,-,-,0,6
    class_details:
      BRDocumentationPipeline:
        doc: High-level pipeline for generating B+R documentation.
        methods[6]{name,sig,decorators,async,lines}:
          __init__,"(config:AppConfig)->None",-,false,17
          from_env,"(env_path:str='.env')->\"BRDocumentationPipeline\"",classmethod,false,12
          generate,"(form_path:str;output_dir:str='./output';validation_levels:list=None;max_iterations:int=3;output_format:str='pdf')->PipelineResult",-,true,85
          _form_to_project_input,"(form_data:dict)->ProjectInput",-,false,108
          load_form,"(form_path:str)->dict",-,false,3
          save_validation_report,"(result:PipelineResult;output_path:str)->None",-,false,34
  brgenerator/src/br_doc_generator/web.py:
    imports[20]: asyncio,tempfile,datetime.date,decimal.Decimal,pathlib.Path,typing.Optional,fastapi.FastAPI,fastapi.HTTPException,fastapi.UploadFile,fastapi.File,fastapi.Form,fastapi.BackgroundTasks,fastapi.middleware.cors.CORSMiddleware,fastapi.responses.FileResponse,fastapi.responses.HTMLResponse
    exports[13]: FormGenerationRequest,ValidationRequest,ValidationResponse,HealthResponse,ConfigResponse,root,health_check,get_config,generate_form,validate_document
    classes[6]{name,bases,decorators,props,methods}:
      FormGenerationRequest,BaseModel,-,2,0
      ValidationRequest,BaseModel,-,2,0
      ValidationResponse,BaseModel,-,4,0
      HealthResponse,BaseModel,-,3,0
      ConfigResponse,BaseModel,-,4,0
      PDFRenderRequest,BaseModel,-,2,0
    class_details:
      FormGenerationRequest:
        doc: Request to generate a new form.
        properties[2]: "project_name: str","fiscal_year: Optional[int]"
      ValidationRequest:
        doc: Request to validate documentation.
        properties[2]: "markdown_content: str","validation_levels: list[str]"
      ValidationResponse:
        doc: Validation result response.
        properties[4]: "status: str","quality_score: float","stages: list[dict]","issues_count: int"
      HealthResponse:
        doc: Health check response.
        properties[3]: "status: str","version: str","llm_provider: str"
      ConfigResponse:
        doc: Configuration info response.
        properties[4]: "llm_provider: str","llm_model: str","validation_levels: list[str]","pdf_template: str"
      PDFRenderRequest:
        doc: Request to render PDF.
        properties[2]: "markdown_content: str","template: str"
    functions[7]{name,sig,decorators,async,category,lines}:
      root,()->None,app.get,true,-,243
      health_check,()->None,app.get,true,-,7
      get_config,()->None,app.get,true,-,8
      generate_form,"(request:FormGenerationRequest)->None",app.post,true,-,8
      validate_document,"(request:ValidationRequest)->None",app.post,true,-,65
      render_pdf,"(request:PDFRenderRequest)->None",app.post,true,-,15
      run_server,"(host:str='0.0.0.0';port:int=8000;reload:bool=False)->None",-,false,-,9
    function_docs:
      root: root
      health_check: health check
      get_config: retrieves config
      generate_form: creates form
      validate_document: validates document
      render_pdf: formats pdf
      run_server: starts server
  brgenerator/src/br_doc_generator/llm_client.py:
    imports[11]: asyncio,json,typing.Any,typing.Optional,structlog,litellm.acompletion,litellm.completion,pydantic.BaseModel,config.LLMConfig,config.LLMProvider,config.get_config
    exports[3]: LLMResponse,LLMClient,get_llm_client
    classes[2]{name,bases,decorators,props,methods}:
      LLMResponse,BaseModel,-,5,0
      LLMClient,-,-,0,9
    class_details:
      LLMResponse:
        doc: Response from LLM.
        properties[5]: "content: str","model: str","usage: dict[str, int]","finish_reason: Optional[str]","raw_response: Optional[dict]"
      LLMClient:
        doc: LiteLLM-based client for multiple LLM providers.
        methods[9]{name,sig,decorators,async,lines}:
          __init__,"(config:Optional[LLMConfig]=None)->None",-,false,4
          _ensure_connection,()->None,-,true,23
          _get_model_name,()->str,-,false,10
          _get_api_params,"()->dict[str, Any]",-,false,17
          _call_llm,"(messages:list[dict[str;str]];max_tokens:Optional[int]=None;temperature:Optional[float]=None)->LLMResponse",-,true,44
          generate,"(prompt:str;system_prompt:Optional[str]=None;max_tokens:Optional[int]=None;temperature:Optional[float]=None)->str",-,true,33
          generate_structured,"(prompt:str;system_prompt:Optional[str]=None;output_schema:Optional[dict]=None)->dict[str, Any]",-,true,45
          validate_content,"(content:str;validation_criteria:list[str];context:Optional[str]=None)->dict[str, Any]",-,true,52
          improve_content,"(content:str;issues:list[dict[str;str]];instructions:Optional[str]=None)->str",-,true,47
    functions[1]{name,sig,decorators,async,category,lines}:
      get_llm_client,"(config:Optional[LLMConfig]=None)->LLMClient",-,false,-,6
    function_docs:
      get_llm_client: retrieves llm client
  brgenerator/src/br_doc_generator/models.py:
    imports[11]: datetime.date,datetime,decimal.Decimal,enum.Enum,pathlib.Path,typing.Any,typing.Optional,pydantic.BaseModel,pydantic.Field,pydantic.field_validator,pydantic.model_validator
    exports[25]: InnovationType,InnovationScale,CostCategory,ValidationStatus,IssueSeverity,CompanyInfo,ProjectBasicInfo,Milestone,ProjectTimeline,InnovationInfo
    types[5]{name,kind,values,def}:
      InnovationType,enum,"PRODUCT=\"product\"|PROCESS=\"process\"|MIXED=\"mixed\"","-"
      InnovationScale,enum,"COMPANY=\"company\"|INDUSTRY=\"industry\"|GLOBAL=\"global\"","-"
      CostCategory,enum,"PERSONNEL_EMPLOYMENT=\"personnel_employment\"|PERSONNEL_CIVIL=\"personnel_civil\"|MATERIALS=\"materials\"|EQUIPMENT=\"equipment\"|DEPRECIATION=\"depreciation\"|EXPERTISE=\"expertise\"|EXTERNAL_RESEARCH=\"external_research\"|IP_COSTS=\"ip_costs\"","-"
      ValidationStatus,enum,"PASSED=\"passed\"|FAILED=\"failed\"|WARNING=\"warning\"","-"
      IssueSeverity,enum,"CRITICAL=\"critical\"|ERROR=\"error\"|WARNING=\"warning\"|INFO=\"info\"","-"
    classes[25]{name,bases,decorators,props,methods}:
      InnovationType,str|Enum,-,0,0
      InnovationScale,str|Enum,-,0,0
      CostCategory,str|Enum,-,0,0
      ValidationStatus,str|Enum,-,0,0
      IssueSeverity,str|Enum,-,0,0
      CompanyInfo,BaseModel,-,4,1
      ProjectBasicInfo,BaseModel,-,4,0
      Milestone,BaseModel,-,4,0
      ProjectTimeline,BaseModel,-,3,1
      InnovationInfo,BaseModel,-,2,0
      ResearchMethod,BaseModel,-,3,0
      RiskFactor,BaseModel,-,3,0
      MethodologyInfo,BaseModel,-,0,1
      PersonnelEmploymentCost,BaseModel,-,4,2
      PersonnelCivilCost,BaseModel,-,4,1
      MaterialCost,BaseModel,-,6,1
      ExternalServiceCost,BaseModel,-,4,1
      ProjectCosts,BaseModel,-,4,6
      ExistingFile,BaseModel,-,2,0
      DocumentationConfig,BaseModel,-,3,0
      ProjectInput,BaseModel,-,6,0
      ValidationIssue,BaseModel,-,5,0
      CorrectionApplied,BaseModel,-,4,0
      ValidationResult,BaseModel,-,7,2
      PipelineResult,BaseModel,-,8,2
    class_details:
      InnovationType:
        doc: Type of innovation in the project.
      InnovationScale:
        doc: Scale of innovation.
      CostCategory:
        doc: B+R cost categories according to Polish tax law.
      ValidationStatus:
        doc: Status of validation result.
      IssueSeverity:
        doc: Severity level of validation issue.
      CompanyInfo:
        doc: Company information for documentation.
        properties[4]: "name: str","nip: str","regon: Optional[str]","address: Optional[str]"
        methods[1]{name,sig,decorators,async,lines}:
          validate_nip,"(v:str)->str",field_validator|classmethod,false,7
      ProjectBasicInfo:
        doc: Basic project information.
        properties[4]: "name: str","code: Optional[str]","fiscal_year: int","company: CompanyInfo"
      Milestone:
        doc: Project milestone.
        properties[4]: "milestone_date: date","name: str","description: Optional[str]","deliverables: list[str]"
      ProjectTimeline:
        doc: Project timeline with milestones.
        properties[3]: "start_date: date","end_date: date","milestones: list[Milestone]"
        methods[1]{name,sig,decorators,async,lines}:
          validate_dates,"()->\"ProjectTimeline\"",model_validator,false,4
      InnovationInfo:
        doc: Innovation characteristics for B+R qualification.
        properties[2]: "type: InnovationType","description: str"
      ResearchMethod:
        doc: Research method description.
        properties[3]: "name: str","description: Optional[str]","tools: list[str]"
      RiskFactor:
        doc: Research risk factor.
        properties[3]: "description: str","probability: Optional[str]","mitigation: Optional[str]"
      MethodologyInfo:
        doc: Research methodology for B+R qualification.
        methods[1]{name,sig,decorators,async,lines}:
          validate_br_criteria,"()->\"MethodologyInfo\"",model_validator,false,8
      PersonnelEmploymentCost:
        doc: Employee cost (umowa o pracę).
        properties[4]: "name: str","role: str","gross_salary: Decimal","months: int"
        methods[2]{name,sig,decorators,async,lines}:
          total_cost,()->Decimal,property,false,3
          deduction_amount,()->Decimal,property,false,3
      PersonnelCivilCost:
        doc: Civil contract cost (umowa zlecenie/dzieło).
        properties[4]: "name: str","role: str","amount: Decimal","description: Optional[str]"
        methods[1]{name,sig,decorators,async,lines}:
          deduction_amount,()->Decimal,property,false,3
      MaterialCost:
        doc: Material or equipment cost.
        properties[6]: "name: str","category: CostCategory","amount: Decimal","description: Optional[str]","invoice_number: Optional[str]","vendor: Optional[str]"
        methods[1]{name,sig,decorators,async,lines}:
          deduction_amount,()->Decimal,property,false,3
      ExternalServiceCost:
        doc: "External service cost (ekspertyzy, usługi naukowe)."
        properties[4]: "name: str","provider: str","amount: Decimal","description: Optional[str]"
        methods[1]{name,sig,decorators,async,lines}:
          deduction_amount,()->Decimal,property,false,3
      ProjectCosts:
        doc: All project costs for B+R calculation.
        properties[4]: "personnel_employment: list[PersonnelEmploymentCost]","personnel_civil: list[PersonnelCivilCost]","materials: list[MaterialCost]","external_services: list[ExternalServiceCost]"
        methods[6]{name,sig,decorators,async,lines}:
          total_personnel_employment,()->Decimal,property,false,2
          total_personnel_civil,()->Decimal,property,false,2
          total_materials,()->Decimal,property,false,2
          total_external_services,()->Decimal,property,false,2
          total_costs,()->Decimal,property,false,7
          total_deduction,()->Decimal,property,false,11
      ExistingFile:
        doc: Reference to existing documentation file.
        properties[2]: "path: Path","description: Optional[str]"
      DocumentationConfig:
        doc: Documentation generation configuration.
        properties[3]: "existing_files: list[ExistingFile]","include_appendices: bool","language: str"
      ProjectInput:
        doc: Complete project input for documentation generation.
        properties[6]: "project: ProjectBasicInfo","timeline: ProjectTimeline","innovation: InnovationInfo","methodology: MethodologyInfo","costs: ProjectCosts","documentation: DocumentationConfig"
      ValidationIssue:
        doc: Single validation issue.
        properties[5]: "type: str","severity: IssueSeverity","location: str","message: str","suggestion: Optional[str]"
      CorrectionApplied:
        doc: Record of automatic correction.
        properties[4]: "location: str","original: str","corrected: str","reason: str"
      ValidationResult:
        doc: Result of a validation stage.
        properties[7]: "stage: str","timestamp: datetime","status: ValidationStatus","score: float","issues: list[ValidationIssue]","corrections_applied: list[CorrectionApplied]","metadata: dict[str, Any]"
        methods[2]{name,sig,decorators,async,lines}:
          has_critical_issues,()->bool,property,false,2
          has_errors,()->bool,property,false,5
      PipelineResult:
        doc: Complete result of documentation pipeline.
        properties[8]: "status: ValidationStatus","quality_score: float","validation_stages: list[ValidationResult]","output_path: Optional[Path]","markdown_content: Optional[str]","generation_time_seconds: float","iterations_used: int","errors: list[str]"
        methods[2]{name,sig,decorators,async,lines}:
          to_yaml,()->str,-,false,8
          save_validation_report,"(path:Path)->None",-,false,3
  brgenerator/src/br_doc_generator/validators/content.py:
    imports[6]: structlog,models.IssueSeverity,models.ValidationResult,models.ValidationStatus,base.BaseValidator,base.ValidationContext
    exports[1]: ContentValidator
    classes[1]{name,bases,decorators,props,methods}:
      ContentValidator,BaseValidator,-,0,7
    class_details:
      ContentValidator:
        doc: Validates documentation content quality.
        methods[7]{name,sig,decorators,async,lines}:
          stage_name,()->str,property,false,2
          validation_criteria,"()->list[str]",property,false,11
          validate,"(context:ValidationContext)->ValidationResult",-,true,34
          _llm_validate,"(context:ValidationContext)->list",-,true,47
          _build_project_context,(project_input)->str,-,false,11
          _check_data_consistency,"(context:ValidationContext)->list",-,false,59
          _get_correction_instructions,()->str,-,false,8
  brgenerator/src/br_doc_generator/validators/base.py:
    imports[14]: abc.ABC,abc.abstractmethod,dataclasses.dataclass,dataclasses.field,datetime,typing.Any,typing.Optional,structlog,models.CorrectionApplied,models.IssueSeverity,models.ProjectInput,models.ValidationIssue,models.ValidationResult,models.ValidationStatus
    exports[2]: ValidationContext,BaseValidator
    classes[2]{name,bases,decorators,props,methods}:
      ValidationContext,-,dataclass,0,3
      BaseValidator,ABC,-,0,11
    class_details:
      ValidationContext:
        doc: Context passed through validation pipeline.
        fields[6]{n,t,default,factory}:
          project_input,ProjectInput,"-","-"
          markdown_content,str,"-","-"
          current_iteration,int,"0","-"
          max_iterations,int,"3","-"
          previous_results,"list[ValidationResult]","-",list
          metadata,"dict[str, Any]","-",dict
        methods[3]{name,sig,decorators,async,lines}:
          add_result,"(result:ValidationResult)->None",-,false,3
          has_critical_issues,()->bool,property,false,3
          overall_score,()->float,property,false,5
      BaseValidator:
        doc: Abstract base class for validators.
        methods[11]{name,sig,decorators,async,lines}:
          __init__,"(use_llm:bool=True)->None",-,false,9
          stage_name,()->str,property|abstractmethod,false,3
          validation_criteria,"()->list[str]",property|abstractmethod,false,3
          get_llm_client,()->None,-,true,6
          validate,"(context:ValidationContext)->ValidationResult",abstractmethod,true,11
          auto_correct,"(context:ValidationContext;issues:list[ValidationIssue])->tuple[str, list[CorrectionApplied]]",-,true,55
          _get_correction_instructions,()->str,-,false,3
          create_result,"(status:ValidationStatus;score:float;issues:list[ValidationIssue];corrections:Optional[list[CorrectionApplied]]=None;metadata:Optional[dict]=None)->ValidationResult",-,false,18
          create_issue,"(issue_type:str;severity:IssueSeverity;location:str;message:str;suggestion:Optional[str]=None)->ValidationIssue",-,false,16
          calculate_score_from_issues,"(issues:list[ValidationIssue])->float",staticmethod,false,15
          determine_status,"(score:float;issues:list[ValidationIssue])->ValidationStatus",staticmethod,false,10
  brgenerator/src/br_doc_generator/validators/structure.py:
    imports[8]: re,typing.Optional,structlog,models.IssueSeverity,models.ValidationResult,models.ValidationStatus,base.BaseValidator,base.ValidationContext
    exports[2]: REQUIRED_SECTIONS,StructureValidator
    const[1]{n,t,v,keys}:
      REQUIRED_SECTIONS,Dict,"{     \"executive_summary\": {         \"patterns\": [r\"#+ *(?:streszczenie|executive summary|podsumowanie)\", r\"## *1\\.? ...","-"
    classes[1]{name,bases,decorators,props,methods}:
      StructureValidator,BaseValidator,-,0,10
    class_details:
      StructureValidator:
        doc: Validates markdown document structure.
        methods[10]{name,sig,decorators,async,lines}:
          stage_name,()->str,property,false,2
          validation_criteria,"()->list[str]",property,false,9
          validate,"(context:ValidationContext)->ValidationResult",-,true,54
          _has_title,"(content:str)->bool",-,false,7
          _check_required_sections,"(content:str)->list",-,false,25
          _check_heading_hierarchy,"(content:str)->list",-,false,25
          _check_section_lengths,"(content:str)->list",-,false,23
          _check_markdown_syntax,"(content:str)->list",-,false,38
          _count_sections,"(content:str)->int",-,false,3
          _get_correction_instructions,()->str,-,false,7
  brgenerator/src/br_doc_generator/validators/financial.py:
    imports[8]: re,decimal.Decimal,structlog,models.IssueSeverity,models.ValidationResult,models.ValidationStatus,base.BaseValidator,base.ValidationContext
    exports[2]: DEDUCTION_RATES,FinancialValidator
    const[1]{n,t,v,keys}:
      DEDUCTION_RATES,Dict,"{     \"personnel_employment\": Decimal(\"2.0\"),    # 200% for employees     \"personnel_civil\": Decimal(\"2.0\"),         ...","-"
    classes[1]{name,bases,decorators,props,methods}:
      FinancialValidator,BaseValidator,-,0,9
    class_details:
      FinancialValidator:
        doc: Validates financial calculations and cost data.
        methods[9]{name,sig,decorators,async,lines}:
          stage_name,()->str,property,false,2
          validation_criteria,"()->list[str]",property,false,9
          validate,"(context:ValidationContext)->ValidationResult",-,true,46
          _validate_cost_totals,(costs)->list,-,false,32
          _validate_deductions,(costs)->list,-,false,29
          _check_document_amounts,"(content:str;costs)->list",-,false,45
          _amount_in_document,"(target:float;found_amounts:set;tolerance:float=1.0)->bool",-,false,6
          _check_personnel_allocations,(costs)->list,-,false,35
          _get_correction_instructions,()->str,-,false,8
  brgenerator/src/br_doc_generator/validators/__init__.py:
    imports[7]: base.BaseValidator,base.ValidationContext,structure.StructureValidator,content.ContentValidator,legal.LegalComplianceValidator,financial.FinancialValidator,pipeline.ValidationPipeline
  brgenerator/src/br_doc_generator/validators/legal.py:
    imports[7]: re,structlog,models.IssueSeverity,models.ValidationResult,models.ValidationStatus,base.BaseValidator,base.ValidationContext
    exports[3]: BR_LEGAL_REQUIREMENTS,NIP_PATTERN,LegalComplianceValidator
    const[2]{n,t,v,keys}:
      BR_LEGAL_REQUIREMENTS,Dict,"{     \"systematicity\": {         \"description\": \"Systematyczność - projekt realizowany zgodnie z harmonogramem\",     ...","-"
      NIP_PATTERN,"-","r'\\b\\d{3}[-\\s]?\\d{3}[-\\s]?\\d{2}[-\\s]?\\d{2}\\b|\\b\\d{10}\\b'","-"
    classes[1]{name,bases,decorators,props,methods}:
      LegalComplianceValidator,BaseValidator,-,0,11
    class_details:
      LegalComplianceValidator:
        doc: Validates documentation against Polish B+R legal requirements.
        methods[11]{name,sig,decorators,async,lines}:
          stage_name,()->str,property,false,2
          validation_criteria,"()->list[str]",property,false,10
          validate,"(context:ValidationContext)->ValidationResult",-,true,48
          _check_br_criteria,"(content:str)->list",-,false,20
          _check_nip,"(context:ValidationContext)->list",-,false,32
          _check_cost_categories,"(content:str)->list",-,false,28
          _check_declarations,"(content:str)->list",-,false,21
          _llm_legal_validation,"(context:ValidationContext)->list",-,true,35
          _count_met_criteria,"(content:str)->int",-,false,11
          _get_correction_instructions,()->str,-,false,8
          _validate_nip_checksum,"(nip:str)->bool",-,false,34
  brgenerator/src/br_doc_generator/validators/pipeline.py:
    imports[17]: asyncio,datetime,typing.Optional,structlog,config.ValidationConfig,config.ValidationLevel,config.get_config,models.PipelineResult,models.ProjectInput,models.ValidationResult,models.ValidationStatus,base.BaseValidator,base.ValidationContext,content.ContentValidator,financial.FinancialValidator
    exports[1]: ValidationPipeline
    classes[1]{name,bases,decorators,props,methods}:
      ValidationPipeline,-,-,0,7
    class_details:
      ValidationPipeline:
        doc: Multi-level validation pipeline with iterative refinement.
        methods[7]{name,sig,decorators,async,lines}:
          __init__,"(llm_client=None;config:Optional[ValidationConfig]=None;use_llm:bool=True)->None",-,false,30
          run,"(markdown_content:str;project_input:ProjectInput;levels:Optional[list[str]]=None;max_iterations:Optional[int]=None)->tuple[str, PipelineResult]",-,true,39
          validate,"(project_input:ProjectInput;markdown_content:str;levels:Optional[list[ValidationLevel]]=None;max_iterations:Optional[int]=None)->PipelineResult",-,true,97
          _run_validation_level,"(validator:BaseValidator;context:ValidationContext;max_iterations:int)->tuple[list[ValidationResult], int, list[str]]",-,true,79
          _determine_overall_status,"(results:list[ValidationResult])->ValidationStatus",-,false,25
          _calculate_overall_score,"(results:list[ValidationResult])->float",-,false,32
          validate_single_level,"(project_input:ProjectInput;markdown_content:str;level:ValidationLevel)->ValidationResult",-,true,22
  brgenerator/src/br_doc_generator/generators/document.py:
    imports[9]: datetime,pathlib.Path,typing.Optional,structlog,config.AppConfig,config.get_config,llm_client.LLMClient,llm_client.get_llm_client,models.ProjectInput
    exports[2]: BR_DOCUMENTATION_SYSTEM_PROMPT,DocumentGenerator
    const[1]{n,t,v,keys}:
      BR_DOCUMENTATION_SYSTEM_PROMPT,str,"\"\"\"Jesteś ekspertem w przygotowywaniu dokumentacji do polskiej ulgi badawczo-rozwojowej (B+R). Generujesz profesjonal...","-"
    classes[1]{name,bases,decorators,props,methods}:
      DocumentGenerator,-,-,0,21
    class_details:
      DocumentGenerator:
        doc: LLM-powered B+R documentation generator.
        methods[21]{name,sig,decorators,async,lines}:
          __init__,"(config:Optional[AppConfig]=None;llm_client:Optional[LLMClient]=None)->None",-,false,14
          generate,"(project_input:ProjectInput;sections:Optional[list[str]]=None)->str",-,true,46
          generate_section,"(project_input:ProjectInput;section:str)->str",-,true,22
          _build_generation_prompt,"(project_input:ProjectInput;sections:list[str])->str",-,false,78
          _build_section_prompt,"(project_input:ProjectInput;section:str)->str",-,false,18
          _build_summary_prompt,"(project_input:ProjectInput)->str",-,false,17
          _build_description_prompt,"(project_input:ProjectInput)->str",-,false,14
          _build_methodology_prompt,"(project_input:ProjectInput)->str",-,false,16
          _build_innovation_prompt,"(project_input:ProjectInput)->str",-,false,16
          _build_costs_prompt,"(project_input:ProjectInput)->str",-,false,25
          _build_timeline_prompt,"(project_input:ProjectInput)->str",-,false,10
          _build_risk_prompt,"(project_input:ProjectInput)->str",-,false,13
          _build_conclusions_prompt,"(project_input:ProjectInput)->str",-,false,13
          _format_list,"(items:list)->str",-,false,4
          _format_risks,"(risks:list)->str",-,false,7
          _format_methods,"(methods:list)->str",-,false,7
          _format_milestones,"(milestones:list)->str",-,false,7
          _format_personnel_employment,"(personnel:list)->str",-,false,7
          _format_personnel_civil,"(personnel:list)->str",-,false,7
          _format_materials,"(materials:list)->str",-,false,7
          _format_external_services,"(services:list)->str",-,false,7
  brgenerator/src/br_doc_generator/generators/__init__.py:
    imports[4]: document.DocumentGenerator,form.FormGenerator,pdf.PDFRenderer,pdf.render_documentation_to_pdf
  brgenerator/src/br_doc_generator/generators/form.py:
    imports[8]: datetime.date,datetime,pathlib.Path,typing.Optional,yaml,structlog,config.get_config,datetime.timedelta
    exports[2]: FORM_TEMPLATE,FormGenerator
    const[1]{n,t,v,keys}:
      FORM_TEMPLATE,str,"\"\"\"# ============================================================================ # BR Documentation Generator - Form...","-"
    classes[1]{name,bases,decorators,props,methods}:
      FormGenerator,-,-,0,5
    class_details:
      FormGenerator:
        doc: Generator for project input YAML forms.
        methods[5]{name,sig,decorators,async,lines}:
          __init__,(config=None)->None,-,false,3
          generate_empty_form,"(project_name:str='Nazwa projektu';fiscal_year:Optional[int]=None;output_path:Optional[Path]=None)->str",-,false,56
          generate_prefilled_form,"(project_name:str;company_name:str;company_nip:str;fiscal_year:int;start_date:date;end_date:date)->str",-,false,57
          load_form,"(path:Path)->dict",staticmethod,false,19
          validate_form,"(data:dict)->list[str]",staticmethod,false,55
  brgenerator/src/br_doc_generator/generators/pdf.py:
    imports[11]: asyncio,datetime,pathlib.Path,typing.Optional,typing.Dict,typing.Any,structlog,markdown,weasyprint.HTML,weasyprint.CSS,weasyprint.text.fonts.FontConfiguration
    exports[4]: PROFESSIONAL_CSS,MINIMAL_CSS,PDFRenderer,render_documentation_to_pdf
    const[2]{n,t,v,keys}:
      PROFESSIONAL_CSS,str,"\"\"\" @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap');  @page {     siz...","-"
      MINIMAL_CSS,str,"\"\"\" body {     font-family: Arial, sans-serif;     font-size: 11pt;     line-height: 1.5;     margin: 2cm; }  h1 { fo...","-"
    classes[1]{name,bases,decorators,props,methods}:
      PDFRenderer,-,-,0,8
    class_details:
      PDFRenderer:
        doc: Renders markdown documentation to professional PDF.
        methods[8]{name,sig,decorators,async,lines}:
          __init__,"(template:str='professional';company_logo:Optional[str]=None;header:Optional[str]=None;footer:Optional[str]=None;custom_css:Optional[str]=None)->None",-,false,30
          _get_css,()->str,-,false,8
          _create_cover_page,"(title:str;subtitle:Optional[str]=None;company_name:Optional[str]=None;fiscal_year:Optional[int]=None)->str",-,false,24
          _convert_markdown_to_html,"(markdown_content:str)->str",-,false,29
          _enhance_html,"(html:str;title:Optional[str]=None;company_name:Optional[str]=None;fiscal_year:Optional[int]=None)->str",-,false,50
          render,"(markdown_content:str;output_path:str;metadata:Optional[Dict[str;Any]]=None)->str",-,false,70
          render_async,"(markdown_content:str;output_path:str;metadata:Optional[Dict[str;Any]]=None)->str",-,true,12
          render_from_file,"(markdown_path:str;output_path:str;metadata:Optional[Dict[str;Any]]=None)->str",-,false,21
    functions[1]{name,sig,decorators,async,category,lines}:
      render_documentation_to_pdf,"(markdown_content:str;output_path:str;company_name:Optional[str]=None;company_logo:Optional[str]=None;fiscal_year:Optional[int]=None;template:str='professional')->str",-,false,-,38
    function_docs:
      render_documentation_to_pdf: formats documentation to pdf